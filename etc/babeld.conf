# Babeld Routing Configuration for Natak Mesh
# This configuration enables proper route redistribution across the mesh network

# Kernel route installation
import-table 254
export-table 254

# Local monitoring interface (read-only)
local-port 33123

# Wireless mesh interface (wlan1)
interface wlan1 type wireless link-quality true split-horizon false rxcost 256 hello-interval 4 update-interval 16

# Wired bridge interface (br-lan)
interface br-lan type wired rxcost 96 hello-interval 4

# Redistribute local mesh network (10.20.1.0/24)
redistribute ip 10.20.1.0/24 allow

# Redistribute br-lan network (10.20.2.0/24)
redistribute ip 10.20.12.0/24 allow

# Block default local address /32 export (must come after allow rules)
redistribute local deny

# Default deny to prevent redistributing unwanted routes
redistribute deny
