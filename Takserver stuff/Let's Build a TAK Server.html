<!DOCTYPE html>
<!-- saved from url=(0046)https://mytecknet.com/lets-build-a-tak-server/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link href="./Let&#39;s Build a TAK Server_files/css" rel="stylesheet">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Let's Build a TAK Server</title>
    <link rel="stylesheet" href="./Let&#39;s Build a TAK Server_files/screen.css">

<!-- Table of Contents -->
    <link rel="stylesheet" href="./Let&#39;s Build a TAK Server_files/tocbot.css">
    <style>
    .gh-content {
    position: relative;
    }

    .gh-toc > .toc-list {
    position: relative;
    }

    .toc-list {
    overflow: hidden;
    list-style: none;
    }

    @media (min-width: 1550px) {
        .gh-sidebar {
        position: absolute; 
        top: 0;
        bottom: 0;
        margin-top: 4vmin;
        grid-column: wide-start / main-start; /* Place the TOC to the left of the content */
    }

    .gh-toc {
        position: sticky; /* On larger screens, TOC will stay in the same spot on the page */
        top: 4vmin;
        font-size: medium;
    }
    }

    .gh-toc .is-active-link::before {
    background-color: var(--ghost-accent-color); /* Defines TOC   accent color based on Accent color set in Ghost Admin */
    } 
    </style>
<!-- END Table of Contents -->

    <meta name="description" content="So you want to build a TAK Server?  The purpose of this guide is to build and familiarize ourselves with the TAK Server using the RPM installer and connect some clients.">
    <link rel="icon" href="./Let&#39;s Build a TAK Server_files/LogoOnly_20230301_01.png" type="image/png">
    <link rel="canonical" href="https://mytecknet.com/lets-build-a-tak-server/">
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <meta property="og:site_name" content="myTeckNet">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Let&#39;s Build a TAK Server">
    <meta property="og:description" content="So you want to build a TAK Server?  The purpose of this guide is to build and familiarize ourselves with the TAK Server using the RPM installer and connect some clients.">
    <meta property="og:url" content="https://mytecknet.com/lets-build-a-tak-server/">
    <meta property="og:image" content="https://mytecknet.com/content/images/2023/12/TAK-CIV-MIL-1.png">
    <meta property="article:published_time" content="2024-01-07T10:10:25.000Z">
    <meta property="article:modified_time" content="2024-10-14T18:20:37.000Z">
    <meta property="article:tag" content="Team Awareness/Tactical Assault Kit (TAK)">
    <meta property="article:tag" content="Guides">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Let&#39;s Build a TAK Server">
    <meta name="twitter:description" content="So you want to build a TAK Server?  The purpose of this guide is to build and familiarize ourselves with the TAK Server using the RPM installer and connect some clients.">
    <meta name="twitter:url" content="https://mytecknet.com/lets-build-a-tak-server/">
    <meta name="twitter:image" content="https://mytecknet.com/content/images/2023/12/TAK-CIV-MIL-1.png">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="JR">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="Team Awareness/Tactical Assault Kit (TAK), Guides">
    <meta property="og:image:width" content="480">
    <meta property="og:image:height" content="315">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "myTeckNet",
        "url": "https://mytecknet.com/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://mytecknet.com/content/images/2023/03/Logo20230301_04.png"
        }
    },
    "author": {
        "@type": "Person",
        "name": "JR",
        "image": {
            "@type": "ImageObject",
            "url": "https://www.gravatar.com/avatar/420ef2010b66ad6ebd98bf3a161439a7?s=250&r=x&d=mp",
            "width": 250,
            "height": 250
        },
        "url": "https://mytecknet.com/author/jr/",
        "sameAs": []
    },
    "headline": "Let&#x27;s Build a TAK Server",
    "url": "https://mytecknet.com/lets-build-a-tak-server/",
    "datePublished": "2024-01-07T10:10:25.000Z",
    "dateModified": "2024-10-14T18:20:37.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://mytecknet.com/content/images/2023/12/TAK-CIV-MIL-1.png",
        "width": 480,
        "height": 315
    },
    "keywords": "Team Awareness/Tactical Assault Kit (TAK), Guides",
    "description": "So you want to build a TAK Server?  The purpose of this guide is to build and familiarize ourselves with the TAK Server using the RPM installer and connect some clients.",
    "mainEntityOfPage": "https://mytecknet.com/lets-build-a-tak-server/"
}
    </script>

    <meta name="generator" content="Ghost 5.130">
    <link rel="alternate" type="application/rss+xml" title="myTeckNet" href="https://mytecknet.com/rss/">
    <script defer="" src="./Let&#39;s Build a TAK Server_files/portal.min.js" data-i18n="true" data-ghost="https://mytecknet.com/" data-key="7e8a47577f95c21b5a24a783bb" data-api="https://mytecknet.com/ghost/api/content/" data-locale="en" crossorigin="anonymous" type="text/javascript"></script><style id="gh-members-styles">.gh-post-upgrade-cta-content,
.gh-post-upgrade-cta {
    display: flex;
    flex-direction: column;
    align-items: center;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    text-align: center;
    width: 100%;
    color: #ffffff;
    font-size: 16px;
}

.gh-post-upgrade-cta-content {
    border-radius: 8px;
    padding: 40px 4vw;
}

.gh-post-upgrade-cta h2 {
    color: #ffffff;
    font-size: 28px;
    letter-spacing: -0.2px;
    margin: 0;
    padding: 0;
}

.gh-post-upgrade-cta p {
    margin: 20px 0 0;
    padding: 0;
}

.gh-post-upgrade-cta small {
    font-size: 16px;
    letter-spacing: -0.2px;
}

.gh-post-upgrade-cta a {
    color: #ffffff;
    cursor: pointer;
    font-weight: 500;
    box-shadow: none;
    text-decoration: underline;
}

.gh-post-upgrade-cta a:hover {
    color: #ffffff;
    opacity: 0.8;
    box-shadow: none;
    text-decoration: underline;
}

.gh-post-upgrade-cta a.gh-btn {
    display: block;
    background: #ffffff;
    text-decoration: none;
    margin: 28px 0 0;
    padding: 8px 18px;
    border-radius: 4px;
    font-size: 16px;
    font-weight: 600;
}

.gh-post-upgrade-cta a.gh-btn:hover {
    opacity: 0.92;
}</style><script async="" src="./Let&#39;s Build a TAK Server_files/saved_resource" type="text/javascript"></script>
    <script defer="" src="./Let&#39;s Build a TAK Server_files/sodo-search.min.js" data-key="7e8a47577f95c21b5a24a783bb" data-styles="https://cdn.jsdelivr.net/ghost/sodo-search@~1.8/umd/main.css" data-sodo-search="https://mytecknet.com/" data-locale="en" crossorigin="anonymous" type="text/javascript"></script>
    <script defer="" src="./Let&#39;s Build a TAK Server_files/announcement-bar.min.js" data-announcement-bar="https://mytecknet.com/" data-api-url="https://mytecknet.com/members/api/announcement/" crossorigin="anonymous" type="text/javascript"></script>
    <link href="https://mytecknet.com/webmentions/receive/" rel="webmention">
    <script defer="" src="./Let&#39;s Build a TAK Server_files/cards.min.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="./Let&#39;s Build a TAK Server_files/cards.min.css">
    <script defer="" src="./Let&#39;s Build a TAK Server_files/comment-counts.min.js" data-ghost-comments-counts-api="https://mytecknet.com/members/api/comments/counts/" type="text/javascript"></script>
    <script defer="" src="./Let&#39;s Build a TAK Server_files/member-attribution.min.js" type="text/javascript"></script><style>:root {--ghost-accent-color: #5900ff;}</style>
    <!-- Smooth Scrolling -->
<style>
  html{scroll-behavior: smooth;}
</style>
<!-- Google tag (gtag.js) -->
<script async="" src="./Let&#39;s Build a TAK Server_files/js" type="text/javascript"></script>
<script type="text/javascript">
    var gh_search_key = '217ea4d7bcc3aac791f8c44013';
    var gh_search_migration = 'v1';
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-000WPWJG5W');
</script>
<style>
.reading-progress {
  position: fixed;
  top: 0;
  z-index: 999;
  width: 100%;
  height: 5px; /* Progress bar height */
  background: #c5d2d9; /* Progress bar background color */
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none; /* Hide default progress bar */
}

.reading-progress::-webkit-progress-bar {
  background-color: transparent;
}

.reading-progress::-webkit-progress-value {
  background: var(--ghost-accent-color); /* Progress bar color */
}
</style>
<!-- Google AutoAds -->
<script async="" src="./Let&#39;s Build a TAK Server_files/f.txt" crossorigin="anonymous" type="text/javascript">
</script>
<script async="" src="./Let&#39;s Build a TAK Server_files/pub-7591998231994730" nonce="-jf4pr2hXZp97Q7L4GF7jg" type="text/javascript"></script><script nonce="-jf4pr2hXZp97Q7L4GF7jg" type="text/javascript">(function() {function signalGooglefcPresent() {if (!window.frames['googlefcPresent']) {if (document.body) {const iframe = document.createElement('iframe'); iframe.style = 'width: 0; height: 0; border: none; z-index: -1000; left: -1000px; top: -1000px;'; iframe.style.display = 'none'; iframe.name = 'googlefcPresent'; document.body.appendChild(iframe);} else {setTimeout(signalGooglefcPresent, 0);}}}signalGooglefcPresent();})();</script>

<!-- Code Styles -->
<link rel="stylesheet" href="./Let&#39;s Build a TAK Server_files/prism-tomorrow.min.css" integrity="sha512-vswe+cgvic/XBoF1OcM/TeJ2FW0OofqAVdCZiEYkd6dwGXthvkSFWOoGGJgS2CW70VK5dQM5Oh+7ne47s74VTg==" crossorigin="anonymous" referrerpolicy="no-referrer">
<link rel="stylesheet" href="./Let&#39;s Build a TAK Server_files/prism-toolbar.min.css" integrity="sha512-Dqf5696xtofgH089BgZJo2lSWTvev4GFo+gA2o4GullFY65rzQVQLQVlzLvYwTo0Bb2Gpb6IqwxYWtoMonfdhQ==" crossorigin="anonymous" referrerpolicy="no-referrer">
<link rel="stylesheet" href="./Let&#39;s Build a TAK Server_files/prism-line-numbers.min.css" integrity="sha512-cbQXwDFK7lj2Fqfkuxbo5iD1dSbLlJGXGpfTDqbggqjHJeyzx88I3rfwjS38WJag/ihH7lzuGlGHpDBymLirZQ==" crossorigin="anonymous" referrerpolicy="no-referrer">

<!-- External Hyperlinks -->
<script type="text/javascript">
    var links = document.querySelectorAll('a');
    links.forEach((link) => {
        var a = new RegExp('/' + window.location.host + '/');
        if(!a.test(link.href)) {
            link.addEventListener('click', (event) => {
                event.preventDefault();
                event.stopPropagation();
                window.open(link.href, '_blank');
            });
        }
    });
</script>
<script async="" src="./Let&#39;s Build a TAK Server_files/AGSKWxUphe42W-dyqGTMnQfMSA-Pg3pnXDtRbuazEU4dvmvoeAizm83TJEnz3fK6o0QecgausPQtgmvx4We2ZMTm9s4A027XgtkknZ15pzm6YENVUaG8FI9nzyMEhf_UpJ_ac2tV05l7hg==" nonce="-jf4pr2hXZp97Q7L4GF7jg"></script><script async="" src="./Let&#39;s Build a TAK Server_files/AGSKWxXckyL7GhEljuYqNrPlfOnz9hkVbFVRWy8vtpGPmUy4mUFdyJljrJWb4J-eCA6NLKHBu39-WWysd3qCRODcDRRlK32YyEH5st7RTQ1_PuPwyFYBZWrwap_N3UzxOx4c-JvC6p4rHA==" nonce="-jf4pr2hXZp97Q7L4GF7jg"></script><style>div.fc-ab-root, .fc-ab-root a:link, .fc-ab-root div,.fc-ab-root h1,.fc-ab-root h2,.fc-ab-root a,.fc-ab-root p,.fc-ab-root button,.fc-ab-root i,.fc-ab-root input,.fc-ab-root label,.fc-ab-root span,.fc-ab-root ul,.fc-ab-root li,.fc-ab-root hr,.fc-ab-root img,.fc-ab-root br,.fc-ab-root footer{-webkit-app-region: none; -webkit-appearance: none; -webkit-border-horizontal-spacing: 0; -webkit-border-image: none; -webkit-border-vertical-spacing: 0; -webkit-box-align: stretch; -webkit-box-decoration-break: slice; -webkit-box-direction: normal; -webkit-box-flex: 0; -webkit-box-ordinal-group: 1; -webkit-box-orient: horizontal; -webkit-box-pack: start; -webkit-box-reflect: none; -webkit-font-smoothing: auto; -webkit-highlight: none; -webkit-hyphenate-character: auto; -webkit-line-break: auto; -webkit-line-clamp: none; -webkit-locale: auto; -webkit-margin-after-collapse: collapse; -webkit-margin-before-collapse: collapse; -webkit-mask-box-image-outset: 0; -webkit-mask-box-image-repeat: stretch; -webkit-mask-box-image-slice: 0 fill; -webkit-mask-box-image-source: none; -webkit-mask-box-image-width: auto; -webkit-mask-box-image: none; -webkit-mask-clip: border-box; -webkit-mask-composite: source-over; -webkit-mask-image: none; -webkit-mask-origin: border-box; -webkit-mask-position: 0% 0%; -webkit-mask-repeat: repeat; -webkit-mask-size: auto; -webkit-print-color-adjust: economy; -webkit-rtl-ordering: logical; -webkit-tap-highlight-color: rgba(0, 0, 0, 0.4); -webkit-text-combine: none; -webkit-text-decorations-in-effect: none; -webkit-text-emphasis-color: rgb(0, 0, 0); -webkit-text-emphasis-position: over right; -webkit-text-emphasis-style: none; -webkit-text-orientation: vertical-right; -webkit-text-security: none; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: 0; -webkit-user-drag: auto; -webkit-writing-mode: horizontal-tb; align-content: normal; align-items: normal; align-self: auto; alignment-baseline: auto; animation-delay: 0s; animation-direction: normal; animation-duration: 0s; animation-fill-mode: none; animation-iteration-count: 1; animation-name: none; animation-play-state: running; animation-timing-function: ease; backdrop-filter: none; backface-visibility: visible; background-attachment: scroll; background-blend-mode: normal; background-clip: border-box; background-color: rgba(0, 0, 0, 0); background-image: none; background-origin: padding-box; background-position: 0% 0%; background-repeat: repeat; background-size: auto; baseline-shift: 0; border-bottom-color: rgb(0, 0, 0); border-bottom-left-radius: 0; border-bottom-right-radius: 0; border-bottom-style: none; border-bottom-width: 0; border-collapse: separate; border-image-outset: 0; border-image-repeat: stretch; border-image-slice: 100%; border-image-source: none; border-image-width: 1; border-left-color: rgb(0, 0, 0); border-left-style: none; border-left-width: 0; border-right-color: rgb(0, 0, 0); border-right-style: none; border-right-width: 0; border-top-color: rgb(0, 0, 0); border-top-left-radius: 0; border-top-right-radius: 0; border-top-style: none; border-top-width: 0; bottom: auto; box-shadow: none; box-sizing: content-box; break-after: auto; break-before: auto; break-inside: auto; buffered-rendering: auto; caption-side: top; caret-color: rgb(0, 0, 0); clear: none; clip-path: none; clip-rule: nonzero; clip: auto; color-interpolation-filters: linearrgb; color-interpolation: srgb; color-rendering: auto; color: rgb(0, 0, 0); column-count: auto; column-gap: normal; column-rule-color: rgb(0, 0, 0); column-rule-style: none; column-rule-width: 0; column-span: none; column-width: auto; content: normal; cursor: auto; cx: 0; cy: 0; d: none; display: inline; dominant-baseline: auto; empty-cells: show; fill-opacity: 1; fill-rule: nonzero; fill: rgb(0; 0; 0); filter: none; flex-basis: auto; flex-direction: row; flex-grow: 0; flex-shrink: 1; flex-wrap: nowrap; float: none; flood-color: rgb(0, 0, 0); flood-opacity: 1; font-kerning: auto; font-optical-sizing: auto; font-size: 16px; font-stretch: 100%; font-style: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-ligatures: normal; font-variant-numeric: normal; font-variant: normal; font-weight: 400; grid-auto-columns: auto; grid-auto-flow: row; grid-auto-rows: auto; grid-column-end: auto; grid-column-start: auto; grid-row-end: auto; grid-row-start: auto; grid-template-areas: none; grid-template-columns: none; grid-template-rows: none; height: auto; hyphens: manual; image-rendering: auto; isolation: auto; justify-content: normal; justify-items: normal; justify-self: auto; left: auto; letter-spacing: normal; lighting-color: rgb(255, 255, 255); line-break: auto; line-height: normal; list-style-image: none; list-style-position: outside; list-style-type: disc; margin-bottom: 0; margin-left: 0; margin-right: 0; margin-top: 0; marker-end: none; marker-mid: none; marker-start: none; mask-type: luminance; mask: none; max-height: none; max-width: none; min-height: 0; min-width: 0; mix-blend-mode: normal; object-fit: fill; object-position: 50% 50%; offset-distance: 0; offset-path: none; offset-rotate: auto 0deg; opacity: 1; order: 0; orphans: 2; outline-color: rgb(0, 0, 0); outline-offset: 0; outline-style: none; outline-width: 0; overflow-anchor: auto; overflow-wrap: normal; overflow-x: visible; overflow-y: visible; padding-bottom: 0; padding-left: 0; padding-right: 0; padding-top: 0; paint-order: normal; perspective-origin: 0 0; perspective: none; pointer-events: auto; position: static; r: 0; resize: none; right: auto; row-gap: normal; rx: auto; ry: auto; scale: none; scroll-behavior: auto; shape-image-threshold: 0; shape-margin: 0; shape-outside: none; shape-rendering: auto; speak: normal; stop-color: rgb(0, 0, 0); stop-opacity: 1; stroke-dasharray: none; stroke-dashoffset: 0; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 4; stroke-opacity: 1; stroke-width: 1px; stroke: none; tab-size: 8; table-layout: auto; text-align-last: auto; text-align: start; text-anchor: start; text-decoration-color: rgb(0, 0, 0); text-decoration-line: none; text-decoration-skip-ink: auto; text-decoration-style: solid; text-decoration: none solid rgb(0, 0, 0); text-indent: 0; text-overflow: clip; text-rendering: auto; text-shadow: none; text-size-adjust: auto; text-transform: none; text-underline-position: auto; top: auto; touch-action: auto; transform-origin: 0 0; transform-style: flat; transform: none; transition-delay: 0s; transition-duration: 0s; transition-property: all; transition-timing-function: ease; unicode-bidi: normal; user-select: auto; vector-effect: none; vertical-align: baseline; visibility: visible; white-space: normal; widows: 2; width: auto; will-change: auto; word-break: normal; word-spacing: 0; writing-mode: horizontal-tb; x: 0; y: 0; z-index: auto; zoom: 1;}div.fc-whitelist-root,.fc-whitelist-root div,.fc-whitelist-root iframe{-webkit-app-region: none; -webkit-appearance: none; -webkit-border-horizontal-spacing: 0; -webkit-border-image: none; -webkit-border-vertical-spacing: 0; -webkit-box-align: stretch; -webkit-box-decoration-break: slice; -webkit-box-direction: normal; -webkit-box-flex: 0; -webkit-box-ordinal-group: 1; -webkit-box-orient: horizontal; -webkit-box-pack: start; -webkit-box-reflect: none; -webkit-font-smoothing: auto; -webkit-highlight: none; -webkit-hyphenate-character: auto; -webkit-line-break: auto; -webkit-line-clamp: none; -webkit-locale: auto; -webkit-margin-after-collapse: collapse; -webkit-margin-before-collapse: collapse; -webkit-mask-box-image-outset: 0; -webkit-mask-box-image-repeat: stretch; -webkit-mask-box-image-slice: 0 fill; -webkit-mask-box-image-source: none; -webkit-mask-box-image-width: auto; -webkit-mask-box-image: none; -webkit-mask-clip: border-box; -webkit-mask-composite: source-over; -webkit-mask-image: none; -webkit-mask-origin: border-box; -webkit-mask-position: 0% 0%; -webkit-mask-repeat: repeat; -webkit-mask-size: auto; -webkit-print-color-adjust: economy; -webkit-rtl-ordering: logical; -webkit-tap-highlight-color: rgba(0, 0, 0, 0.4); -webkit-text-combine: none; -webkit-text-decorations-in-effect: none; -webkit-text-emphasis-color: rgb(0, 0, 0); -webkit-text-emphasis-position: over right; -webkit-text-emphasis-style: none; -webkit-text-orientation: vertical-right; -webkit-text-security: none; -webkit-text-stroke-color: rgb(0, 0, 0); -webkit-text-stroke-width: 0; -webkit-user-drag: auto; -webkit-writing-mode: horizontal-tb; align-content: normal; align-items: normal; align-self: auto; alignment-baseline: auto; animation-delay: 0s; animation-direction: normal; animation-duration: 0s; animation-fill-mode: none; animation-iteration-count: 1; animation-name: none; animation-play-state: running; animation-timing-function: ease; backdrop-filter: none; backface-visibility: visible; background-attachment: scroll; background-blend-mode: normal; background-clip: border-box; background-color: rgba(0, 0, 0, 0); background-image: none; background-origin: padding-box; background-position: 0% 0%; background-repeat: repeat; background-size: auto; baseline-shift: 0; border-bottom-color: rgb(0, 0, 0); border-bottom-left-radius: 0; border-bottom-right-radius: 0; border-bottom-style: none; border-bottom-width: 0; border-collapse: separate; border-image-outset: 0; border-image-repeat: stretch; border-image-slice: 100%; border-image-source: none; border-image-width: 1; border-left-color: rgb(0, 0, 0); border-left-style: none; border-left-width: 0; border-right-color: rgb(0, 0, 0); border-right-style: none; border-right-width: 0; border-top-color: rgb(0, 0, 0); border-top-left-radius: 0; border-top-right-radius: 0; border-top-style: none; border-top-width: 0; bottom: auto; box-shadow: none; box-sizing: content-box; break-after: auto; break-before: auto; break-inside: auto; buffered-rendering: auto; caption-side: top; caret-color: rgb(0, 0, 0); clear: none; clip-path: none; clip-rule: nonzero; clip: auto; color-interpolation-filters: linearrgb; color-interpolation: srgb; color-rendering: auto; color: rgb(0, 0, 0); column-count: auto; column-gap: normal; column-rule-color: rgb(0, 0, 0); column-rule-style: none; column-rule-width: 0; column-span: none; column-width: auto; content: normal; cursor: auto; cx: 0; cy: 0; d: none; display: inline; dominant-baseline: auto; empty-cells: show; fill-opacity: 1; fill-rule: nonzero; fill: rgb(0; 0; 0); filter: none; flex-basis: auto; flex-direction: row; flex-grow: 0; flex-shrink: 1; flex-wrap: nowrap; float: none; flood-color: rgb(0, 0, 0); flood-opacity: 1; font-kerning: auto; font-optical-sizing: auto; font-size: 16px; font-stretch: 100%; font-style: normal; font-variant-caps: normal; font-variant-east-asian: normal; font-variant-ligatures: normal; font-variant-numeric: normal; font-variant: normal; font-weight: 400; grid-auto-columns: auto; grid-auto-flow: row; grid-auto-rows: auto; grid-column-end: auto; grid-column-start: auto; grid-row-end: auto; grid-row-start: auto; grid-template-areas: none; grid-template-columns: none; grid-template-rows: none; height: auto; hyphens: manual; image-rendering: auto; isolation: auto; justify-content: normal; justify-items: normal; justify-self: auto; left: auto; letter-spacing: normal; lighting-color: rgb(255, 255, 255); line-break: auto; line-height: normal; list-style-image: none; list-style-position: outside; list-style-type: disc; margin-bottom: 0; margin-left: 0; margin-right: 0; margin-top: 0; marker-end: none; marker-mid: none; marker-start: none; mask-type: luminance; mask: none; max-height: none; max-width: none; min-height: 0; min-width: 0; mix-blend-mode: normal; object-fit: fill; object-position: 50% 50%; offset-distance: 0; offset-path: none; offset-rotate: auto 0deg; opacity: 1; order: 0; orphans: 2; outline-color: rgb(0, 0, 0); outline-offset: 0; outline-style: none; outline-width: 0; overflow-anchor: auto; overflow-wrap: normal; overflow-x: visible; overflow-y: visible; padding-bottom: 0; padding-left: 0; padding-right: 0; padding-top: 0; paint-order: normal; perspective-origin: 0 0; perspective: none; pointer-events: auto; position: static; r: 0; resize: none; right: auto; row-gap: normal; rx: auto; ry: auto; scale: none; scroll-behavior: auto; shape-image-threshold: 0; shape-margin: 0; shape-outside: none; shape-rendering: auto; speak: normal; stop-color: rgb(0, 0, 0); stop-opacity: 1; stroke-dasharray: none; stroke-dashoffset: 0; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 4; stroke-opacity: 1; stroke-width: 1px; stroke: none; tab-size: 8; table-layout: auto; text-align-last: auto; text-align: start; text-anchor: start; text-decoration-color: rgb(0, 0, 0); text-decoration-line: none; text-decoration-skip-ink: auto; text-decoration-style: solid; text-decoration: none solid rgb(0, 0, 0); text-indent: 0; text-overflow: clip; text-rendering: auto; text-shadow: none; text-size-adjust: auto; text-transform: none; text-underline-position: auto; top: auto; touch-action: auto; transform-origin: 0 0; transform-style: flat; transform: none; transition-delay: 0s; transition-duration: 0s; transition-property: all; transition-timing-function: ease; unicode-bidi: normal; user-select: auto; vector-effect: none; vertical-align: baseline; visibility: visible; white-space: normal; widows: 2; width: auto; will-change: auto; word-break: normal; word-spacing: 0; writing-mode: horizontal-tb; x: 0; y: 0; z-index: auto; zoom: 1;}.fc-ab-root a:link, .fc-ab-root a p {cursor: pointer; position: relative;}.fc-ab-root button, .fc-ab-root button div, .fc-ab-root button p, .fc-ab-root .fc-button, .fc-ab-root .fc-button div, .fc-ab-root .fc-button p {cursor: pointer;}.fc-ab-root a:hover {filter: brightness(80%);}.fc-ab-root button:focus p:not(.fc-button-text), .fc-ab-root button:focus, .fc-ab-root .fc-button:focus, .fc-ab-root a:focus, .fc-ab-root .fc-toggle input:focus, .fc-ab-root .fc-dropdown-selection:focus, .fc-ab-root .fc-dropdown-menu-item:focus {box-shadow: 0 0 0 3px #FFFFFF; outline: 2px #174EA6 solid;}@supports selector(:focus-visible) {.fc-ab-root button:focus p:not(.fc-button-text), .fc-ab-root button:focus, .fc-ab-root .fc-button:focus, .fc-ab-root a:focus, .fc-ab-root .fc-toggle input:focus, .fc-ab-root .fc-dropdown-selection:focus, .fc-ab-root .fc-dropdown-menu-item:focus {box-shadow: none; outline: none;}.fc-ab-root button:focus-visible::before, .fc-ab-root a:focus-visible::before, .fc-ab-root input:focus-visible::before, .fc-ab-root .fc-dropdown-selection-container:focus-visible::before, .fc-ab-root .fc-dropdown-menu-item:focus::before {border: 2px solid #174EA6; border-radius: 6px; content: ''; inset: -4px; position: absolute;}.fc-ab-root button:focus-visible::after, .fc-ab-root a:focus-visible::after, .fc-ab-root input:focus-visible::after, .fc-ab-root .fc-dropdown-selection-container:focus-visible::after, .fc-ab-root .fc-dropdown-menu-item:focus::after {border: 2px solid #e8f0fe; border-radius: 8px; content: ''; inset: -6px; position: absolute;}.fc-ab-root button.fc-icon-button:focus-visible::before {inset: -2px;}.fc-ab-root button.fc-icon-button:focus-visible::after {inset: -4px;}.fc-ab-root button.fc-list-item-button:focus-visible::before {left: 2px; width: calc(100% - 8px)}.fc-ab-root button.fc-list-item-button:focus-visible::after {left: 0; width: calc(100% - 4px)}}.fc-ab-root .fc-button, .fc-ab-root .fc-dialog {outline: 1px solid transparent;}div.fc-ab-root {display: flex; height: 100%; justify-content: center; width: 100%;}div.fc-whitelist-root {position: fixed; z-index: 2147483644;align-items: center; float: top; height: 100%; left: 0; overflow-x: auto; top: 0;align-items: center; display: flex; justify-content: center; width: 100%;}.fc-ab-root .fc-cutout-background {background-color: #FFFFFF; border-radius: 50%; cursor: pointer; height: 10px; position: absolute; width: 10px; z-index: -1;}.fc-ab-root .fc-close-background {background-color: transparent; border-radius: 50%; cursor: pointer; height: 40px; position: absolute; width: 40px; z-index: -2;}.fc-ab-root .fc-cancel-icon-svg {cursor: pointer; display: flex; fill: #5F6368;}.fc-ab-root .fc-close {align-items: center; box-sizing: border-box; cursor: pointer; direction: ltr; display: flex; height: 40px; justify-content: center; margin: 0; opacity: 1; outline: none; position: absolute; width: 40px; top: 0; right: 0; z-index: 1;}.fc-ab-root .fc-close:focus {outline: none; box-shadow: none;}.fc-ab-root .fc-close:hover .fc-close-background {background-color: #202124; opacity: 0.04;}.fc-ab-root .fc-close:focus .fc-close-background {background-color: #202124; opacity: 0.12;}.fc-ab-root .fc-close:hover .fc-cancel-icon-svg, .fc-ab-root .fc-close:focus .fc-cancel-icon-svg  {fill: #202124;}.fc-ab-root .fc-dialog-overlay, .fc-whitelist-root .fc-dialog-overlay {background-color: black; height: 100%; left: 0; opacity: 0.6; position: fixed; top: 0; width: 100%; z-index: -1;}.fc-ab-root .fc-dialog-container {z-index: 2147483644;align-items: center; display: flex; height: 100%; justify-content: center; width: 100%;left: 0; position: fixed; top: 0;}.fc-ab-root .fc-ab-dialog {align-items: center;border-radius: 8px; max-width: 512px; width: 90%;background: #ffffff;border: none;border-radius: 0.5em;padding-left: 1.5em; padding-right: 1.5em;padding-top: 1.5em; padding-bottom: 1.5em;box-sizing: border-box; display: flex; flex-direction: column; float: top; justify-content: center; max-height: 90%; min-width: 200px; position: relative;}@media screen and (max-width: 479px) {.fc-ab-root .fc-ab-dialog {font-size: 14px; line-height: 20px;}}@media screen and (min-width: 480px) {.fc-ab-root .fc-ab-dialog {font-size: 16px; line-height: 24px;}}.fc-ab-root .fc-ab-dialog > *:not(:last-child) {margin-bottom: 24px;}.fc-ab-root .fc-ab-dialog .fc-dialog-content {align-items: center; box-sizing: border-box; display: flex; flex-direction: column; overflow: auto; width: 100%;}.fc-ab-root .fc-ab-dialog .fc-dialog-content > *:not(:last-child) {margin-bottom: 16px;}.fc-ab-root .fc-ab-dialog .fc-dialog-content > * {flex-shrink: 0;}.fc-ab-root .fc-ab-dialog .fc-dialog-footer {align-items: center; box-sizing: border-box; display: flex; flex-direction: column; font-size: inherit; min-height: auto; justify-content: center;width: 100%;}.fc-ab-root .fc-ab-dialog .fc-dialog-footer .fc-footer-text {color: #5F6368; display: inline-block; font-size: 0.86em;}.fc-ab-root .fc-ab-dialog .fc-dialog-footer > div:not(:last-child) {margin-bottom: 16px;}.fc-ab-root .fc-dialog-headline {align-items: center; display: flex; flex-direction: column; justify-content: center; width: 100%;}.fc-ab-root .fc-dialog-headline > *:not(:last-child) {margin-bottom: 8px;}.fc-ab-root .fc-dialog-headline-text {overflow-wrap: break-word;font-weight: 700;font-style: normal;text-decoration: initial;text-align: center;font-family: 'Roboto';color: #323232;font-size: 1.75em;width: 100%;}.fc-ab-root .fc-header {display: flex; flex-direction: column; justify-content: center; width: 100%;}.fc-ab-root .fc-header-text {line-height: 1.5em;overflow-wrap: break-word;font-weight: 700;font-style: normal;text-decoration: initial;text-align: center;font-family: 'Roboto';color: #747a80;font-size: 1.25em;}.fc-ab-root .fc-header-image-container {display: flex; flex-direction: row;justify-content: center;}.fc-ab-root .fc-header-image {max-height: 60px; min-height: 40px; object-fit: contain;}.fc-ab-root .fc-dialog-body {display: flex; justify-content: center; width: 100%;}.fc-ab-root .fc-dialog-body-text {line-height: 1.5em; margin: 0; padding: 0; width: 100%;overflow-wrap: break-word;font-weight: normal;font-style: normal;text-decoration: initial;text-align: center;font-family: 'Roboto';color: #000000;font-size: 1.25em;}.fc-ab-root .fc-button {padding-left: 1em; padding-right: 1em;padding-top: 0.5em; padding-bottom: 0.5em;background: #fff;border: none;border-radius: 0.25em;overflow: hidden;box-sizing: border-box; align-items: center; display: inline-flex; justify-content: center; position: relative; width: 100%; z-index: 1;}.fc-ab-root .fc-button:not(:only-child) {}@supports (flex-wrap: wrap) and (gap: 16px) {@media screen and (min-width: 480px) {}}.fc-ab-root .fc-button .fc-button-background {background: #0099ff;border: none;height: 100%; left: 0; position: absolute; top: 0; transition: all 150ms ease-in; width: 100%; z-index: -1; -webkit-transition: all 150ms ease-in; -moz-transition: all 150ms ease-in; -o-transition: all 150ms ease-in; -ms-transition: all 150ms ease-in;}.fc-ab-root .fc-button.fc-secondary-button .fc-button-background {}.fc-ab-root .fc-button:hover:enabled .fc-button-background {filter: brightness(84%); transition: all 150ms ease-in; -webkit-transition: all 150ms ease-in; -moz-transition: all 150ms ease-in; -o-transition: all 150ms ease-in; -ms-transition: all 150ms ease-in;}.fc-ab-root .fc-button:focus:enabled .fc-button-background, .fc-ab-root .fc-button:active:enabled .fc-button-background {filter: brightness(61%); transition: all 150ms ease-in; -webkit-transition: all 150ms ease-in; -moz-transition: all 150ms ease-in; -o-transition: all 150ms ease-in; -ms-transition: all 150ms ease-in;}.fc-ab-root .fc-button-text {line-height: 1.25em; margin: 0; width: 100%;overflow-wrap: break-word;font-weight: 700;font-style: normal;text-decoration: initial;text-align: center;font-family: 'Roboto';color: #ffffff;font-size: 1.25em;}.fc-ab-root .fc-secondary-button > .fc-button-text {}.fc-ab-root .fc-button:disabled .fc-button-text {color: #9AA0A6; cursor: default;}.fc-ab-root .fc-button:disabled .fc-button-background {background-color: #DADCE0; cursor: default;}.fc-ab-root .fc-button.fc-text-button {align-items: center; display: flex; position: relative; z-index: 1;}.fc-ab-root .fc-button.fc-text-button p {color: #0099ff; font-weight: 600;}.fc-ab-root .fc-button.fc-text-button .fc-button-background {background-color: #FFFFFF;}.fc-ab-root .fc-button.fc-text-button svg {fill: #0099ff;}@media screen and (max-width: 480px) {.fc-ab-root .fc-buttons-section {flex-direction: column;}.fc-ab-root .fc-button.fc-primary-button {order: 1;}.fc-ab-root .fc-button.fc-secondary-button {order: 2;}}@media screen and (min-width: 481px) {.fc-ab-root .fc-button.fc-primary-button {order: 2;}.fc-ab-root .fc-button.fc-secondary-button {order: 1;}}.fc-ab-root .fc-buttons-section {align-items: center; display: flex; flex-direction: column; justify-content: center; max-width: 416px; width: 100%;}@supports (flex-wrap: wrap) {.fc-ab-root .fc-buttons-section {flex-direction: unset; flex-wrap: wrap; -ms-flex-wrap: wrap;}}.fc-ab-root .fc-buttons-section > *:not(:last-child) {margin-bottom: 16px;}@supports (flex-wrap: wrap) and (gap: 16px) and selector(::first-letter) {.fc-ab-root .fc-buttons-section {gap: 16px;}.fc-ab-root .fc-buttons-section > *:not(:last-child) {margin-bottom: 0;}}.fc-ab-root .fc-dialog-footer .fc-subscription-link {cursor: pointer; text-decoration: underline;overflow-wrap: break-word;font-weight: normal;font-style: normal;text-decoration: initial;text-align: center;font-family: 'Roboto';color: #4A90E2;font-size: 1em;}.fc-ab-root .fc-dialog-footer .fc-subscription-link {line-height: 1.25em; max-width: 400px;}.fc-whitelist-root .fc-whitelist-dialog-wrapper {align-items: center; display: flex; justify-content: center; height: 100%; left: 0; opacity: 1; position: fixed; top: 0; width: 100%;}.fc-whitelist-root .fc-whitelist-dialog {box-shadow: 1px -1px 16px #888888; border-radius: 2px; height: 570px; left: 0; max-height: 90%; max-width: 600px; top: 0; width: 100%;}</style><script async="" src="./Let&#39;s Build a TAK Server_files/AGSKWxXN_4SGk5S0RKjl7KZPWD9mELYfraSCzvxedn8d3FAJYRe9PyqmuMY0cQVEMEbRCJEuN4MyAfUFI4FSKqTDWFKD9Tn4k4WthfqKS1ck4fPBzn-2_pdDh-43tFHcmNlac-URi8Sosw==" nonce="-jf4pr2hXZp97Q7L4GF7jg"></script><style>.App{text-align:center}.App-logo{height:40vmin;pointer-events:none}@media (prefers-reduced-motion: no-preference){.App-logo{animation:App-logo-spin infinite 20s linear}}.App-header{background-color:#282c34;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:calc(10px + 2vmin);color:#fff}.App-link{color:#61dafb}@keyframes App-logo-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
/*$vite$:1*/</style><style>.gh-announcement-bar,.gh-announcement-bar *{box-sizing:border-box!important}.gh-announcement-bar{position:relative;z-index:90;display:flex;align-items:center;justify-content:center;padding:12px 48px;min-height:48px;font-size:15px;line-height:23px;text-align:center}.gh-announcement-bar.light{background-color:#f0f0f0;color:#15171a}.gh-announcement-bar.accent{background-color:var(--ghost-accent-color);color:#fff}.gh-announcement-bar.dark{background-color:#15171a;color:#fff}.gh-announcement-bar *:not(path){all:unset}.gh-announcement-bar strong{font-weight:700}.gh-announcement-bar :is(i,em){font-style:italic}.gh-announcement-bar a{color:#fff;font-weight:700;text-decoration:underline;cursor:pointer}.gh-announcement-bar.light a{color:var(--ghost-accent-color)!important}.gh-announcement-bar button{position:absolute;top:50%;right:8px;display:flex;align-items:center;justify-content:center;margin-top:-16px;width:32px;height:32px;padding:0;background-color:transparent;border:0;color:#fff;cursor:pointer}.gh-announcement-bar.light button{color:#888}.gh-announcement-bar svg{width:10px;height:10px;fill:currentColor}
</style></head>

<body class="post-template tag-tak tag-guides is-head-left-logo is-dropdown-loaded" style=""><div id="announcement-bar-root"><div class="gh-announcement-bar accent"><div class="gh-announcement-bar-content"><p dir="ltr"><span>Universal TAK installer:</span><b><strong> installTAK 2.0 released</strong></b><span>!  Check it out </span><a href="https://github.com/myTeckNet/installTAK/tree/main" rel="noreferrer"><span>here</span></a><span>.</span></p></div><button aria-label="close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="16" width="16"><path stroke-linecap="round" stroke-width="0.4" fill="currentColor" stroke="#000000" stroke-linejoin="round" d="M.44,21.44a1.49,1.49,0,0,0,0,2.12,1.5,1.5,0,0,0,2.12,0l9.26-9.26a.25.25,0,0,1,.36,0l9.26,9.26a1.5,1.5,0,0,0,2.12,0,1.49,1.49,0,0,0,0-2.12L14.3,12.18a.25.25,0,0,1,0-.36l9.26-9.26A1.5,1.5,0,0,0,21.44.44L12.18,9.7a.25.25,0,0,1-.36,0L2.56.44A1.5,1.5,0,0,0,.44,2.56L9.7,11.82a.25.25,0,0,1,0,.36Z"></path></svg></button></div></div>
<div class="site">

    <header id="gh-head" class="gh-head gh-outer">
        <div class="gh-head-inner gh-inner">
            <div class="gh-head-brand">
                <div class="gh-head-brand-wrapper">
                    <a class="gh-head-logo" href="https://mytecknet.com/">
                            <img src="./Let&#39;s Build a TAK Server_files/Logo20230301_04.png" alt="myTeckNet">
                    </a>
                </div>
                <button class="gh-search gh-icon-btn" aria-label="Search this site" data-ghost-search=""><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M17.5 17.5L12.5 12.5L17.5 17.5ZM14.1667 8.33333C14.1667 9.09938 14.0158 9.85792 13.7226 10.5657C13.4295 11.2734 12.9998 11.9164 12.4581 12.4581C11.9164 12.9998 11.2734 13.4295 10.5657 13.7226C9.85792 14.0158 9.09938 14.1667 8.33333 14.1667C7.56729 14.1667 6.80875 14.0158 6.10101 13.7226C5.39328 13.4295 4.75022 12.9998 4.20854 12.4581C3.66687 11.9164 3.23719 11.2734 2.94404 10.5657C2.65088 9.85792 2.5 9.09938 2.5 8.33333C2.5 6.78624 3.11458 5.30251 4.20854 4.20854C5.30251 3.11458 6.78624 2.5 8.33333 2.5C9.88043 2.5 11.3642 3.11458 12.4581 4.20854C13.5521 5.30251 14.1667 6.78624 14.1667 8.33333Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
</svg>
</button>
                <button class="gh-burger"></button>
            </div>

            <nav class="gh-head-menu">
                <ul class="nav">
    <li class="nav-home"><a href="https://mytecknet.com/">Home</a></li>
    <li class="nav-blog"><a href="https://mytecknet.com/blog/">Blog</a></li>
    <li class="nav-gaming"><a href="https://mytecknet.com/gaming/">Gaming</a></li>
    <li class="nav-youtube"><a href="https://www.youtube.com/@myTeckNet_Vids">YouTube</a></li>
    <li class="nav-links"><a href="https://mytecknet.com/links/">Links</a></li>
    <li class="nav-about"><a href="https://mytecknet.com/about/">About</a></li>
    
<button class="nav-more-toggle gh-icon-btn" aria-label="More"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor"><path d="M21.333 16c0-1.473 1.194-2.667 2.667-2.667v0c1.473 0 2.667 1.194 2.667 2.667v0c0 1.473-1.194 2.667-2.667 2.667v0c-1.473 0-2.667-1.194-2.667-2.667v0zM13.333 16c0-1.473 1.194-2.667 2.667-2.667v0c1.473 0 2.667 1.194 2.667 2.667v0c0 1.473-1.194 2.667-2.667 2.667v0c-1.473 0-2.667-1.194-2.667-2.667v0zM5.333 16c0-1.473 1.194-2.667 2.667-2.667v0c1.473 0 2.667 1.194 2.667 2.667v0c0 1.473-1.194 2.667-2.667 2.667v0c-1.473 0-2.667-1.194-2.667-2.667v0z"></path></svg><div class="gh-dropdown"><li class="nav-faq"><a href="https://mytecknet.com/faq/">FAQ</a></li></div></button></ul>

            </nav>

            <div class="gh-head-actions">
                    <button class="gh-search gh-icon-btn" aria-label="Search this site" data-ghost-search=""><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M17.5 17.5L12.5 12.5L17.5 17.5ZM14.1667 8.33333C14.1667 9.09938 14.0158 9.85792 13.7226 10.5657C13.4295 11.2734 12.9998 11.9164 12.4581 12.4581C11.9164 12.9998 11.2734 13.4295 10.5657 13.7226C9.85792 14.0158 9.09938 14.1667 8.33333 14.1667C7.56729 14.1667 6.80875 14.0158 6.10101 13.7226C5.39328 13.4295 4.75022 12.9998 4.20854 12.4581C3.66687 11.9164 3.23719 11.2734 2.94404 10.5657C2.65088 9.85792 2.5 9.09938 2.5 8.33333C2.5 6.78624 3.11458 5.30251 4.20854 4.20854C5.30251 3.11458 6.78624 2.5 8.33333 2.5C9.88043 2.5 11.3642 3.11458 12.4581 4.20854C13.5521 5.30251 14.1667 6.78624 14.1667 8.33333Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
</svg>
</button>
                    <div class="gh-head-members">
                                <a class="gh-head-link gh-portal-close" href="https://mytecknet.com/lets-build-a-tak-server/#/portal/signin" data-portal="signin">Sign in</a>
                                <a class="gh-head-btn gh-btn gh-primary-btn gh-portal-close" href="https://mytecknet.com/lets-build-a-tak-server/#/portal/signup" data-portal="signup">Subscribe</a>
                    </div>
            </div>
        </div>
    </header>


    <div class="site-content">
        <!-- Progress Bar -->
<progress class="reading-progress" value="66.7709117207275" max="100" aria-label="Reading progress"></progress>
<!-- End Progress Bar -->

<main class="site-main">


    <article class="post tag-tak tag-guides featured">

        <header class="gh-article-header gh-canvas">
            <h1 class="gh-article-title">Let's Build a TAK Server</h1>
            <div class="post-meta">
                    <div class="post-meta-left">
                                    <a class="post-author-image-link" href="https://mytecknet.com/author/jr/">
                                        <img class="post-author-image lazyload" data-src="https://www.gravatar.com/avatar/420ef2010b66ad6ebd98bf3a161439a7?s=250&amp;r=x&amp;d=mp" src="./Let&#39;s Build a TAK Server_files/420ef2010b66ad6ebd98bf3a161439a7.png" alt="JR">
                                    </a>
                    </div>
                    <div class="post-meta-right">
                        <div class="post-author-name">
                            <a class="post-author-name-link" href="https://mytecknet.com/author/jr/">JR</a>
                        </div>
                        <div class="post-meta-bottom">
                            <div class="post-date">
                                <time datetime="2024-01-07">
                                    Published: Jan 7, 2024 
                                </time>
                            </div>
                        </div>
                        <div class="post-meta-bottom">
                            <div class="post-date">
                                <time datetime="2024-01-07">
                                    Last updated on: Oct 14, 2024 
                                </time>
                            </div>
                            <div class="post-length">58 min read</div>
                        </div>
                    </div>
            </div>
                <figure class="gh-article-image">
        <img class="post-image" srcset="/content/images/size/w400/2023/12/TAK-CIV-MIL-1.png 400w,
                    /content/images/size/w750/2023/12/TAK-CIV-MIL-1.png 750w,
                    /content/images/size/w960/2023/12/TAK-CIV-MIL-1.png 960w,
                    /content/images/size/w1140/2023/12/TAK-CIV-MIL-1.png 1140w,
                    /content/images/size/w1920/2023/12/TAK-CIV-MIL-1.png 1920w" sizes="(min-width: 1200px) 960px, 92vw" src="./Let&#39;s Build a TAK Server_files/TAK-CIV-MIL-1.png" alt="Let&#39;s Build a TAK Server">
            <figcaption><span style="white-space: pre-wrap;">TAK Civ - Mil Logos</span></figcaption>
    </figure>
        </header>

        <div class="gh-content gh-canvas">
            <aside class="gh-sidebar"><div class="gh-toc"><ol class="toc-list "><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#system-overview" class="toc-link node-name--H1 ">System Overview</a><ol class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#requirements" class="toc-link node-name--H2 ">Requirements</a><ol class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#supported-operating-systems" class="toc-link node-name--H3 ">Supported Operating Systems</a></li></ol></li><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#communications-architecture" class="toc-link node-name--H2 ">Communications Architecture</a></li><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#security" class="toc-link node-name--H2 ">Security</a></li></ol></li><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#installing-the-tak-server" class="toc-link node-name--H1 ">Installing the TAK Server</a><ol class="toc-list  is-collapsible"><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#single-server-setup" class="toc-link node-name--H2 ">Single Server Setup</a><ol class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#prerequisites" class="toc-link node-name--H3 ">Prerequisites</a></li><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#installation-instructions" class="toc-link node-name--H3 ">Installation Instructions</a></li></ol></li><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#two-server-setup" class="toc-link node-name--H2 ">Two-Server Setup</a><ol class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#database-server" class="toc-link node-name--H3 ">Database Server</a></li><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#core-server" class="toc-link node-name--H3 ">Core Server</a></li></ol></li><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#post-configuration-tasks" class="toc-link node-name--H2 ">Post-Configuration Tasks</a><ol class="toc-list  is-collapsible"><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#initial-configuration" class="toc-link node-name--H3 ">Initial Configuration</a></li><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#configuring-the-firewall-1" class="toc-link node-name--H3 ">Configuring the Firewall</a></li><li class="toc-list-item is-active-li"><a href="https://mytecknet.com/lets-build-a-tak-server/#the-administrative-dashboard" class="toc-link node-name--H3  is-active-link">The Administrative Dashboard</a></li></ol></li></ol></li><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#managing-users-and-groups" class="toc-link node-name--H1 ">Managing Users and Groups</a><ol class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#soft-certificate-management" class="toc-link node-name--H2 ">Soft Certificate Management</a></li><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#certificate-autoenrollment" class="toc-link node-name--H2 ">Certificate AutoEnrollment</a><ol class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#enrolling-clients" class="toc-link node-name--H3 ">Enrolling clients</a></li></ol></li><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#revoking-certificates" class="toc-link node-name--H2 ">Revoking Certificates</a><ol class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#client-certificate-ui" class="toc-link node-name--H3 ">Client Certificate UI</a></li><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#certificate-revocation-list" class="toc-link node-name--H3 ">Certificate Revocation List</a></li></ol></li></ol></li><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#updating-the-tak-server" class="toc-link node-name--H1 ">Updating the TAK Server</a></li><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#connecting-tak-clients" class="toc-link node-name--H1 ">Connecting TAK Clients</a><ol class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#windows-tak-wintak" class="toc-link node-name--H2 ">Windows TAK (WinTAK)</a></li><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#android-tak-atak" class="toc-link node-name--H2 ">Android TAK (ATAK)</a></li><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#ios-tak-itak" class="toc-link node-name--H2 ">iOS TAK (iTAK)</a></li><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#tak-tracker" class="toc-link node-name--H2 ">TAK Tracker</a><ol class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#atak-tracker" class="toc-link node-name--H3 ">ATAK-Tracker</a></li><li class="toc-list-item"><a href="https://mytecknet.com/lets-build-a-tak-server/#itak-tracker" class="toc-link node-name--H3 ">iTAK-Tracker</a></li></ol></li></ol></li></ol></div></aside> 
            <div class="kg-card kg-toggle-card" data-kg-toggle-state="close">
            <div class="kg-toggle-heading">
                <h4 class="kg-toggle-heading-text"><span style="white-space: pre-wrap;">Change Log</span></h4>
                <button class="kg-toggle-card-icon" aria-label="Expand toggle to read content">
                    <svg id="Regular" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path class="cls-1" d="M23.25,7.311,12.53,18.03a.749.749,0,0,1-1.06,0L.75,7.311"></path>
                    </svg>
                </button>
            </div>
            <div class="kg-toggle-content"><p><code spellcheck="false" style="white-space: pre-wrap;"><span>12Jan2024</span></code><br><span style="white-space: pre-wrap;">- Updated the </span><a href="https://mytecknet.com/lets-build-a-tak-server/#updating-the-tak-server"><span style="white-space: pre-wrap;">Updating the TAK Server</span></a><span style="white-space: pre-wrap;"> section with descriptions.</span><br><code spellcheck="false" style="white-space: pre-wrap;"><span>15Jan2024</span></code><br><span style="white-space: pre-wrap;">- Added Java instructions for Ubuntu/Raspberry Pi OS for both single and two-server deployments.</span><br><span style="white-space: pre-wrap;">- Added instructions for optionally </span><a href="https://mytecknet.com/lets-build-a-tak-server/#creating-the-server-certificate" rel="noreferrer"><span style="white-space: pre-wrap;">changing the takserver commonName</span></a><span style="white-space: pre-wrap;"> to use the IP address instead.</span><br><code spellcheck="false" style="white-space: pre-wrap;"><span>17Jan2024</span></code><br><span style="white-space: pre-wrap;">- Updated </span><a href="https://mytecknet.com/lets-build-a-tak-server/#certificate-autoenrollment" rel="noreferrer"><span style="white-space: pre-wrap;">Certificate Autoenrollment</span></a><span style="white-space: pre-wrap;"> and </span><a href="https://mytecknet.com/lets-build-a-tak-server/#revoking-certificates" rel="noreferrer"><span style="white-space: pre-wrap;">Revoking Certificate</span></a><span style="white-space: pre-wrap;"> sections.</span><br><code spellcheck="false" style="white-space: pre-wrap;"><span>23Sept2024</span></code><br><span style="white-space: pre-wrap;">- Corrected command errors under </span><a href="https://mytecknet.com/lets-build-a-tak-server/#revoking-certificates" rel="noreferrer"><span style="white-space: pre-wrap;">Revoking Certificates</span></a><span style="white-space: pre-wrap;"> and CRLs</span></p></div>
        </div><div class="kg-card kg-callout-card kg-callout-card-green"><div class="kg-callout-emoji">👀</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Attention</strong></b>: Many thanks to <a href="https://www.dropbear-solutions.fr/?ref=mytecknet.com">Drop Bear Solutions</a> for doing a French translation! This guide can be found <a href="https://www.dropbear-solutions.fr/post/construisons-un-serveur-tak-version-5-0?ref=mytecknet.com" rel="noreferrer">here</a>.</div></div><p>This guide aims to build and familiarize ourselves with the installation and configuration process of a TAK Server.  This will cover the binaries and containers provided by the TAK Product Center (TPC) at <a href="https://tak.gov/?ref=mytecknet.com" rel="noreferrer">TAK.gov</a>.  Depending on the requirements, you can install the TAK Server using the RPM package manager (rpm), Debian software package (deb), or a <a href="https://www.docker.com/?ref=mytecknet.com">Docker container</a>.  The overall difficulty of this task should be simple if you are familiar with the Linux environment; however, it may be challenging for those without.  <strong>If this is your first time using Linux, take the time to read through the steps beforehand.</strong>  This will assist with understanding the process; as navigating the command line can be challenging if you are not mindful of what directory and session you are in.  This can lead to some command line confusion if you are not careful.<br><br><strong>Do not worry, we will get there together!</strong></p><p>In general, the TAK client does not require a server if your clients are all within the same subnet.  The reason for this is that TAK clients use multicast to discover clients within the subnet.  Think of your home network behind your router from your internet service provider.  All clients within that network can see and share information on the network.  To communicate outside of that network, they go through the router to connect them to external networks.  It is a bit more detailed than that; nevertheless, it paints the picture.  <em>The TAK Server acts as the router to connect, unlike networks.</em><br><br><strong>Let's get started!</strong></p><div class="kg-card kg-callout-card kg-callout-card-white"><div class="kg-callout-emoji">💩</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">DISCLAIMER</strong></b>: This guide is meant to <i><em class="italic" style="white-space: pre-wrap;">complement</em></i>, <b><strong style="white-space: pre-wrap;">not</strong></b> replace the <i><em class="italic" style="white-space: pre-wrap;">TAK Server Configuration Guide</em></i> by <a href="https://tak.gov/?ref=mytecknet.com" rel="noreferrer">TAK.gov</a>.</div></div><h1 id="system-overview">System Overview</h1><h2 id="requirements">Requirements</h2><p>The TAK Server requires very few resources to begin with.  It is compact enough to fit on a 32 GiB, <a href="https://www.raspberrypi.com/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-8gb&amp;ref=mytecknet.com">Raspberry Pi 4 with 8GB RAM</a>.</p><ul><li>Min. 4 Cores, 8GB RAM, 40GB Storage</li><li><a href="https://mytecknet.com/lets-build-a-tak-server/#installing-java-openjdk" rel="noreferrer">Java OpenJDK</a><ul><li>11 (TAK Server 4.9 and below)</li><li>17 (TAK Server 4.10 and up)</li></ul></li><li><a href="https://mytecknet.com/lets-build-a-tak-server/#installing-postgresql-and-postgis" rel="noreferrer">PostgreSQL</a><ul><li>10 (TAK Server 4.7 and below)</li><li>15 (TAK Server 4.8 and up)</li></ul></li></ul><h3 id="supported-operating-systems">Supported Operating Systems</h3><p>The TAK Server can be installed on rpm-based or deb-based operating systems.  The most common OS used:</p><ul><li>CentOS Linux 7 (<strong>not</strong> CentOS 8 Stream) [<a href="https://www.redhat.com/en/topics/linux/centos-linux-eol?ref=mytecknet.com">EOL: June 2024</a>]</li><li>Rocky Linux 8 (Replacement for CentOS 7) [<em>Preferred for hassle-free installation</em>]</li><li>Red Hat Enterprise Linux (RHEL) 8 [<a href="https://www.redhat.com/en/blog/end-maintenance-red-hat-enterprise-linux-7-almost-here?ref=mytecknet.com">RHEL 7 EOL: June 2024</a>]</li><li>Ubuntu 22</li><li>Raspberry Pi OS (64bit)</li></ul><div class="kg-card kg-callout-card kg-callout-card-grey"><div class="kg-callout-emoji">📓</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Note</strong></b>: Based on the end-of-life timeline for CentOS and RHEL 7, this OS will not be covered within this guide.</div></div><h2 id="communications-architecture">Communications Architecture</h2><p>A typical TAK Server architecture includes clients connected to a locally hosted TAK Server that is connected to other TAK Servers.  Optionally, TAK clients can connect to multiple TAK Servers as well.  Not depicted is the ability for the TAK Server to inject external data as Cursor-on-Target (CoT) to feed connected clients.  When a TAK Server is not in use, TAK Clients can directly ingest data as well in the CoT format.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/Untitled-Diagram.drawio--3-.png" class="kg-image" alt="" loading="lazy" width="741" height="517" srcset="https://mytecknet.com/content/images/size/w600/2023/12/Untitled-Diagram.drawio--3-.png 600w, https://mytecknet.com/content/images/2023/12/Untitled-Diagram.drawio--3-.png 741w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Simple TAK Server architecture</span></figcaption></figure><h2 id="security">Security</h2><p>A TAK Server's security is dependent on the security of the underlying OS and the TAK Server configuration.  To ensure a secure environment the topics covered within this guide will cover how to properly install, configure, and secure the TAK Server using best practices.  Additional security and best practices can be found <a href="https://mytecknet.com/tak-security-best-practices/">here</a>.</p><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://mytecknet.com/tak-security-best-practices/"><div class="kg-bookmark-content"><div class="kg-bookmark-title">TAK Security Best Practices</div><div class="kg-bookmark-description">One of the first steps you should take after building your TAK environment is to secure your TAK Server and its clients. This is not a definitive guide on securing your environment but serves as a reference and starting point if you’ve just started.</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="./Let&#39;s Build a TAK Server_files/LogoOnly_20230301_01.png" alt=""><span class="kg-bookmark-author">myTeckNet</span><span class="kg-bookmark-publisher">JR</span></div></div><div class="kg-bookmark-thumbnail"><img src="./Let&#39;s Build a TAK Server_files/SecureTAK.png" alt="" onerror="this.style.display = &#39;none&#39;"></div></a></figure><h1 id="installing-the-tak-server">Installing the TAK Server</h1><div class="kg-card kg-callout-card kg-callout-card-green"><div class="kg-callout-emoji">👀</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Attention</strong></b>: The instructions below were executed on a fresh OS with no security profile applied. Consult your local security manager on securing IT systems.<br><br>Examples include the <a href="https://www.cisecurity.org/cis-benchmarks?ref=mytecknet.com">Center for Internet Security (CIS) - Benchmarks</a> or <a href="https://public.cyber.mil/stigs/downloads/?ref=mytecknet.com">Defense Information Systems Agency (DISA) - Security Technical Implementation Guide (STIG)</a></div></div><div class="kg-card kg-callout-card kg-callout-card-grey"><div class="kg-callout-emoji">📓</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Note</strong></b>: For the write-up of this guide multiple TAK Servers were deployed. Primarily the steps were executed on <code spellcheck="false" style="white-space: pre-wrap;">takserver-rocky8</code>; however, <code spellcheck="false" style="white-space: pre-wrap;">takserver-el8</code> and <code spellcheck="false" style="white-space: pre-wrap;">takserver_deb12</code> where used to capture the additional steps required for building on the supported OS. Reference the screenshots provided to determine which OS was used for the commands.</div></div><p>This section will cover the installation of a single and two-server deployment.  The single server deployment is the most common and involves both the core and database servers to be installed on a single host.  In a two-server deployment, the core and database are on dedicated servers for resources.</p>
<p>If you are deploying a two-server environment, click <a href="https://mytecknet.com/lets-build-a-tak-server/#two-server-setup">here</a>.</p>
<h2 id="single-server-setup">Single Server Setup</h2><h3 id="prerequisites">Prerequisites</h3><p>Starting with a fresh installation of a <a href="https://mytecknet.com/lets-build-a-tak-server/#supported-operating-systems" rel="noreferrer">supported OS</a>, we will need to modify the Linux pluggable authentication module limits set within the <code>/etc/security/limits.conf</code>.  Within this file, we need to increase the number of file handles allowed within the per-user limit for open files to support Java threads.  We will configure the soft (user override) and hard (root override) limits within this file.  We can edit the file using a command line text editor (<a href="https://www.redhat.com/sysadmin/introduction-vi-editor?ref=mytecknet.com">vi</a>/<a href="https://vimhelp.org/?ref=mytecknet.com" rel="noreferrer">vim</a>, or <a href="https://www.nano-editor.org/dist/latest/nano.html?ref=mytecknet.com">nano</a>) or a one-line command string.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Increase JVM threads</span>
<span class="token comment"># Each 'tab' is six spaces when typing manually</span>
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">"*      soft      nofile      32768<span class="token entity">\n</span>*      hard      nofile      32768<span class="token entity">\n</span>"</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> <span class="token parameter variable">--append</span> /etc/security/limits.conf</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><p>To edit using <em>vi</em> or <em>vim</em> type: <code>sudo vi /etc/security/limits.conf</code> or to use <em>nano</em> type: <code>sudo nano /etc/security/limits.conf</code>.  Some Linux distributions do not come with <em>Nano </em>preinstalled and may need to be installed before executing the command.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Tail to view the end contents of a file</span>
<span class="token function">sudo</span> <span class="token function">tail</span> <span class="token parameter variable">-n</span> <span class="token number">15</span> /etc/security/limits.conf</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><p><strong>Rocky Linux/RHEL 8</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install nano in Rocky and RHEL 8</span>
<span class="token function">sudo</span> dnf <span class="token function">install</span> <span class="token function">nano</span> <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-6.png" class="kg-image" alt="" loading="lazy" width="1101" height="671" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-6.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-6.png 1000w, https://mytecknet.com/content/images/2023/12/image-6.png 1101w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Installation of Nano in Rocky Linux/RHEL 8</span></figcaption></figure><p><strong>Ubuntu/Raspberry Pi OS</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install nano in Ubuntu or Raspberry Pi OS</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token function">nano</span> <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><p>When using the <code>sudo</code> command you will be prompted to enter your password to elevate privileges.  Once the editor has opened, scroll down to the end of the <code>/etc/security/limits.conf</code> file and insert the following lines; insert a <code>tab</code> between each value:<br><br><em>*      soft      nofile      32768<br>*      hard     nofile      32768</em><br><br>Once complete, exit the editor ensuring you save your changes.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image.png" class="kg-image" alt="" loading="lazy" width="1108" height="289" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image.png 1000w, https://mytecknet.com/content/images/2023/12/image.png 1108w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Expected outcome of modifying the limits.conf file</span></figcaption></figure><p>To validate the change, <code>tail</code> the <code>limits.conf</code> file.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-1.png" class="kg-image" alt="" loading="lazy" width="1100" height="331" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-1.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-1.png 1000w, https://mytecknet.com/content/images/2023/12/image-1.png 1100w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Example output for verification</span></figcaption></figure><h4 id="installing-extra-packages-for-enterprise-linux">Installing Extra Packages for Enterprise Linux</h4><p>Next, we must install <a href="https://docs.fedoraproject.org/en-US/epel/?ref=mytecknet.com" rel="noreferrer">Extra Packages for Enterprise Linux (EPEL)</a> to provide the extra repositories for dependencies required for <a href="https://mytecknet.com/lets-build-a-tak-server/#installing-postgresql-and-postgis" rel="noreferrer">PostgreSQL and PostGIS</a>.</p><p><strong>Rocky Linux 8</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Enable Powertools</span>
<span class="token function">sudo</span> dnf config-manager --set-enabled powertools

<span class="token comment"># Install EPEL Rocky Linux 8</span>
<span class="token function">sudo</span> dnf <span class="token function">install</span> epel-release <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-2.png" class="kg-image" alt="" loading="lazy" width="1102" height="886" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-2.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-2.png 1000w, https://mytecknet.com/content/images/2023/12/image-2.png 1102w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Installing EPEL for Rocky Linux 8</span></figcaption></figure><p><strong>RHEL 8</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Enable Codeready Builder</span>
<span class="token function">sudo</span> subscription-manager repos <span class="token parameter variable">--enable</span> codeready-builder-for-rhel-8-<span class="token variable"><span class="token variable">$(</span>arch<span class="token variable">)</span></span>-rpms

<span class="token comment"># Install EPEL RHEL 8</span>
<span class="token function">sudo</span> <span class="token function">rpm</span> <span class="token parameter variable">--import</span> https://dl.fedoraproject.org/pub/epel/RPM-GPG-KEY-EPEL-8
<span class="token function">sudo</span> dnf <span class="token function">install</span> https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-32.png" class="kg-image" alt="" loading="lazy" width="1100" height="561" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-32.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-32.png 1000w, https://mytecknet.com/content/images/2023/12/image-32.png 1100w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Installing EPEL on RHEL 8</span></figcaption></figure><h4 id="installing-postgresql-and-postgis">Installing PostgreSQL and PostGIS</h4><p>After completing the installation of <a href="https://mytecknet.com/lets-build-a-tak-server/#installing-extra-packages-for-enterprise-linux" rel="noreferrer">EPEL</a>, we need to add the PostgreSQL and PostGIS repositories as well.  This will install the appropriate version outlined in the <a href="https://mytecknet.com/lets-build-a-tak-server/#requirements" rel="noreferrer">requirements</a>.</p><div class="kg-card kg-callout-card kg-callout-card-green"><div class="kg-callout-emoji">👀</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Attention</strong></b>: PostgreSQL RPM repository GPG keys have been updated as of 03 Jan 2024. More information can be found <a href="https://yum.postgresql.org/news/pgdg-rpm-repo-gpg-key-update/?ref=mytecknet.com">here</a>.</div></div><p><strong>Rocky Linux/RHEL 8</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install PostgreSQL/PostGIS 15 for Rocky Linux/RHEL 8</span>
<span class="token function">sudo</span> <span class="token function">rpm</span> <span class="token parameter variable">--import</span> https://download.postgresql.org/pub/repos/yum/keys/PGDG-RPM-GPG-KEY-RHEL
<span class="token function">sudo</span> dnf <span class="token function">install</span> https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> dnf <span class="token parameter variable">-qy</span> module disable postgresql</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-3.png" class="kg-image" alt="" loading="lazy" width="1104" height="896" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-3.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-3.png 1000w, https://mytecknet.com/content/images/2023/12/image-3.png 1104w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Installing PostgreSQL and PostGIS in Rocky Linux 8</span></figcaption></figure><p><strong>Ubuntu/Raspberry Pi OS</strong></p><div class="kg-card kg-callout-card kg-callout-card-grey"><div class="kg-callout-emoji">📓</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Note</strong></b>: The use of <code spellcheck="false" style="white-space: pre-wrap;">apt-key</code> is being depreciated and<i><em class="italic" style="white-space: pre-wrap;"> will last be available in </em></i><i><b><strong class="italic" style="white-space: pre-wrap;">Debian 11</strong></b></i><i><em class="italic" style="white-space: pre-wrap;"> and </em></i><i><b><strong class="italic" style="white-space: pre-wrap;">Ubuntu 22.04</strong></b></i>. Both methods of adding the keyring will be shown to support those with legacy versions.</div></div><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install PostgreSQL/PostGIS 15 for Ubuntu/Raspberry Pi OS</span>
<span class="token function">sudo</span> <span class="token function">sh</span> <span class="token parameter variable">-c</span> <span class="token string">'echo "deb https://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" &gt; /etc/apt/sources.list.d/pgdg.list'</span>

<span class="token function">wget</span> -O- https://www.postgresql.org/media/keys/ACCC4CF8.asc <span class="token operator">|</span> gpg <span class="token parameter variable">--dearmor</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/trusted.gpg.d/postgresql.org.gpg <span class="token operator">&gt;</span> /dev/null

<span class="token comment"># LEGACY Ubuntu/Raspberry Pi OS </span>
<span class="token function">wget</span> <span class="token parameter variable">--quiet</span> <span class="token parameter variable">-O</span> - https://www.postgresql.org/media/keys/ACCC4CF8.asc <span class="token operator">|</span> <span class="token function">sudo</span> apt-key <span class="token function">add</span> -</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-34.png" class="kg-image" alt="" loading="lazy" width="1099" height="174" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-34.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-34.png 1000w, https://mytecknet.com/content/images/2023/12/image-34.png 1099w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Installing PostgreSQL and PostGIS within Ubuntu/Raspberry Pi OS with an error message</span></figcaption></figure><p>👀 <strong>Oops</strong>, seems we got an error.  Since I had installed using minimum requirements many dependencies were not installed.  To resolve this we simply need to install GnuPG, GnuPG2, or GnuPG1.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install the missing binary</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> gnupg <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-37.png" class="kg-image" alt="" loading="lazy" width="1099" height="272" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-37.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-37.png 1000w, https://mytecknet.com/content/images/2024/01/image-37.png 1099w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Successful installation of PostgreSQL and PostGIS within Ubuntu/Raspberry Pi OS</span></figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-35.png" class="kg-image" alt="" loading="lazy" width="1097" height="116" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-35.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-35.png 1000w, https://mytecknet.com/content/images/2023/12/image-35.png 1097w" sizes="(min-width: 720px) 720px"><figcaption><b><strong style="white-space: pre-wrap;">LEGACY</strong></b><span style="white-space: pre-wrap;"> - Successful installation of PostgreSQL and PostGIS within Ubuntu/Raspberry Pi OS</span></figcaption></figure><p>Finally, once we have completed all these steps, we need to update our repository database with the recent changes.</p><p><strong>Rocky Linux/RHEL 8</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Update Rocky Linux/RHEL 8</span>
<span class="token function">sudo</span> dnf update <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-4.png" class="kg-image" alt="" loading="lazy" width="1099" height="573" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-4.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-4.png 1000w, https://mytecknet.com/content/images/2023/12/image-4.png 1099w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Performing a system update in Rocky Linux 8</span></figcaption></figure><p><strong>Ubuntu/Raspberry Pi OS</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Update Ubuntu/Raspberry Pi OS</span>
<span class="token function">sudo</span> <span class="token function">apt</span> update <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-65.png" class="kg-image" alt="" loading="lazy" width="1105" height="290" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-65.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-65.png 1000w, https://mytecknet.com/content/images/2023/12/image-65.png 1105w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Performing a system update on Ubuntu/Raspberry Pi OS</span></figcaption></figure><h4 id="installing-java-openjdk">Installing Java OpenJDK</h4><p>Finally, install the appropriate Java OpenJDK version for the appropriate version outlined in the <a href="https://mytecknet.com/lets-build-a-tak-server/#requirements" rel="noreferrer">requirements</a>.</p><p><strong>Rocky Linux/RHEL 8</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install Java 17 OpenJDK Devel</span>
<span class="token function">sudo</span> dnf <span class="token function">install</span> java-17-openjdk-devel <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-5.png" class="kg-image" alt="" loading="lazy" width="1104" height="800" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-5.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-5.png 1000w, https://mytecknet.com/content/images/2023/12/image-5.png 1104w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Installing Java 17 in Rocky Linux/RHEL 8</span></figcaption></figure><p><strong>Ubuntu/Raspberry Pi OS</strong></p><p>In some distributions, Java comes preinstalled.  You can check if your distribution applies by executing the <code>java --version</code> command.  If you get <code>command not found</code> this means you will need to install <code>OpenJDK-17-jre</code>.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-33.png" class="kg-image" alt="" loading="lazy" width="1105" height="97" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-33.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-33.png 1000w, https://mytecknet.com/content/images/2024/01/image-33.png 1105w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Verifying Java OpenJDK Version</span></figcaption></figure><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install Java 17 for Ubuntu/Raspberry Pi OS</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> openjdk-17-jre</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-34(1).png" class="kg-image" alt="" loading="lazy" width="1102" height="92" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-34.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-34.png 1000w, https://mytecknet.com/content/images/2024/01/image-34.png 1102w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Installing Java OpenJDK</span></figcaption></figure><h3 id="installation-instructions">Installation Instructions</h3><p>This section will cover installing the TAK Server using the installation files (.rpm or .deb) provided by the <a href="https://tak.gov/products/tak-server?ref=mytecknet.com" rel="noreferrer">TAK.gov</a> website.  Due to the continuous deployment of the TAK Server and its releases, this guide assumes you will install the latest release.</p><div class="kg-card kg-callout-card kg-callout-card-green"><div class="kg-callout-emoji">👀</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Attention</strong></b>: The following installation steps have been written based on the <a href="https://tak.gov/products/tak-server?ref=mytecknet.com" rel="noreferrer">5.0 TAK Server</a> released in December 2023.</div></div><p><strong>Copying files from Windows/Mac to Linux</strong></p><p>For this task, we will use secure copy (SCP) which is built into the secure shell ecosystem in most modern OS.  To use this command, open a terminal, command prompt, or PowerShell window.  Navigate to the directory where the TAK Server installation binaries are located.</p><div class="kg-card kg-callout-card kg-callout-card-grey"><div class="kg-callout-emoji">📓</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Note</strong></b>: If you are using Windows open the File Explorer and navigate to the directory of the installation binaries. Hold the Shift key and right-click within the explorer. Select from the options <code spellcheck="false" style="white-space: pre-wrap;">Open in Terminal</code>, <code spellcheck="false" style="white-space: pre-wrap;">Open PowerShell window here</code>, or if you have Windows Subsystem for Linux (SWL), select <code spellcheck="false" style="white-space: pre-wrap;">Open Linux shell here</code>. This will open a terminal window in the desired directory.</div></div><p>The basic syntax for <code>scp</code> is <code>scp options &lt;sourceFile&gt; &lt;username&gt;@&lt;dstServer&gt;</code>.  Since we are copying to Linux we need to specify a target directory within the Linux file structure.  Typically this is <code>~/</code> which is the Linux user's home directory.</p><div class="kg-card kg-callout-card kg-callout-card-green"><div class="kg-callout-emoji">👀</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Attention</strong></b>: If you are on MacOS and you get the error: <code spellcheck="false" style="white-space: pre-wrap;">zsh: no matches found:</code> when using * in the <code spellcheck="false" style="white-space: pre-wrap;">scp</code> command we need to escape <code spellcheck="false" style="white-space: pre-wrap;">\</code> the wildcard.<br><br><b><strong style="white-space: pre-wrap;">EXAMPLE:</strong></b><br><code spellcheck="false" style="white-space: pre-wrap;">scp takserver-5.\*.rpm takadmin@192.168.178.188:~/</code></div></div><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Copy files to Linux</span>
<span class="token function">scp</span> takserver-5.*.rpm <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span>@<span class="token operator">&lt;</span>takserver<span class="token operator">&gt;</span>:~/

<span class="token comment"># EXAMPLE</span>
<span class="token comment"># scp takserver-5.*.rpm takadmin@192.168.178.188:~/</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-7.png" class="kg-image" alt="" loading="lazy" width="1106" height="329" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-7.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-7.png 1000w, https://mytecknet.com/content/images/2023/12/image-7.png 1106w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Example SCP Output from Windows to Linux</span></figcaption></figure><p>If preferred a graphical user interface to copy from Windows to Linux, <a href="https://winscp.net/eng/index.php?ref=mytecknet.com" rel="noreferrer">WinSCP</a> is a popular application for this task.  For additional information on copying from <a href="https://appleinsider.com/inside/macos/tips/how-to-use-scp-to-transfer-files-in-the-macos-terminal?ref=mytecknet.com" rel="noreferrer">MacOS to Linux</a> can be found here.</p><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://winscp.net/eng/index.php?ref=mytecknet.com"><div class="kg-bookmark-content"><div class="kg-bookmark-title">WinSCP</div><div class="kg-bookmark-description">WinSCP is a popular free SFTP and FTP client for Windows, a powerful file manager that will improve your productivity. It supports also local-local mode and FTPS, S3, SCP and WebDAV protocols. Power users can automate WinSCP using .NET assembly.</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="./Let&#39;s Build a TAK Server_files/favicon.ico" alt=""><span class="kg-bookmark-author">WinSCP - Free SFTP and FTP client</span></div></div><div class="kg-bookmark-thumbnail"><img src="./Let&#39;s Build a TAK Server_files/logo@240.jpg" alt="" onerror="this.style.display = &#39;none&#39;"></div></a></figure><p>After the installation files have been copied to the target host we can begin the installation procedures.</p><h4 id="rocky-linuxrhel-8"><strong>Rocky Linux/RHEL 8</strong></h4><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install TAK Server 5.x in Rocky Linux/RHEL 8</span>
<span class="token function">sudo</span> dnf <span class="token function">install</span> takserver-5.*.rpm <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-8.png" class="kg-image" alt="" loading="lazy" width="1101" height="670" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-8.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-8.png 1000w, https://mytecknet.com/content/images/2023/12/image-8.png 1101w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Installing TAK Server 5.x in Rocky Linux/RHEL 8</span></figcaption></figure><p><strong>Security-Enhanced Linux (SELinux)</strong></p><p>SELinux stands for Security-Enhanced Linux and is a security feature developed initially by the National Security Agency (NSA) that provides a technical control for supporting access security and mandatory access controls. In some installations of Linux SELinux is enabled to enforce security configurations. To determine if SELinux is enforcing we will use the&nbsp;<em><code>getenforce</code></em>&nbsp;command to get the SELinux status.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Check SELinux status</span>
getenforce</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><p><strong>What to do if SELinux is Enforcing?</strong>&nbsp;If <em>SELinux</em> is enforced we need to apply the <em>SELinux</em> profile for the TAK Server by installing an extra package before applying the <em>SELinux</em> profile.</p><p><strong>Rocky Linux 8</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install checkpolicy</span>
<span class="token function">sudo</span> dnf <span class="token function">install</span> checkpolicy</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-9.png" class="kg-image" alt="" loading="lazy" width="1102" height="725" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-9.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-9.png 1000w, https://mytecknet.com/content/images/2023/12/image-9.png 1102w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Installing the checkpolicy package in Rocky Linux 8</span></figcaption></figure><p><strong>Rocky Linux/RHEL 8</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Apply the TAK Server SELinux Profile</span>
 <span class="token builtin class-name">cd</span> /opt/tak <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> ./apply-selinux.sh</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-10.png" class="kg-image" alt="" loading="lazy" width="1091" height="98" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-10.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-10.png 1000w, https://mytecknet.com/content/images/2023/12/image-10.png 1091w" sizes="(min-width: 720px) 720px"></figure><h4 id="ubunturaspberry-pi-os"><strong>Ubuntu/Raspberry Pi OS</strong></h4><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install TAK Server 5.x in Ubuntu/Raspberry Pi OS</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> ./takserver_5.0-RELEASE29_all.deb <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-36.png" class="kg-image" alt="" loading="lazy" width="1104" height="573" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-36.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-36.png 1000w, https://mytecknet.com/content/images/2023/12/image-36.png 1104w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Installation of TAK Server 5.x on Ubuntu/Raspberry Pi OS</span></figcaption></figure><p>Once we complete the installation of our single server, can move on to the <a href="https://mytecknet.com/lets-build-a-tak-server/#post-configuration-tasks" rel="noreferrer">post-configuration tasks</a>.</p><h2 id="two-server-setup">Two-Server Setup</h2><p>The two-server setup involves creating two servers; one that will act as the <strong>core server</strong> to provide the API and functions to our clients, the other is the <strong>database server</strong> that will store our contents.</p><h3 id="database-server">Database Server</h3><p>Starting with a fresh installation of a <a href="https://mytecknet.com/lets-build-a-tak-server/#supported-operating-systems" rel="noreferrer">supported OS</a>, we will cover how to install EPEL, PostgreSQL, PostGIS, and Java for our database TAK Server requirements.  Additionally, we will need to configure our firewall to allow inbound communications from our core server to the database.</p><h4 id="installing-extra-packages-for-enterprise-linux-1">Installing Extra Packages for Enterprise Linux</h4><p>First, we must install <a href="https://docs.fedoraproject.org/en-US/epel/?ref=mytecknet.com" rel="noreferrer">Extra Packages for Enterprise Linux (EPEL)</a> to provide the extra repositories for dependencies required for <a href="https://mytecknet.com/lets-build-a-tak-server/#installing-postgresql-and-postgis" rel="noreferrer">PostgreSQL and PostGIS</a>.</p><p><strong>Rocky Linux 8</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Enable Powertools</span>
<span class="token function">sudo</span> dnf config-manager --set-enabled powertools

<span class="token comment"># Install EPEL Rocky Linux 8</span>
<span class="token function">sudo</span> dnf <span class="token function">install</span> epel-release <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image(1).png" class="kg-image" alt="" loading="lazy" width="1115" height="579" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image.png 1000w, https://mytecknet.com/content/images/2024/01/image.png 1115w" sizes="(min-width: 720px) 720px"></figure><p><strong>RHEL 8</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Enable Codeready Builder</span>
<span class="token function">sudo</span> subscription-manager repos <span class="token parameter variable">--enable</span> codeready-builder-for-rhel-8-<span class="token variable"><span class="token variable">$(</span>arch<span class="token variable">)</span></span>-rpms

<span class="token comment"># Install EPEL RHEL 8</span>
<span class="token function">sudo</span> <span class="token function">rpm</span> <span class="token parameter variable">--import</span> https://dl.fedoraproject.org/pub/epel/RPM-GPG-KEY-EPEL-8
<span class="token function">sudo</span> dnf <span class="token function">install</span> https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-32.png" class="kg-image" alt="" loading="lazy" width="1100" height="561" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-32.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-32.png 1000w, https://mytecknet.com/content/images/2023/12/image-32.png 1100w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Installing EPEL on RHEL 8</span></figcaption></figure><h4 id="installing-postgresql-and-postgis-1">Installing PostgreSQL and PostGIS</h4><p>After completing the installation of <a href="https://mytecknet.com/lets-build-a-tak-server/#installing-extra-packages-for-enterprise-linux" rel="noreferrer">EPEL</a>, we need to add the PostgreSQL and PostGIS repositories as well.  This will install the appropriate version outlined in the <a href="https://mytecknet.com/lets-build-a-tak-server/#requirements" rel="noreferrer">requirements</a>.</p><p><strong>Rocky Linux/RHEL 8</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install PostgreSQL/PostGIS 15 for Rocky Linux/RHEL 8</span>
<span class="token function">sudo</span> <span class="token function">rpm</span> <span class="token parameter variable">--import</span> https://download.postgresql.org/pub/repos/yum/RPM-GPG-KEY-PGDG-15
<span class="token function">sudo</span> dnf <span class="token function">install</span> https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> dnf <span class="token parameter variable">-qy</span> module disable postgresql</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-1(1).png" class="kg-image" alt="" loading="lazy" width="1115" height="790" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-1.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-1.png 1000w, https://mytecknet.com/content/images/2024/01/image-1.png 1115w" sizes="(min-width: 720px) 720px"></figure><p><strong>Ubuntu/Raspberry Pi OS</strong></p><div class="kg-card kg-callout-card kg-callout-card-grey"><div class="kg-callout-emoji">📓</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Note</strong></b>: The use of <code spellcheck="false" style="white-space: pre-wrap;">apt-key</code> is being depreciated and<i><em class="italic" style="white-space: pre-wrap;"> will last be available in </em></i><i><b><strong class="italic" style="white-space: pre-wrap;">Debian 11</strong></b></i><i><em class="italic" style="white-space: pre-wrap;"> and </em></i><i><b><strong class="italic" style="white-space: pre-wrap;">Ubuntu 22.04</strong></b></i>. Both methods of adding the keyring will be shown to support those with legacy versions.</div></div><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install PostgreSQL/PostGIS 15 for Ubuntu/Raspberry Pi OS</span>
<span class="token function">sudo</span> <span class="token function">sh</span> <span class="token parameter variable">-c</span> <span class="token string">'echo "deb https://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" &gt; /etc/apt/sources.list.d/pgdg.list'</span>

<span class="token function">wget</span> -O- https://www.postgresql.org/media/keys/ACCC4CF8.asc <span class="token operator">|</span> gpg <span class="token parameter variable">--dearmor</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/trusted.gpg.d/postgresql.org.gpg <span class="token operator">&gt;</span> /dev/null

<span class="token comment"># LEGACY Ubuntu/Raspberry Pi OS </span>
<span class="token function">wget</span> <span class="token parameter variable">--quiet</span> <span class="token parameter variable">-O</span> - https://www.postgresql.org/media/keys/ACCC4CF8.asc <span class="token operator">|</span> <span class="token function">sudo</span> apt-key <span class="token function">add</span> -</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-34.png" class="kg-image" alt="" loading="lazy" width="1099" height="174" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-34.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-34.png 1000w, https://mytecknet.com/content/images/2023/12/image-34.png 1099w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Installing PostgreSQL and PostGIS within Ubuntu/Raspberry Pi OS with an error message</span></figcaption></figure><p>👀 <strong>Oops</strong>, seems we got an error.  Since I had installed using minimum requirements many dependencies were not installed.  To resolve this we simply need to install GnuPG, GnuPG2, or GnuPG1.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install the missing binary</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> gnupg <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-37.png" class="kg-image" alt="" loading="lazy" width="1099" height="272" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-37.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-37.png 1000w, https://mytecknet.com/content/images/2024/01/image-37.png 1099w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Successful installation of PostgreSQL and PostGIS within Ubuntu/Raspberry Pi OS</span></figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-35.png" class="kg-image" alt="" loading="lazy" width="1097" height="116" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-35.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-35.png 1000w, https://mytecknet.com/content/images/2023/12/image-35.png 1097w" sizes="(min-width: 720px) 720px"><figcaption><b><strong style="white-space: pre-wrap;">LEGACY</strong></b><span style="white-space: pre-wrap;"> - Successful installation of PostgreSQL and PostGIS within Ubuntu/Raspberry Pi OS</span></figcaption></figure><p>Finally, once we have completed all these steps, we need to update our repository database with the recent changes.</p><p><strong>Rocky Linux/RHEL 8</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Update Rocky Linux/RHEL 8</span>
<span class="token function">sudo</span> dnf update <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-2(1).png" class="kg-image" alt="" loading="lazy" width="1115" height="598" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-2.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-2.png 1000w, https://mytecknet.com/content/images/2024/01/image-2.png 1115w" sizes="(min-width: 720px) 720px"></figure><p><strong>Ubuntu/Raspberry Pi OS</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Update Ubuntu/Raspberry Pi OS</span>
<span class="token function">sudo</span> <span class="token function">apt</span> update <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-65.png" class="kg-image" alt="" loading="lazy" width="1105" height="290" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-65.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-65.png 1000w, https://mytecknet.com/content/images/2023/12/image-65.png 1105w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Performing a system update on Ubuntu/Raspberry Pi OS</span></figcaption></figure><h4 id="installing-java-openjdk-1">Installing Java OpenJDK</h4><p>Finally, install the appropriate Java OpenJDK version for the appropriate version outlined in the <a href="https://mytecknet.com/lets-build-a-tak-server/#requirements" rel="noreferrer">requirements</a>.</p><p><strong>Rocky Linux/RHEL 8</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install Java 17 OpenJDK Devel</span>
<span class="token function">sudo</span> dnf <span class="token function">install</span> java-17-openjdk-devel <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-3(1).png" class="kg-image" alt="" loading="lazy" width="1115" height="600" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-3.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-3.png 1000w, https://mytecknet.com/content/images/2024/01/image-3.png 1115w" sizes="(min-width: 720px) 720px"></figure><p><strong>Ubuntu/Raspberry Pi OS</strong></p><p>In some distributions, Java comes preinstalled.  You can check if your distribution applies by executing the <code>java --version</code> command.  If you get <code>command not found</code> this means you will need to install <code>OpenJDK-17-jre</code>.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-33.png" class="kg-image" alt="" loading="lazy" width="1105" height="97" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-33.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-33.png 1000w, https://mytecknet.com/content/images/2024/01/image-33.png 1105w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Verifying Java OpenJDK Version</span></figcaption></figure><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install Java 17 for Ubuntu/Raspberry Pi OS</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> openjdk-17-jre</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-34(1).png" class="kg-image" alt="" loading="lazy" width="1102" height="92" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-34.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-34.png 1000w, https://mytecknet.com/content/images/2024/01/image-34.png 1102w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Installing Java OpenJDK</span></figcaption></figure><h4 id="installation-instructions-1">Installation Instructions</h4><p>This section will cover installing the TAK Server using the installation files (.rpm or .deb) provided by the <a href="https://tak.gov/products/tak-server?ref=mytecknet.com" rel="noreferrer">TAK.gov</a> website.  Due to the continuous deployment of the TAK Server and its releases, this guide assumes you will install the latest release.</p><div class="kg-card kg-callout-card kg-callout-card-green"><div class="kg-callout-emoji">👀</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Attention</strong></b>: The following installation steps have been written based on the <a href="https://tak.gov/products/tak-server?ref=mytecknet.com" rel="noreferrer">5.0 TAK Server</a> released in December 2023.</div></div><p><strong>Copying files from Windows/Mac to Linux</strong></p><p>For this task, we will use secure copy (SCP) which is built into the secure shell ecosystem in most modern OS.  To use this command, open a terminal, command prompt, or PowerShell window.  Navigate to the directory where the TAK Server installation binaries are located.</p><div class="kg-card kg-callout-card kg-callout-card-grey"><div class="kg-callout-emoji">📓</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Note</strong></b>: If you are using Windows open the File Explorer and navigate to the directory of the installation binaries. Hold the Shift key and right-click within the explorer. Select from the options <code spellcheck="false" style="white-space: pre-wrap;">Open in Terminal</code>, <code spellcheck="false" style="white-space: pre-wrap;">Open PowerShell window here</code>, or if you have Windows Subsystem for Linux (SWL), select <code spellcheck="false" style="white-space: pre-wrap;">Open Linux shell here</code>. This will open a terminal window in the desired directory.</div></div><p>The basic syntax for <code>scp</code> is <code>scp options &lt;sourceFile&gt; &lt;username&gt;@&lt;dstServer&gt;</code>.  Since we are copying to Linux we need to specify a target directory within the Linux file structure.  Typically this is <code>~/</code> which is the Linux user's home directory.</p><div class="kg-card kg-callout-card kg-callout-card-green"><div class="kg-callout-emoji">👀</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Attention</strong></b>: If you are on MacOS and you get the error: <code spellcheck="false" style="white-space: pre-wrap;">zsh: no matches found:</code> when using * in the <code spellcheck="false" style="white-space: pre-wrap;">scp</code> command we need to escape <code spellcheck="false" style="white-space: pre-wrap;">\</code> the wildcard.<br><br><b><strong style="white-space: pre-wrap;">EXAMPLE:</strong></b><br><code spellcheck="false" style="white-space: pre-wrap;">scp takserver-5.\*.rpm takadmin@192.168.178.188:~/</code></div></div><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Copy files to Linux</span>
<span class="token function">scp</span> takserver-5.*.rpm <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span>@<span class="token operator">&lt;</span>takserver<span class="token operator">&gt;</span>:~/

<span class="token comment"># EXAMPLE</span>
<span class="token comment"># scp takserver-5.*.rpm takadmin@192.168.178.188:~/</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-7.png" class="kg-image" alt="" loading="lazy" width="1106" height="329" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-7.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-7.png 1000w, https://mytecknet.com/content/images/2023/12/image-7.png 1106w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Example SCP Output from Windows to Linux</span></figcaption></figure><p>If preferred a graphical user interface to copy from Windows to Linux, <a href="https://winscp.net/eng/index.php?ref=mytecknet.com" rel="noreferrer">WinSCP</a> is a popular application for this task.  For additional information on copying from <a href="https://appleinsider.com/inside/macos/tips/how-to-use-scp-to-transfer-files-in-the-macos-terminal?ref=mytecknet.com" rel="noreferrer">MacOS to Linux</a> can be found here.</p><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://winscp.net/eng/index.php?ref=mytecknet.com"><div class="kg-bookmark-content"><div class="kg-bookmark-title">WinSCP</div><div class="kg-bookmark-description">WinSCP is a popular free SFTP and FTP client for Windows, a powerful file manager that will improve your productivity. It supports also local-local mode and FTPS, S3, SCP and WebDAV protocols. Power users can automate WinSCP using .NET assembly.</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="./Let&#39;s Build a TAK Server_files/favicon.ico" alt=""><span class="kg-bookmark-author">WinSCP - Free SFTP and FTP client</span></div></div><div class="kg-bookmark-thumbnail"><img src="./Let&#39;s Build a TAK Server_files/logo@240.jpg" alt="" onerror="this.style.display = &#39;none&#39;"></div></a></figure><p>After the installation files have been copied to the target host we can begin the installation procedures.</p><p><strong>Rocky Linux/RHEL 8</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install TAK Server 5.0 Database in Rocky Linux/RHEL 8</span>
<span class="token function">sudo</span> dnf <span class="token function">install</span> takserver-database-5.0-RELEASE29.noarch.rpm <span class="token parameter variable">--setopt</span><span class="token operator">=</span>clean_requirements_on_remove<span class="token operator">=</span>false <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-14.png" class="kg-image" alt="" loading="lazy" width="1103" height="725" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-14.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-14.png 1000w, https://mytecknet.com/content/images/2024/01/image-14.png 1103w" sizes="(min-width: 720px) 720px"></figure><p><strong>Ubuntu/Raspberry Pi OS</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install TAK Server 5.x in Ubuntu/Raspberry Pi OS</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> ./takserver-database_5.0-RELEASE29_all.deb <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-15.png" class="kg-image" alt="" loading="lazy" width="1103" height="729" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-15.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-15.png 1000w, https://mytecknet.com/content/images/2024/01/image-15.png 1103w" sizes="(min-width: 720px) 720px"></figure><h4 id="configuring-the-firewall">Configuring the Firewall</h4><p>To accept connections to our TAK Server from the Core Server we need to modify the firewall.</p><p><strong>Rocky Linux/RHEL 8</strong></p><p>Modifying the firewall in Rocky Linux or RHEL requires us to use the <code>firewall-cmd</code> command.  By default our firewall active zone is <code>public</code> but to verify we will use the <code>firewall-cmd --get-active-zones</code> to check.  Once we have found which zone is active we will add the minimum ports required for our database server: TCP port 5432.  After we modify the firewall we need to reload it to apply changes.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Determine the active firewall (default is public in most installations)</span>
<span class="token function">sudo</span> firewall-cmd --get-active-zones

<span class="token comment"># Modify the zone to allow secure client-to-server communications</span>
<span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port <span class="token number">5432</span>/tcp <span class="token parameter variable">--permanent</span>

<span class="token comment"># Optionally, restrict to a known good host</span>
<span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-source <span class="token number">192.168</span>.178.141/32 <span class="token parameter variable">--permanent</span>

<span class="token comment"># Reload the firewall to apply changes</span>
<span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--reload</span>

<span class="token comment"># Verify changes to the firewall</span>
<span class="token function">sudo</span> firewall-cmd --list-all</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-4(1).png" class="kg-image" alt="" loading="lazy" width="1115" height="600" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-4.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-4.png 1000w, https://mytecknet.com/content/images/2024/01/image-4.png 1115w" sizes="(min-width: 720px) 720px"></figure><p><strong>Ubuntu/Raspberry Pi OS</strong></p><p>In most installations of Ubuntu/Raspberry Pi OS, the firewall is not enabled or installed.  To check we can run the <code>ufw status</code> command to check.  If the command is not found we will need to install the firewall.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Check the status of the Uncomplicated Firewall (UFW)</span>
<span class="token function">sudo</span> ufw status

<span class="token comment"># Install UFW if not present</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> ufw <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-16.png" class="kg-image" alt="" loading="lazy" width="1102" height="613" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-16.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-16.png 1000w, https://mytecknet.com/content/images/2024/01/image-16.png 1102w" sizes="(min-width: 720px) 720px"></figure><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Check the status of the Uncomplicated Firewall (UFW)</span>
<span class="token function">sudo</span> ufw status

<span class="token comment"># Deny all incoming connections, allow all outgoing connections</span>
<span class="token function">sudo</span> ufw default deny incoming
<span class="token function">sudo</span> ufw default allow outgoing

<span class="token comment"># Allow ssh connections</span>
<span class="token function">sudo</span> ufw allow <span class="token function">ssh</span>

<span class="token comment"># Optionally, restrict to a known good host</span>
<span class="token function">sudo</span> ufw allow from <span class="token number">192.168</span>.178.186/32 proto TCP to any port <span class="token number">5432</span>

<span class="token comment"># Enable UFW</span>
<span class="token function">sudo</span> ufw <span class="token builtin class-name">enable</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-17.png" class="kg-image" alt="" loading="lazy" width="1102" height="327" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-17.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-17.png 1000w, https://mytecknet.com/content/images/2024/01/image-17.png 1102w" sizes="(min-width: 720px) 720px"></figure><p>After the changes have been made to the database server proceed to install the core TAK Server binary.  Prior too we need to get the established database password for our core server.  For this execute the following command:</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Discover the database password</span>
<span class="token function">grep</span> <span class="token parameter variable">-Eo</span> <span class="token string">".+password=<span class="token entity">\"</span>.+/&gt;"</span> /opt/tak/CoreConfig.example.xml</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-5(1).png" class="kg-image" alt="" loading="lazy" width="1115" height="62" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-5.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-5.png 1000w, https://mytecknet.com/content/images/2024/01/image-5.png 1115w" sizes="(min-width: 720px) 720px"></figure><p>Note the password found within this command, it will be used when provisioning the <code>CoreConfig.xml</code> in the core TAK Server.</p><h3 id="core-server">Core Server</h3><p>Starting with a fresh installation of a <a href="https://mytecknet.com/lets-build-a-tak-server/#supported-operating-systems" rel="noreferrer">supported OS</a>, we will need to modify the Linux pluggable authentication module limits set within the <code>/etc/security/limits.conf</code>.  Within this file, we need to increase the number of file handles allowed within the per-user limit for open files to support Java threads.  We will configure the soft (user override) and hard (root override) limits within this file.  We can edit the file using a command line text editor (<a href="https://www.redhat.com/sysadmin/introduction-vi-editor?ref=mytecknet.com">vi</a>/<a href="https://vimhelp.org/?ref=mytecknet.com" rel="noreferrer">vim</a>, or <a href="https://www.nano-editor.org/dist/latest/nano.html?ref=mytecknet.com">nano</a>) or a one-line command string.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Increase JVM threads</span>
<span class="token comment"># Each 'tab' is six spaces when typing manually</span>
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">"*      soft      nofile      32768<span class="token entity">\n</span>*      hard      nofile      32768<span class="token entity">\n</span>"</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> <span class="token parameter variable">--append</span> /etc/security/limits.conf</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><p>To edit using <em>vi</em> or <em>vim</em> type: <code>sudo vi /etc/security/limits.conf</code> or to use <em>nano</em> type: <code>sudo nano /etc/security/limits.conf</code>.  Some Linux distributions do not come with <em>Nano </em>preinstalled and may need to be installed before executing the command.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Tail to view the end contents of a file</span>
<span class="token function">sudo</span> <span class="token function">tail</span> <span class="token parameter variable">-n</span> <span class="token number">15</span> /etc/security/limits.conf</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><p><strong>Rocky Linux/RHEL 8</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install nano in Rocky and RHEL 8</span>
<span class="token function">sudo</span> dnf <span class="token function">install</span> <span class="token function">nano</span> <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-6.png" class="kg-image" alt="" loading="lazy" width="1101" height="671" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-6.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-6.png 1000w, https://mytecknet.com/content/images/2023/12/image-6.png 1101w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Installation of Nano in Rocky Linux/RHEL 8</span></figcaption></figure><p><strong>Ubuntu/Raspberry Pi OS</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install nano in Ubuntu or Raspberry Pi OS</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token function">nano</span> <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><p>When using the <code>sudo</code> command you will be prompted to enter your password to elevate privileges.  Once the editor has opened, scroll down to the end of the <code>/etc/security/limits.conf</code> file and insert the following lines; insert a <code>tab</code> between each value:<br><br><em>*      soft      nofile      32768<br>*      hard     nofile      32768</em><br><br>Once complete, exit the editor ensuring you save your changes.  To validate the change, <code>tail</code> the <code>limits.conf</code> file.</p><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-6(1).png" class="kg-image" alt="" loading="lazy" width="1115" height="442" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-6.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-6.png 1000w, https://mytecknet.com/content/images/2024/01/image-6.png 1115w" sizes="(min-width: 720px) 720px"></figure><h4 id="installing-java-openjdk-2">Installing Java OpenJDK</h4><p>Finally, install the appropriate Java OpenJDK version for the appropriate version outlined in the <a href="https://mytecknet.com/lets-build-a-tak-server/#requirements" rel="noreferrer">requirements</a>.</p><p><strong>Rocky Linux/RHEL 8</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install Java 17 OpenJDK Devel</span>
<span class="token function">sudo</span> dnf <span class="token function">install</span> java-17-openjdk-devel <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-7(1).png" class="kg-image" alt="" loading="lazy" width="1105" height="599" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-7.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-7.png 1000w, https://mytecknet.com/content/images/2024/01/image-7.png 1105w" sizes="(min-width: 720px) 720px"></figure><p><strong>Ubuntu/Raspberry Pi OS</strong></p><p>In some distributions, Java comes preinstalled.  You can check if your distribution applies by executing the <code>java --version</code> command.  If you get <code>command not found</code> this means you will need to install <code>OpenJDK-17-jre</code>.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-33.png" class="kg-image" alt="" loading="lazy" width="1105" height="97" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-33.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-33.png 1000w, https://mytecknet.com/content/images/2024/01/image-33.png 1105w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Verifying Java OpenJDK Version</span></figcaption></figure><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install Java 17 for Ubuntu/Raspberry Pi OS</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> openjdk-17-jre</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-34(1).png" class="kg-image" alt="" loading="lazy" width="1102" height="92" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-34.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-34.png 1000w, https://mytecknet.com/content/images/2024/01/image-34.png 1102w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Installing Java OpenJDK</span></figcaption></figure><h4 id="installation-instructions-2">Installation Instructions</h4><p>After the installation files have been copied (link <a href="https://mytecknet.com/lets-build-a-tak-server/#installation-instructions-1" rel="noreferrer">here</a> for instructions for copying files) to the target host we can begin the installation procedures.</p><p><strong>Rocky Linux/RHEL 8</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install TAK Server 5.0 Core in Rocky Linux/RHEL 8</span>
<span class="token function">sudo</span> dnf <span class="token function">install</span> takserver-core-5.0-RELEASE29.noarch.rpm <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-8(1).png" class="kg-image" alt="" loading="lazy" width="1102" height="536" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-8.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-8.png 1000w, https://mytecknet.com/content/images/2024/01/image-8.png 1102w" sizes="(min-width: 720px) 720px"></figure><p><strong>Security-Enhanced Linux (SELinux)</strong></p><p>SELinux stands for Security-Enhanced Linux and is a security feature developed initially by the National Security Agency (NSA) that provides a technical control for supporting access security and mandatory access controls. In some installations of Linux SELinux is enabled to Enforce security configurations. To determine if SELinux is enforcing we will use the&nbsp;<em><code>getenforce</code></em>&nbsp;command to get the SELinux status.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Check SELinux status</span>
getenforce</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><p><strong>What to do if SELinux is Enforcing?</strong>&nbsp;If <em>SELinux</em> is enforced we need to apply the <em>SELinux</em> profile for the TAK Server by installing an extra package before applying the <em>SELinux</em> profile.</p><p><strong>Rocky Linux 8</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install checkpolicy</span>
<span class="token function">sudo</span> dnf <span class="token function">install</span> checkpolicy</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-9(1).png" class="kg-image" alt="" loading="lazy" width="1098" height="729" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-9.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-9.png 1000w, https://mytecknet.com/content/images/2024/01/image-9.png 1098w" sizes="(min-width: 720px) 720px"></figure><p><strong>Rocky Linux/RHEL 8</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Apply the TAK Server SELinux Profile</span>
 <span class="token builtin class-name">cd</span> /opt/tak <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> ./apply-selinux.sh</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-10(1).png" class="kg-image" alt="" loading="lazy" width="1094" height="85" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-10.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-10.png 1000w, https://mytecknet.com/content/images/2024/01/image-10.png 1094w" sizes="(min-width: 720px) 720px"></figure><p><strong>Ubuntu/Raspberry Pi OS</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Install TAK Server 5.0 Core in Ubuntu/Raspberry Pi OS</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> ./takserver-core_5.0-RELEASE29_all.deb <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-18.png" class="kg-image" alt="" loading="lazy" width="1102" height="615" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-18.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-18.png 1000w, https://mytecknet.com/content/images/2024/01/image-18.png 1102w" sizes="(min-width: 720px) 720px"></figure><h4 id="core-configuration">Core Configuration</h4><p>After the core TAK Server has been installed, we need to modify the <code>CoreConfig.example.xml</code> with our IP address and database password from our previous installation.  With any configuration changes to the TAK Server, we must switch to the <code>tak</code> user to prevent any permissions issues.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Switch to the tak user</span>
<span class="token function">sudo</span> <span class="token function">su</span> tak

<span class="token comment"># Change the database IP address; Replace &lt;dbIPAddress&gt; with the DB Server IP</span>
<span class="token function">grep</span> <span class="token parameter variable">-Eo</span> <span class="token string">".+password=<span class="token entity">\"</span>.+/&gt;"</span> /opt/tak/CoreConfig.example.xml <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'s/127.0.0.1/&lt;dbIPAddress&gt;/g'</span> /opt/tak/CoreConfig.example.xml

<span class="token comment"># EXAMPLE</span>
<span class="token comment"># grep -Eo ".+password=\".+/&gt;" /opt/tak/CoreConfig.example.xml | sed -i 's/127.0.0.1/192.168.178.155/g' /opt/tak/CoreConfig.example.xml</span>

<span class="token comment"># Verify change to CoreConfig for database IP address</span>
<span class="token function">grep</span> <span class="token parameter variable">-Eo</span> <span class="token string">".+password=<span class="token entity">\"</span>.+/&gt;"</span> /opt/tak/CoreConfig.example.xml</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-11.png" class="kg-image" alt="" loading="lazy" width="1103" height="137" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-11.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-11.png 1000w, https://mytecknet.com/content/images/2024/01/image-11.png 1103w" sizes="(min-width: 720px) 720px"></figure><p>After changing the IP address let's change the database password.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Add the database password; replace &lt;dbPassword&gt; with the DB password</span>
<span class="token function">grep</span> <span class="token parameter variable">-Eo</span> <span class="token string">".+password=<span class="token entity">\"</span>.+/&gt;"</span> /opt/tak/CoreConfig.example.xml <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'s/""/"&lt;dbPassword&gt;"/g'</span> /opt/tak/CoreConfig.example.xml

<span class="token comment"># EXAMPLE</span>
<span class="token comment"># grep -Eo ".+password=\".+/&gt;" /opt/tak/CoreConfig.example.xml | sed -i 's/""/"q9vzywkuHCYmcpn"/g' /opt/tak/CoreConfig.example.xml</span>

<span class="token function">grep</span> <span class="token parameter variable">-Eo</span> <span class="token string">".+password=<span class="token entity">\"</span>.+/&gt;"</span> /opt/tak/CoreConfig.example.xml</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-12.png" class="kg-image" alt="" loading="lazy" width="1101" height="118" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-12.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-12.png 1000w, https://mytecknet.com/content/images/2024/01/image-12.png 1101w" sizes="(min-width: 720px) 720px"></figure><p>Once we have made the required changes to the CoreConfig.example.xml we can move on to the post-configuration tasks.</p><h2 id="post-configuration-tasks"><strong>Post-Configuration Tasks</strong></h2><p>After installing the TAK Server and applying the <code>SELinux</code> policy in Rocky Linux or RHEL the next task is to create the public key infrastructure (PKI) environment.  This will allow us to create a self-signed server and client certificates to enable secure client-to-server communications.</p><div class="kg-card kg-callout-card kg-callout-card-green"><div class="kg-callout-emoji">👀</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Attention</strong></b>: From this point forward, anytime we modify anything within the <code spellcheck="false" style="white-space: pre-wrap;">/opt/tak</code> directory, we will switch to the <code spellcheck="false" style="white-space: pre-wrap;">tak</code> user.</div></div><h3 id="initial-configuration">Initial Configuration</h3><p>This section will establish our root and intermediate certificate authority (CA), the server certificate, and an admin client certificate.  The sequence and execution of this task are very important in the PKI environment.  As we create the CA's it establishes a chain of trust.</p><p>Before we create the first CA in our environment we need to edit the content within the <code>cert-metadata.sh</code> file to create the certificate information for our environment.  At a minimum, it will need our country, state, city, organization, and organizational unit.  Additionally, within this file, we can modify the default certificate password.  To edit this file we need to switch users to the <code>tak</code> user using the <code>sudo su - tak</code> command.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Switch user to the tak user using sudo su tak command</span>
<span class="token function">sudo</span> <span class="token function">su</span> tak</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-11(1).png" class="kg-image" alt="" loading="lazy" width="1095" height="48" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-11.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-11.png 1000w, https://mytecknet.com/content/images/2023/12/image-11.png 1095w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Switch user to tak</span></figcaption></figure><p>Once we have switched to the <code>tak</code> user, we will notice that the prompt has swapped to bash.  This signifies that we are in the <code>tak</code> user account.  Navigate to the <code>/opt/tak/certs</code> directory and run the <code>vi cert-metadata.sh</code> command.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Change directory to /opt/tak/certs</span>
<span class="token builtin class-name">cd</span> /opt/tak/certs
<span class="token function">vi</span> cert-metadata.sh</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><p><strong>cert-metadata.sh Contents:</strong></p><p>Edit the following values to match your organization or environment: <code>COUNTRY</code>, <code>STATE</code>, <code>CITY</code>, <code>ORGANIZATION</code>, and <code>ORGANIZATIONAL_UNIT</code>.  Optionally, modify the <code>CAPASS</code> or <code>PASS</code> as required.  <code>CAPASS</code> will only apply to our CA and <code>PASS</code> will apply to any other certificate request.</p><figure class="kg-card kg-code-card"><div class="code-toolbar"><pre class="language-bash" tabindex="0"><code class="language-bash"><span class="token comment"># Common configuration for all certificates</span>
<span class="token comment">#  Edit these fields to be appropriate for your organization</span>
<span class="token comment">#  If they are left blank, they will not be included.  Do not leave COUNTRY</span>
<span class="token comment">#  blank (you may set it to "XX" if you want to be obtuse).</span>
<span class="token comment">#</span>
<span class="token comment">#  Values for each may be optionally set as environment variables.</span>
<span class="token comment">#  Replace variables such as ${STATE} and ${CITY} as needed.</span>
<span class="token comment">#</span>

<span class="token assign-left variable">COUNTRY</span><span class="token operator">=</span>US
<span class="token assign-left variable">STATE</span><span class="token operator">=</span><span class="token variable">${STATE}</span>
<span class="token assign-left variable">CITY</span><span class="token operator">=</span><span class="token variable">${CITY}</span>
<span class="token assign-left variable">ORGANIZATION</span><span class="token operator">=</span><span class="token variable">${ORGANIZATION<span class="token operator">:-</span>TAK}</span>
<span class="token assign-left variable">ORGANIZATIONAL_UNIT</span><span class="token operator">=</span><span class="token variable">${ORGANIZATIONAL_UNIT}</span>

<span class="token assign-left variable">CAPASS</span><span class="token operator">=</span><span class="token variable">${CAPASS<span class="token operator">:-</span>atakatak}</span>
<span class="token assign-left variable">PASS</span><span class="token operator">=</span><span class="token variable">${PASS<span class="token operator">:-</span>$CAPASS}</span>

<span class="token comment">## subdirectory to put all the actual certs and keys in</span>
<span class="token assign-left variable">DIR</span><span class="token operator">=</span>files

<span class="token comment">##### don't edit below this line #####</span>
<span class="token punctuation">..</span>.</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figcaption><p><span style="white-space: pre-wrap;">cert-metadata.sh default values</span></p></figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-25.png" class="kg-image" alt="" loading="lazy" width="1100" height="420" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-25.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-25.png 1000w, https://mytecknet.com/content/images/2024/01/image-25.png 1100w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Example cert-metadata.sh</span></figcaption></figure><div class="kg-card kg-callout-card kg-callout-card-grey"><div class="kg-callout-emoji">📓</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Note</strong></b>: When using spaces for <code spellcheck="false" style="white-space: pre-wrap;">STATE</code>, <code spellcheck="false" style="white-space: pre-wrap;">CITY</code>, <code spellcheck="false" style="white-space: pre-wrap;">ORGANIATION</code>, or <code spellcheck="false" style="white-space: pre-wrap;">ORGANIZATIONAL_UNIT</code> the values must be enclosed with quotes <code spellcheck="false" style="white-space: pre-wrap;">"</code>.<br><br><b><strong style="white-space: pre-wrap;">Example:</strong></b><br><code spellcheck="false" style="white-space: pre-wrap;">STATE="New York"</code><br><code spellcheck="false" style="white-space: pre-wrap;">CITY="New York City"</code></div></div><p>Once complete, exit the editor ensuring you save your changes.</p><h4 id="creating-the-root-certificate-authority">Creating the Root Certificate Authority</h4><p>To create the self-signed root CA we will use the <code>makeRootCa.sh</code> command.  Optionally, we can pass the <code>--ca-name</code> option to establish our certificate common name in one command; otherwise, we will be prompted to enter a name for our CA.</p><div class="kg-card kg-callout-card kg-callout-card-green"><div class="kg-callout-emoji">👀</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Attention</strong></b>: The <code spellcheck="false" style="white-space: pre-wrap;">CAcommonName</code> cannot contain spaces as the Linux namespace does not like them as much. Replace spaces with a dash (-) or underscore (_) when executing this command.</div></div><figure class="kg-card kg-code-card"><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Create the Root CA</span>
./makeRootCa.sh

<span class="token comment"># or</span>
./makeRootCa.sh --ca-name <span class="token operator">&lt;</span>CAcommonName<span class="token operator">&gt;</span>

<span class="token comment"># EXAMPLE</span>
<span class="token comment"># ./makeRootCa.sh --ca-name TAK-ROOT-CA-01</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figcaption><p><span style="white-space: pre-wrap;">Creating the Root Certificate Authority</span></p></figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-33(1).png" class="kg-image" alt="" loading="lazy" width="1102" height="135" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-33.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-33.png 1000w, https://mytecknet.com/content/images/2023/12/image-33.png 1102w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">./makeRootCa.sh with no options</span></figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-13.png" class="kg-image" alt="" loading="lazy" width="1103" height="192" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-13.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-13.png 1000w, https://mytecknet.com/content/images/2023/12/image-13.png 1103w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">./makeRootCa.com --ca-name &lt;CAcommonName&gt;</span></figcaption></figure><h4 id="creating-the-intermediate-certificate-authority">Creating the Intermediate Certificate Authority</h4><p>The intermediate CA is going to act on behalf of our root CA and will be signing and issuing certificates to our clients.  To create the intermediate CA we need to use the <code>makeCert.sh</code> script with the <code>ca</code> switch to let the script know we are going to create a CA and make it our issuing and signing authority.</p><div class="kg-card kg-callout-card kg-callout-card-green"><div class="kg-callout-emoji">👀</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Attention</strong></b>: The <code spellcheck="false" style="white-space: pre-wrap;">CAcommonName</code> cannot contain spaces as the Linux namespace does not like them as much. Replace spaces with a dash (-) or underscore (_) when executing this command.</div></div><figure class="kg-card kg-code-card"><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Create the Intermediate (Signing and Issuing) CA</span>
./makeCert.sh ca

<span class="token comment"># or</span>
./makeCert.sh ca <span class="token operator">&lt;</span>CAcommonName<span class="token operator">&gt;</span>

<span class="token comment"># EXAMPLE</span>
<span class="token comment"># ./makeCert.sh ca TAK-ID-CA-01</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figcaption><p><span style="white-space: pre-wrap;">Creating the Intermediate Certificate Authority</span></p></figcaption></figure><p>When prompted <code>Do you want me to move the files around so that future server and client certificates are signed by this new CA? [Y/N]</code> type <code>y</code> as this is our desired outcome.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-14(1).png" class="kg-image" alt="" loading="lazy" width="1110" height="363" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-14.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-14.png 1000w, https://mytecknet.com/content/images/2023/12/image-14.png 1110w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">./makeCert.sh ca &lt;CAcommonName&gt;</span></figcaption></figure><h4 id="creating-the-server-certificate">Creating the Server Certificate</h4><p>After creating our PKI environment we need to create our server certificate to start our server.  This public certificate will be what our clients validate against when connecting.  Again use the <code>makeCert.sh</code> script; however, this time use the <code>server</code> switch.  This CA template includes both the <code>client authentication</code> and <code>server authentication</code> in the extended key properties.  We will use the <code>&lt;commonName&gt;</code> of our certificate as <code>takserver</code> since this is the default file referenced within the core configuration.  If you change this value we will need to change it in our core configuration file.  <code>takserver</code> will also be the public-named registration that the certificate expects to receive.  Otherwise, you will get a site not trusted error within your browser.  Editing your system's <code>hosts</code> file can be used to override this by providing a local DNS name to query against.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-67.png" class="kg-image" alt="" loading="lazy" width="1138" height="457" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-67.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-67.png 1000w, https://mytecknet.com/content/images/2023/12/image-67.png 1138w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">For example, a Windows hosts file referencing the takserver hostname record</span></figcaption></figure><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Creating our signed server certificate</span>
./makeCert.sh server <span class="token operator">&lt;</span>commonName<span class="token operator">&gt;</span>

<span class="token comment"># EXAMPLE</span>
<span class="token comment"># ./makeCert.sh server takserver</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-15(1).png" class="kg-image" alt="" loading="lazy" width="1101" height="286" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-15.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-15.png 1000w, https://mytecknet.com/content/images/2023/12/image-15.png 1101w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">./makeCert.sh server takserver</span></figcaption></figure><p><strong>Optionally</strong>, instead of using <code>takserver</code> as our server <code>commonName</code>, you can replace this with the IP address of your TAK Server.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Creating our signed server certificate</span>
./makeCert.sh server <span class="token operator">&lt;</span>commonName<span class="token operator">&gt;</span>

<span class="token comment"># EXAMPLE</span>
<span class="token comment"># ./makeCert.sh server 192.168.178.188</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-35(1).png" class="kg-image" alt="" loading="lazy" width="1102" height="286" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-35.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-35.png 1000w, https://mytecknet.com/content/images/2024/01/image-35.png 1102w" sizes="(min-width: 720px) 720px"></figure><p>Since we are changing the name from takserver; which is the default, to our server IP address we need to update the <code>CoreConfig.example.xml</code>server to reference this new filename.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Use sed to stream and replace takserver to our server IP address</span>
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'s/takserver/&lt;TAKserverIPaddress&gt;/g'</span> /opt/tak/CoreConfig.example.xml

<span class="token comment"># EXAMPLE</span>
<span class="token comment"># sed -i 's/takserver/192.168.178.188/g' /opt/tak/CoreConfig.example.xml</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-36(1).png" class="kg-image" alt="" loading="lazy" width="1102" height="236" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-36.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-36.png 1000w, https://mytecknet.com/content/images/2024/01/image-36.png 1102w" sizes="(min-width: 720px) 720px"></figure><h4 id="modifying-the-core-configuration">Modifying the Core Configuration</h4><p>At this point, we have created the basic configuration to start our TAK Server.  To summarize we have created both our root and intermediate CA and then our server certificate.  Next, we need to modify the <code>CoreConfig.example.xml</code> which contains the baseline configuration for our TAK Server.  Once we start the TAK Server this <code>CoreConfig.example.xml</code> will create the <code>CoreConfig.xml</code> which is the <em>active </em>configuration that our TAK Server will reference for all operations.  By editing,  <code>CoreConfig.example.xml</code> we ensure we have the same baseline even if we delete the <code>CoreConfig.xml</code> accidentally or make a change and our TAK Server fails to start.  Within the <code>CoreConfig.example.xml</code> we need to change the default value stored for our CA from the root CA to our newly created intermediate CA.  </p><p>This does two things, it allows our TAK Server to start successfully since the TAK Server is essentially a client of itself, and as such must trust who signed the certificate.  Additionally, our TAK Server is going to issue client certificates and must trust the clients themselves via the trusted CA chain.  This is known as our client <em>keystore</em> and then we have our server <em>truststore</em>.  To modify our <code>CoreConfig.example.xml</code> to our new CA we will use the <code>sed</code> command which we will use to filter and modify text.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Modify the default truststore-root with our new truststore-&lt;CACommonName&gt;</span>
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'s/truststore-root/truststore-&lt;CACommonName&gt;/g'</span> /opt/tak/CoreConfig.example.xml

<span class="token comment"># EXAMPLE using our current configuration</span>
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'s/truststore-root/truststore-TAK-ID-CA-01/g'</span> /opt/tak/CoreConfig.example.xml</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><p>To validate our change, use <code>cat</code> to view the contents and <code>grep</code> to match the pattern of truststore-TAK-ID-CA-01.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Verify our changes</span>
<span class="token function">cat</span> /opt/tak/CoreConfig.example.xml <span class="token operator">|</span> <span class="token function">grep</span> truststore-</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-17(1).png" class="kg-image" alt="" loading="lazy" width="1101" height="98" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-17.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-17.png 1000w, https://mytecknet.com/content/images/2023/12/image-17.png 1101w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">For example, to verify the change using the sed command followed by the cat command</span></figcaption></figure><h4 id="starting-the-tak-server">Starting the TAK Server</h4><p>This completes the minimal steps for configuring our TAK Server to run.  To start our TAK Server we need to exit the <code>tak</code> user session we are in and back into our normal account.  Once back to our normal user session, we need to first <em>enable</em> the <code>takserver.service</code> then <em>start </em>it.  By enabling the service we want our TAK Server to start after each system startup.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Exit the tak user session</span>
<span class="token builtin class-name">exit</span>

<span class="token comment"># Enable the takserver.service, allowing it to start at system startup</span>
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> takserver.service

<span class="token comment"># Start the TAK Server service</span>
<span class="token function">sudo</span> systemctl start takserver.service</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-18(1).png" class="kg-image" alt="" loading="lazy" width="1101" height="154" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-18.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-18.png 1000w, https://mytecknet.com/content/images/2023/12/image-18.png 1101w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Enable and start the takserver.service</span></figcaption></figure><p>To verify that our TAK Server is started we want to consult the logs to view its status.  The TAK Server logs are stored in the <code>/opt/tak/logs/</code> directory.  The log we are looking for is the <code>takserver-messaging.log</code>, it may take some time for this log to be created - periodically check for this log until it is created.  Once it is created we will monitor the contents of the log to inspect for errors.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Monitor the /opt/tak/logs/ directory for the takserver-messaging.log</span>
<span class="token function">ls</span> <span class="token parameter variable">-l</span> /opt/tak/logs/

<span class="token comment"># Tail a streaming output of the end of the log</span>
<span class="token function">tail</span> <span class="token parameter variable">-f</span> /opt/tak/logs/takserver-messaging.log</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-19.png" class="kg-image" alt="" loading="lazy" width="1105" height="460" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-19.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-19.png 1000w, https://mytecknet.com/content/images/2023/12/image-19.png 1105w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Successful log of a started TAK Server</span></figcaption></figure><p>Within the log, we are looking for a few messages at minimum:</p><ul>
<li><strong>INFO c.b.marti.nio.netty.NioNettyBuilder - Successfully Started Netty Server for TlsServerInitializer on Port 8089 with watermark WriteBufferWaterMark(low: 2048, high: 4096)</strong>
<ul>
<li>This lets us know that the client-to-server listener is started and is accepting clients</li>
</ul>
</li>
<li><strong>INFO com.bbn.marti.nio.server.NioServer - Server started</strong>
<ul>
<li>This tells us the services have started</li>
</ul>
</li>
<li><strong>INFO com.bbn.marti.util.VersionBean - TAK Server version 5.0-RELEASE-29-HEAD</strong>
<ul>
<li>This lets me know what version is running and that all services have started</li>
</ul>
</li>
</ul>
<h4 id="creating-the-admin-certificate">Creating the Admin Certificate</h4><p>Now that our TAK Server is started we need to be able to administer the server.  To do this we need to create an administrator account.  The best and most secure way to do this is by creating a client certificate and elevating this certificate for administration.  To create our administrative certificate we need to switch back to the <code>tak</code> user and change directories to the <code>certs</code> directory to run the <code>makeCert.sh</code> command again.  Once we are there we will use <code>./makeCert.sh client webadmin</code> to create our client certificate first.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Switch to the tak user</span>
<span class="token function">sudo</span> <span class="token function">su</span> tak

<span class="token comment"># Change directory to certs</span>
<span class="token builtin class-name">cd</span> /opt/tak/certs

<span class="token comment"># Make the Administrator Certificate</span>
./makeCert.sh client <span class="token operator">&lt;</span>commonName<span class="token operator">&gt;</span>

<span class="token comment"># EXAMPLE</span>
<span class="token comment"># ./makeCert.sh client webadmin</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-16(1).png" class="kg-image" alt="" loading="lazy" width="1101" height="266" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-16.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-16.png 1000w, https://mytecknet.com/content/images/2023/12/image-16.png 1101w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Creating a client certificate using makeCert.sh client switch</span></figcaption></figure><p>After creating the client certificate we need to assign this certificate to our TAK Server administrator.  This requires us to use the <code>UserManager.jar</code> tool located in the <code>/opt/tak/utils/</code> directory.</p><h5 id="usermanagerjar">UserManager.jar</h5><p>The <code>UserManager.jar</code> allows us to modify both user credentials and certificates.  Additionally, we have the option to manage groups and permissions.  For now, we need to modify the administrator certificate we just created by making it an administrator.  To do this we will use the <code>UserManager.jar certmod</code> switch.  More information on the <code>UserManager.jar</code> tool will be covered later.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Modify the certificate to provide administrator access</span>
<span class="token function">java</span> <span class="token parameter variable">-jar</span> /opt/tak/utils/UserManager.jar certmod <span class="token parameter variable">-A</span> /opt/tak/certs/files/<span class="token operator">&lt;</span>commonName<span class="token operator">&gt;</span>.pem

<span class="token comment"># EXAMPLE</span>
<span class="token comment"># java -jar /opt/tak/utils/UserManager.jar certmod -A /opt/tak/certs/files/webadmin.pem</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-20.png" class="kg-image" alt="" loading="lazy" width="1096" height="173" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-20.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-20.png 1000w, https://mytecknet.com/content/images/2023/12/image-20.png 1096w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Example using Rocky Linux/RHEL 8</span></figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-38.png" class="kg-image" alt="" loading="lazy" width="1106" height="230" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-38.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-38.png 1000w, https://mytecknet.com/content/images/2023/12/image-38.png 1106w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Example using Ubuntu/Raspberry Pi OS</span></figcaption></figure><p>Now that we have created our administrator certificate, we need to move it so that we can copy and install it on our administrative workstation to manage the TAK Server remotely.  First, we need to exit out of the <code>tak</code> user session and change directories back to our Linux user's home directory.  After we have done that we will copy the administrator certificate and modify the permissions so that we can copy the file from Linux to our workstation using SCP.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Exit the tak user session</span>
<span class="token builtin class-name">exit</span>

<span class="token comment"># Change directories to our Linux home directory</span>
<span class="token builtin class-name">cd</span> ~

<span class="token comment"># Move the administrative certificate to our home directory</span>
<span class="token function">sudo</span> <span class="token function">cp</span> <span class="token parameter variable">-v</span> /opt/tak/certs/files/webadmin.p12 <span class="token builtin class-name">.</span>

<span class="token comment"># Change the ownership to our Linux user</span>
<span class="token function">sudo</span> <span class="token function">chown</span> <span class="token parameter variable">-R</span> <span class="token operator">&lt;</span>userName<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>userGroup<span class="token operator">&gt;</span> /home/<span class="token operator">&lt;</span>username<span class="token operator">&gt;</span>

<span class="token comment"># EXAMPLE</span>
<span class="token comment"># sudo chown -R takadmin:takadmin /home/takadmin</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-21.png" class="kg-image" alt="" loading="lazy" width="1100" height="231" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-21.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-21.png 1000w, https://mytecknet.com/content/images/2023/12/image-21.png 1100w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Listing file permissions to verify ownership</span></figcaption></figure><p>Before we copy our administrative certificate to our workstation we need to modify the Linux firewall to allow clients to connect to our TAK Server.</p><h3 id="configuring-the-firewall-1">Configuring the Firewall</h3><p>To accept connections to our TAK Server we need to modify the firewall.  By default, we want to ensure we accept secure connections over TLS established by our PKI environment.</p><p>This is not an all-inclusive list but by default, these are the ports used for secure communications:<br>
<br></p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Service</strong></th>
<th style="text-align:center"><strong>Protocol</strong></th>
<th style="text-align:left"><strong>Port</strong></th>
<th style="text-align:left"><strong>Source</strong></th>
<th style="text-align:left"><strong>Destination</strong></th>
<th style="text-align:center"><strong>Direction</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">TAK Signaling</td>
<td style="text-align:center">TCP/S</td>
<td style="text-align:left">8089</td>
<td style="text-align:left">Client</td>
<td style="text-align:left">Server</td>
<td style="text-align:center">IN</td>
</tr>
<tr>
<td style="text-align:left">TAK API<br>WebUI<br>WebTAK</td>
<td style="text-align:center"><br>TCP/S<br></td>
<td style="text-align:left"><br>8443<br></td>
<td style="text-align:left"><br>Client<br></td>
<td style="text-align:left"><br>Server<br></td>
<td style="text-align:center"><br>IN<br></td>
</tr>
<tr>
<td style="text-align:left"><br>Federation<br></td>
<td style="text-align:center"><br>TCP/S<br></td>
<td style="text-align:left">8444(Legacy)<br>9000(v1)<br>9001(v2)</td>
<td style="text-align:left"><br>Server<br></td>
<td style="text-align:left"><br>Server<br></td>
<td style="text-align:center"><br>IN<br></td>
</tr>
<tr>
<td style="text-align:left">Certificate<br>Provisioning</td>
<td style="text-align:center">TCP/S</td>
<td style="text-align:left">8446</td>
<td style="text-align:left">Client</td>
<td style="text-align:left">Server</td>
<td style="text-align:center">IN</td>
</tr>
</tbody>
</table>
<p><br>
<strong>TCP/S</strong> = TLS/SSL TCP<br>
<strong>NOTE</strong>: Unless annotated, most connections use a random source port to the target destination rather than a 1:1 mapping.&nbsp;&nbsp;An example is a client connecting to TCP/8089 would leave the client using a port called an <a href="https://en.wikipedia.org/wiki/Ephemeral_port?ref=mytecknet.com">ephemeral port</a> with a destination port of TCP/8089 to the server.</p>
<p><strong>Rocky Linux/RHEL 8</strong></p><p>Modifying the firewall in Rocky Linux or RHEL requires us to use the <code>firewall-cmd</code> command.  By default our firewall active zone is <code>public</code> but to verify we will use the <code>firewall-cmd --get-active-zones</code> to check.  Once we have found which zone is active we will add the minimum ports required to connect our clients: 8089 and 8443.  After we modify the firewall we need to reload it to apply changes.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Determine the active firewall (default is public in most installations)</span>
<span class="token function">sudo</span> firewall-cmd --get-active-zones

<span class="token comment"># Modify the zone to allow secure client-to-server communications</span>
<span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port <span class="token number">8089</span>/tcp --add-port <span class="token number">8443</span>/tcp <span class="token parameter variable">--permanent</span>

<span class="token comment"># Reload the firewall to apply changes</span>
<span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--reload</span>

<span class="token comment"># Verify changes to the firewall</span>
<span class="token function">sudo</span> firewall-cmd --list-all</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-22.png" class="kg-image" alt="" loading="lazy" width="1105" height="442" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-22.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-22.png 1000w, https://mytecknet.com/content/images/2023/12/image-22.png 1105w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Modifying the firewall in Rocky Linux/RHEL 8</span></figcaption></figure><p><strong>Ubuntu/Raspberry Pi OS</strong></p><p>In most installations of Ubuntu/Raspberry Pi OS, the firewall is not enabled or installed.  To check we can run the <code>ufw status</code> command to check.  If the command is not found we will need to install the firewall.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Check the status of the Uncomplicated Firewall (UFW)</span>
<span class="token function">sudo</span> ufw status

<span class="token comment"># Install UFW if not present</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> ufw <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-41.png" class="kg-image" alt="" loading="lazy" width="1099" height="230" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-41.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-41.png 1000w, https://mytecknet.com/content/images/2023/12/image-41.png 1099w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Installing UFW in Ubuntu/Raspberry Pi OS</span></figcaption></figure><p>With <code>ufw</code> installed, we need to configure the minimum ports required for client-to-server communications: TCP 8089 and 8443.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Check the status of the Uncomplicated Firewall (UFW)</span>
<span class="token function">sudo</span> ufw status

<span class="token comment"># Deny all incoming connections, allow all outgoing connections</span>
<span class="token function">sudo</span> ufw default deny incoming
<span class="token function">sudo</span> ufw default allow outgoing

<span class="token comment"># Allow ssh connections</span>
<span class="token function">sudo</span> ufw allow <span class="token function">ssh</span>

<span class="token comment"># Allow TAK ports for client-to-server communications</span>
<span class="token function">sudo</span> ufw allow <span class="token number">8089</span>/tcp
<span class="token function">sudo</span> ufw allow <span class="token number">8443</span>/tcp

<span class="token comment"># Enable UFW</span>
<span class="token function">sudo</span> ufw <span class="token builtin class-name">enable</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-40.png" class="kg-image" alt="" loading="lazy" width="1102" height="405" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-40.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-40.png 1000w, https://mytecknet.com/content/images/2023/12/image-40.png 1102w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Configuring the UFW for TAK connections</span></figcaption></figure><p>After we have modified the firewall we can now attempt to access the <code>Marti</code> dashboard with our administrative certificate.</p><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://www.digitalocean.com/community/tutorials/ufw-essentials-common-firewall-rules-and-commands?ref=mytecknet.com"><div class="kg-bookmark-content"><div class="kg-bookmark-title">UFW Essentials: Common Firewall Rules and Commands | DigitalOcean</div><div class="kg-bookmark-description">UFW (uncomplicated firewall) is a firewall configuration tool that runs on top of iptables, included by default within Ubuntu distributions. It provides a …</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="./Let&#39;s Build a TAK Server_files/apple-touch-icon.d7edaa01.png" alt=""><span class="kg-bookmark-author">DigitalOcean</span><span class="kg-bookmark-publisher">Mitchell Anicas</span></div></div><div class="kg-bookmark-thumbnail"><img src="./Let&#39;s Build a TAK Server_files/intro-to-cloud.d49bc5f7.jpeg" alt="" onerror="this.style.display = &#39;none&#39;"></div></a></figure><h3 id="the-administrative-dashboard">The Administrative Dashboard</h3><p>By this point, we have installed our prerequisites - <a href="https://mytecknet.com/lets-build-a-tak-server/#installing-extra-packages-for-enterprise-linux" rel="noreferrer">EPEL</a>, <a href="https://mytecknet.com/lets-build-a-tak-server/#installing-postgresql-and-postgis" rel="noreferrer">PostgreSQL</a>, <a href="https://mytecknet.com/lets-build-a-tak-server/#installing-postgresql-and-postgis#installing-postgresql-and-postgis" rel="noreferrer">PostGIS</a>, and <a href="https://mytecknet.com/lets-build-a-tak-server/#installing-java-openjdk" rel="noreferrer">Java</a>.  We have <a href="https://mytecknet.com/lets-build-a-tak-server/#using-the-installer-files" rel="noreferrer">installed our TAK Server</a>, <a href="https://mytecknet.com/lets-build-a-tak-server/#initial-configuration" rel="noreferrer">created our PKI environment</a>, <a href="https://mytecknet.com/lets-build-a-tak-server/#creating-the-admin-certificate" rel="noreferrer">established an administrative certificate</a>, and <a href="https://mytecknet.com/lets-build-a-tak-server/#configuring-the-firewall" rel="noreferrer">modified our firewall to accept client connections</a>.  Now we are ready to access our TAK Server and start administering it.  To access the TAK Server administrative dashboard <code>Marti</code> we need to copy over our administrative certificate from Linux to our workstation.  From our workstation navigate to a directory to store our administrative certificate.  Next, use <code>SCP</code> to copy the file from Linux to this directory.  Just like copying files from our workstation to Linux using <code>SCP</code>, we will do this in the reverse order syntax: <code>scp &lt;username&gt;@&lt;srcServer&gt;:~/ &lt;destinationFile&gt;</code>.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Copy files from Linux</span>
<span class="token function">scp</span> <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span>@<span class="token operator">&lt;</span>takserver<span class="token operator">&gt;</span>:~/<span class="token operator">&lt;</span>commonName<span class="token operator">&gt;</span>.p12 <span class="token builtin class-name">.</span>

<span class="token comment"># EXAMPLE</span>
<span class="token function">scp</span> takadmin@192.168.178.188:~/webadmin.p12 <span class="token builtin class-name">.</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-23.png" class="kg-image" alt="" loading="lazy" width="1102" height="363" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-23.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-23.png 1000w, https://mytecknet.com/content/images/2023/12/image-23.png 1102w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Copying the admin certificate to our workstation</span></figcaption></figure><p>Depending on your browser will determine how you install this administrative certificate.  Most browsers use the underlying OS truststore whereas Firefox has an internal truststore outside of the inherited OS truststore so we will demonstrate how to do this next.</p><h4 id="mozilla-firefox">Mozilla Firefox</h4><p>Open the Firefox web browser and type <code>about:preferences#privacy</code> into the navigation bar.  Scroll to the <em><code>Security</code></em> section and click on <em><code>View Certificates</code></em>.  Alternatively, you can type <em><code>certificates</code></em> in the <em>Find in Settings</em> search bar.  In the <em><code>Certificate Manager</code></em> select the <code><em>Your Certificates</em></code> tab and click on <code>Import</code>.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-24.png" class="kg-image" alt="" loading="lazy" width="658" height="470" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-24.png 600w, https://mytecknet.com/content/images/2023/12/image-24.png 658w"><figcaption><span style="white-space: pre-wrap;">Firefox - Certificate Manager</span></figcaption></figure><p>In the file dialog navigate to the <em>webadmin.p12</em> file and select <em><code>Open</code></em> to import the private key and public certificate contained with the <em>webadmin.p12</em> file.  Enter the certificate password when prompted - default is <code>atakatak</code>; otherwise, this is the password modified within the <code>cert-metadata.sh</code> during setup.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-25(1).png" class="kg-image" alt="" loading="lazy" width="659" height="469" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-25.png 600w, https://mytecknet.com/content/images/2023/12/image-25.png 659w"><figcaption><span style="white-space: pre-wrap;">Firefox - Certificate Manager - Import Password</span></figcaption></figure><p>After the certificate has been successfully imported, click on the <code><em>Authorities</em></code> tab and find the Organization name entered in the <code>cert-metadata.sh</code>.  Click on each of your CAs and click on <em><code>Edit Trust</code></em>.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-27.png" class="kg-image" alt="" loading="lazy" width="658" height="467" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-27.png 600w, https://mytecknet.com/content/images/2023/12/image-27.png 658w"><figcaption><span style="white-space: pre-wrap;">Firefox - Certificate Manager - Authorities</span></figcaption></figure><p>Under <code>Edit CA certificate trust settings</code>, click on the checkbox next to <code>This certificate can identify websites</code>.  This will allow us in the future to trust our self-signed CA.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-28.png" class="kg-image" alt="" loading="lazy" width="658" height="469" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-28.png 600w, https://mytecknet.com/content/images/2023/12/image-28.png 658w"><figcaption><span style="white-space: pre-wrap;">Firefox - Certificate Manager - Edit CA certificate</span></figcaption></figure><p>After completing this step, click <code>OK</code> to close the <code>Certificate Manager</code>.  Within the URL bar attempt to access the <code>Marti</code> dashboard by going to <code>https://&lt;takserver&gt;:8443/Marti</code>.  Since we are accessing the TAK Server using the IP Address and not the common name we used in the creation of our server certificate we will get this error.  This is because the server certificate's common name is takserver and our client is expecting to connect to takserver and not an IP Address.  Within Firefox we can click on <code>Accept the Risk and Continue</code> to attempt to access our server.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-29.png" class="kg-image" alt="" loading="lazy" width="1272" height="922" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-29.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-29.png 1000w, https://mytecknet.com/content/images/2023/12/image-29.png 1272w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Firefox - SSL Error</span></figcaption></figure><p>If you modified your systems hosts file as referenced <a href="https://mytecknet.com/lets-build-a-tak-server/#creating-the-server-certificate" rel="noreferrer">here</a> you could alternatively browse to <code>https://takserver:8443/Marti</code> and not get this SSL error.</p><p>If we performed all the steps correctly we should be prompted with our administrative certificate to authenticate to our server.  If so, click <code>OK</code> to log in.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-30.png" class="kg-image" alt="" loading="lazy" width="1270" height="920" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-30.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-30.png 1000w, https://mytecknet.com/content/images/2023/12/image-30.png 1270w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Firefox - Certificate prompt</span></figcaption></figure><p>Upon successful login, we are brought to the <code>Metrics Dashboard</code>, by default.  If we are brought to <em>WebTAK</em> then we need to go back and execute the <code>UserManager.jar certmod</code> command again and ensure we use the <code>-A</code> to make our certificate an administrator.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-31.png" class="kg-image" alt="" loading="lazy" width="1275" height="921" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-31.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-31.png 1000w, https://mytecknet.com/content/images/2023/12/image-31.png 1275w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">TAK Server Marti dashboard</span></figcaption></figure><h4 id="other-browsers">Other Browsers</h4><h5 id="windows">Windows</h5><p>Most browsers will inherit from the host operating system truststore.  To import the administrative certificate in Windows we can double-click it to open the <code>Certificate Import Wizard</code>.  By default, the <code>Store Location</code> will be the <code>Current User</code> at our first prompt.  Keep the defaults and click <code><em>Next</em></code> on the next two prompts.  When prompted for our certificate password enter <code>atakatak</code> or the password set in the <code>cert-metadata.sh</code> during setup.  When asked to specify a <code>Certificate Store</code> select <code>Place all certificates in the following store</code> and click <code>Browse</code>.  Select the <code>Personal</code> from the list of available <code>Certificate Stores</code>.  Click <em><code>Next</code></em> and <em><code>host</code></em> to import our certificate to our host truststore.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-68.png" class="kg-image" alt="" loading="lazy" width="535" height="210"><figcaption><span style="white-space: pre-wrap;">Certificate Store</span></figcaption></figure><p>After our certificate has been imported we can verify the certificate in the <code>Certificate Manager (certmgr.msc)</code> under <code>Personal</code>, <code>Certificates</code> folder.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-69.png" class="kg-image" alt="" loading="lazy" width="626" height="173" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-69.png 600w, https://mytecknet.com/content/images/2023/12/image-69.png 626w"><figcaption><span style="white-space: pre-wrap;">Certificate Manager for the Current User</span></figcaption></figure><p>Additionally, we need to move our CA into our <code>Trusted Root Certificate Authorities</code> &gt; <code>Certificates</code> truststore to trust our CA within our OS.  If you created your takserver certificate using your TAK Server IP address this will also fix this error within the browser: <code>NET::ERR_CERT_AUTHORITY_INVALID</code>.  To move the CA certificates, select them both and select cut then paste them into the<code>Trusted Root Certificate Authorities</code> &gt; <code>Certificates</code>.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-38(1).png" class="kg-image" alt="" loading="lazy" width="1189" height="273" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-38.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-38.png 1000w, https://mytecknet.com/content/images/2024/01/image-38.png 1189w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Select and cut the CA certificates</span></figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-39.png" class="kg-image" alt="" loading="lazy" width="1189" height="331" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-39.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-39.png 1000w, https://mytecknet.com/content/images/2024/01/image-39.png 1189w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Paste the CA certificates in the Trusted Root Certificate Authorities trust</span></figcaption></figure><p>When pasting the CA certificates you may see the following security warning.  Click on <code>Yes</code> to install each certificate.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-40(1).png" class="kg-image" alt="" loading="lazy" width="410" height="380"><figcaption><span style="white-space: pre-wrap;">Accepting the installation of the CA certificates</span></figcaption></figure><p><strong>Microsoft Edge/Chome</strong></p><p>Microsoft Edge/Chrome read certificates from the underlying current user truststore.  Within the URL bar attempt to access the <code>Marti</code> dashboard by going to <code>https://&lt;takserver&gt;:8443/Marti</code>.  Since we are accessing the TAK Server using the IP Address and not the common name we used in the creation of our server certificate we will get this error.  This is because the server certificate's common name is takserver and our client is expecting to connect to takserver and not an IP Address.  Click <code>Advanced</code> and click <code>Continue to ...</code> attempt to access the TAK Server.</p><div class="kg-card kg-callout-card kg-callout-card-grey"><div class="kg-callout-emoji">📓</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Note</strong></b>: If you created the TAK Server certificate using the IP address as the <code spellcheck="false" style="white-space: pre-wrap;">commonName</code> you will not receive the below warning if you installed the CA certificates to your OS truststore.</div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-19(1).png" class="kg-image" alt="" loading="lazy" width="1916" height="742" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-19.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-19.png 1000w, https://mytecknet.com/content/images/size/w1600/2024/01/image-19.png 1600w, https://mytecknet.com/content/images/2024/01/image-19.png 1916w" sizes="(min-width: 720px) 720px"></figure><p>If we performed all the steps correctly we should be prompted with our administrative certificate to authenticate to our server.  If so, click <code>OK</code> to log in.</p><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-20(1).png" class="kg-image" alt="" loading="lazy" width="1915" height="806" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-20.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-20.png 1000w, https://mytecknet.com/content/images/size/w1600/2024/01/image-20.png 1600w, https://mytecknet.com/content/images/2024/01/image-20.png 1915w" sizes="(min-width: 720px) 720px"></figure><p>Upon successful login, we are brought to the <code>Metrics Dashboard</code>, by default.  If we are brought to <em>WebTAK</em> then we need to go back and execute the <code>UserManager.jar certmod</code> command again and ensure we use the <code>-A</code> to make our certificate an administrator.</p><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-21(1).png" class="kg-image" alt="" loading="lazy" width="1918" height="806" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-21.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-21.png 1000w, https://mytecknet.com/content/images/size/w1600/2024/01/image-21.png 1600w, https://mytecknet.com/content/images/2024/01/image-21.png 1918w" sizes="(min-width: 720px) 720px"></figure><h5 id="macos">MacOS</h5><p>We need to import the administrative certificate into the <code>keychain</code> if using a Mac and Safari.  Open the <code>keychain access</code> application and select <code>File</code>, <code>Import Items...</code></p><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/Screenshot-2024-01-06-at-7.46.17-PM.png" class="kg-image" alt="" loading="lazy" width="1756" height="912" srcset="https://mytecknet.com/content/images/size/w600/2024/01/Screenshot-2024-01-06-at-7.46.17-PM.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/Screenshot-2024-01-06-at-7.46.17-PM.png 1000w, https://mytecknet.com/content/images/size/w1600/2024/01/Screenshot-2024-01-06-at-7.46.17-PM.png 1600w, https://mytecknet.com/content/images/2024/01/Screenshot-2024-01-06-at-7.46.17-PM.png 1756w" sizes="(min-width: 720px) 720px"></figure><p>When the file dialog opens, select the administrative certificate.</p><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/Screenshot-2024-01-06-at-7.46.51-PM.png" class="kg-image" alt="" loading="lazy" width="1978" height="1290" srcset="https://mytecknet.com/content/images/size/w600/2024/01/Screenshot-2024-01-06-at-7.46.51-PM.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/Screenshot-2024-01-06-at-7.46.51-PM.png 1000w, https://mytecknet.com/content/images/size/w1600/2024/01/Screenshot-2024-01-06-at-7.46.51-PM.png 1600w, https://mytecknet.com/content/images/2024/01/Screenshot-2024-01-06-at-7.46.51-PM.png 1978w" sizes="(min-width: 720px) 720px"></figure><p>When prompted, enter the password to extract the certificate.</p><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/Screenshot-2024-01-06-at-7.47.10-PM.png" class="kg-image" alt="" loading="lazy" width="1756" height="912" srcset="https://mytecknet.com/content/images/size/w600/2024/01/Screenshot-2024-01-06-at-7.47.10-PM.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/Screenshot-2024-01-06-at-7.47.10-PM.png 1000w, https://mytecknet.com/content/images/size/w1600/2024/01/Screenshot-2024-01-06-at-7.47.10-PM.png 1600w, https://mytecknet.com/content/images/2024/01/Screenshot-2024-01-06-at-7.47.10-PM.png 1756w" sizes="(min-width: 720px) 720px"></figure><p>After the certificate is extracted, we additionally want to edit the root certificate to <code>Always Trust</code>.  To do this find the root certificate, right-click <code>Get Info</code> and expand <code>trust</code>.  From the dropdown select <code>Always Trust</code> and close the dialog.</p><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/Screenshot-2024-01-06-at-7.48.36-PM.png" class="kg-image" alt="" loading="lazy" width="1756" height="1102" srcset="https://mytecknet.com/content/images/size/w600/2024/01/Screenshot-2024-01-06-at-7.48.36-PM.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/Screenshot-2024-01-06-at-7.48.36-PM.png 1000w, https://mytecknet.com/content/images/size/w1600/2024/01/Screenshot-2024-01-06-at-7.48.36-PM.png 1600w, https://mytecknet.com/content/images/2024/01/Screenshot-2024-01-06-at-7.48.36-PM.png 1756w" sizes="(min-width: 720px) 720px"></figure><p>Refresh the window and verify that the certificate is now trusted.  If it is, we can attempt to log in using <code>Safari</code>.</p><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/Screenshot-2024-01-06-at-7.49.22-PM.png" class="kg-image" alt="" loading="lazy" width="1756" height="1102" srcset="https://mytecknet.com/content/images/size/w600/2024/01/Screenshot-2024-01-06-at-7.49.22-PM.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/Screenshot-2024-01-06-at-7.49.22-PM.png 1000w, https://mytecknet.com/content/images/size/w1600/2024/01/Screenshot-2024-01-06-at-7.49.22-PM.png 1600w, https://mytecknet.com/content/images/2024/01/Screenshot-2024-01-06-at-7.49.22-PM.png 1756w" sizes="(min-width: 720px) 720px"></figure><p><strong>Safari</strong></p><p>Open the Safari web browser and navigate to <code>https://&lt;takserver&gt;:8443/Marti</code>.  You will get a <code>This Connection is Not Private</code>, this is because the certificate name, connection, and trust do not match.  We can ignore this and click <code>visit this website</code> to continue.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/Screenshot-2024-01-06-at-7.36.16-PM.png" class="kg-image" alt="" loading="lazy" width="2000" height="1465" srcset="https://mytecknet.com/content/images/size/w600/2024/01/Screenshot-2024-01-06-at-7.36.16-PM.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/Screenshot-2024-01-06-at-7.36.16-PM.png 1000w, https://mytecknet.com/content/images/size/w1600/2024/01/Screenshot-2024-01-06-at-7.36.16-PM.png 1600w, https://mytecknet.com/content/images/2024/01/Screenshot-2024-01-06-at-7.36.16-PM.png 2000w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Safari - SSL Error</span></figcaption></figure><p>After we accept the <code>site not trusted</code> banner, we should be prompted for the administrative certificate we imported.  Click <code>Continue</code> and enter <strong>YOUR</strong> user administrative password and click on <code>Always Trust</code> to proceed with the login.</p><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/Screenshot-2024-01-06-at-7.50.11-PM.png" class="kg-image" alt="" loading="lazy" width="2000" height="1465" srcset="https://mytecknet.com/content/images/size/w600/2024/01/Screenshot-2024-01-06-at-7.50.11-PM.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/Screenshot-2024-01-06-at-7.50.11-PM.png 1000w, https://mytecknet.com/content/images/size/w1600/2024/01/Screenshot-2024-01-06-at-7.50.11-PM.png 1600w, https://mytecknet.com/content/images/2024/01/Screenshot-2024-01-06-at-7.50.11-PM.png 2000w" sizes="(min-width: 720px) 720px"></figure><h4 id="metrics-dashboard">Metrics Dashboard</h4><p>When logging into the TAK Server, you will be presented with the <code>Marti</code> dashboard that displays the server's metric information.  Below is a list of default graphs and information regarding the data that is being displayed.</p><ul>
<li><strong>Server Start Time/Up Time</strong>
<ul>
<li>The format for this is in ZULU which is yyyy-MM-ddTHH:mm:ss.SSSZ
<ul>
<li>T is assumed literally to separate the date from the time</li>
<li>ss.SSS is seconds and milliseconds</li>
<li>Z is zero-hour offset or "Zulu time (UTC)"</li>
</ul>
</li>
</ul>
</li>
<li><strong>CPU Usage</strong>
<ul>
<li>Identifies how many cores the system has and its usage</li>
</ul>
</li>
<li><strong>Heap Usage</strong>
<ul>
<li>The TAK Server runs within one or more Java virtual machines (JVM)</li>
</ul>
</li>
<li><strong>Clients Connected</strong>
<ul>
<li>Displays how many clients are currently connected</li>
</ul>
</li>
<li><strong>Network Input/Output</strong>
<ul>
<li>Displays network utilization of traffic the server is processing</li>
</ul>
</li>
<li><strong>Queue(s)</strong>
<ul>
<li>Submission</li>
<li>Broker</li>
<li>Repository</li>
</ul>
</li>
</ul>
<h4 id="navigation-menu">Navigation Menu</h4><p>At the top right of the <code>Marti</code> dashboard will be the <em>hamburger menu </em>(≡) that will drop down multiple available menus and pages for additional configuration and management.  Below is a list of available menu options and a brief description.</p><ul>
<li><strong>Data</strong>
<ul>
<li>CoT Query
<ul>
<li>Allows you to send CoT Events from the server to a device as CoT messages</li>
</ul>
</li>
<li>File Manager
<ul>
<li>Previously called Enterprise Sync, contains all files uploaded to the server either as a Data Package or through DataSync</li>
</ul>
</li>
<li>Send Mission Package
<ul>
<li>Allows you to upload and send a Data Package to connected clients</li>
</ul>
</li>
<li>Video Feed Manager
<ul>
<li>Used to publish video feed URLs to connected clients</li>
</ul>
</li>
<li>Mission Manager
<ul>
<li>Used to manage DataSync missions stored on the server</li>
</ul>
</li>
<li>ExCheck
<ul>
<li>Used to manage ExCheck templates from the server</li>
</ul>
</li>
</ul>
</li>
<li><strong>Situational Awareness</strong>
<ul>
<li>Export Mission
<ul>
<li>Allows you to export CoT events stored in the server as a KMZ/KML overlay</li>
</ul>
</li>
<li>KML SA Feed
<ul>
<li>Exports a streaming KML file for import in applications such as Google Earth</li>
</ul>
</li>
<li>WebTAK
<ul>
<li>Opens the web browser version of TAK</li>
</ul>
</li>
</ul>
</li>
<li><strong>Configuration</strong>
<ul>
<li>Inputs and Data Feeds
<ul>
<li>Allows you to create new input ports for pushing CoT messages to the TAK Server</li>
</ul>
</li>
<li>Federation
<ul>
<li>Used to manage TAK Server to TAK Server connections</li>
</ul>
</li>
<li>Federate Certificate Authorities
<ul>
<li>Used to manage TAK Server public CAs used for TAK Server Federation</li>
</ul>
</li>
<li>Injectors
<ul>
<li>Used to inject CoT, Sensor, and SPI</li>
</ul>
</li>
<li>Security and Authentication
<ul>
<li>Allows you to view the Security and Authentication configuration of the TAK Server.  Used to configure certificate enrollment or AD/LDAP authentication backend</li>
</ul>
</li>
</ul>
</li>
<li><strong>Administrative</strong>
<ul>
<li>Database
<ul>
<li>Views the database configuration and allows for database maintenance</li>
</ul>
</li>
<li>Data Retention
<ul>
<li>Allows you to configure CoT retention policies and archive missions to manage database storage usage</li>
</ul>
</li>
<li>Manage Users
<ul>
<li>Used for managing users and groups using the flat file authentication method which is used by default</li>
</ul>
</li>
<li>Client Certificates
<ul>
<li>Used to manage client certificates issued through certificate enrollment</li>
</ul>
</li>
<li>Device Logs
<ul>
<li>When configured at the client level, allows for debug and error logs to be uploaded to the TAK Server for centralized logging</li>
</ul>
</li>
<li>Device Profiles
<ul>
<li>Allows you to create specific profiles to push Data Packages and configurations to specific groups either at enrollment or connection</li>
</ul>
</li>
<li>File Config
<ul>
<li>Allows you to adjust the upload file size limit to the TAK Server</li>
</ul>
</li>
<li>VBM Configuration
<ul>
<li>VisiBellum MCS (VBM) for use with external COP Managers</li>
</ul>
</li>
</ul>
</li>
<li><strong>Monitoring</strong>
<ul>
<li>Alarms
<ul>
<li>Allows you to view and manage Alerts set to the TAK Server</li>
</ul>
</li>
<li>Metrics Dashboard
<ul>
<li>Default splash page when logging into the TAK Server, used to view system resources</li>
</ul>
</li>
<li>Client Dashboard
<ul>
<li>Allows you to view details about connected clients, federations, and subscriptions</li>
</ul>
</li>
</ul>
</li>
<li><strong>Plugins</strong>
<ul>
<li>Displays any installed TAK Server plugins</li>
</ul>
</li>
</ul>
<h1 id="managing-users-and-groups">Managing Users and Groups</h1><p>This is the most common task that as an administrator we will be performing.  We must understand that we have two methods of managing our users and groups.  We have the <code>makeCert.sh</code> and  <code>UserManager.jar</code> which we have used already, the other is using the <code>Manage Users</code> dashboard.  With the <code>makeCert.sh</code> we are creating "soft" certificates which are manually generated followed by the <code>UserManager.jar </code>placing that certificate in a group.  The other method is using certificate enrollment where the client gets its certificate directly from the server and is placed in the group automatically.  Furthermore, you have the option of placing the certificate or user in an <code>inGroup</code> or <code>outGroup</code> individually.  More detailed information regarding users and groups can be found <a href="https://mytecknet.com/managing-users-and-groups/">here</a>.</p><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://mytecknet.com/managing-users-and-groups/"><div class="kg-bookmark-content"><div class="kg-bookmark-title">Managing users and groups in TAK</div><div class="kg-bookmark-description">Manage users and groups within a TAK Server using the local user and group manager or integrate your TAK Server into an AD/LDAP environment.</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="./Let&#39;s Build a TAK Server_files/LogoOnly_20230301_01.png" alt=""><span class="kg-bookmark-author">myTeckNet</span><span class="kg-bookmark-publisher">JR</span></div></div><div class="kg-bookmark-thumbnail"><img src="./Let&#39;s Build a TAK Server_files/TAKGroups.png" alt="" onerror="this.style.display = &#39;none&#39;"></div></a></figure><h2 id="soft-certificate-management">Soft Certificate Management</h2><p>To generate certificates using this method, we will follow the same sequence used in <a href="https://mytecknet.com/lets-build-a-tak-server/#creating-the-admin-certificate" rel="noreferrer">creating the admin certificate</a>.  To create a client certificate we first need to go into the <code>tak</code> user and navigate to the <code>/opt/tak/certs/</code> directory.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Switch to the tak user</span>
<span class="token function">sudo</span> <span class="token function">su</span> tak

<span class="token comment"># Navigate to the /opt/tak/certs directory</span>
<span class="token builtin class-name">cd</span> /opt/tak/certs</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><p>Once we are in this directory we will use the <code>makeCert.sh</code> script to create another client certificate.  The basic syntax for this task is <code>./makeCert.sh client &lt;commonname&gt;</code>.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Create client certificates</span>
./makeCert.sh client <span class="token operator">&lt;</span>commonName<span class="token operator">&gt;</span>

<span class="token comment"># EXAMPLE</span>
./makeCert.sh client wintak</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><p>Once our certificate is created we need to use <code>UserManager.jar</code> to allow us to manage it in the <code>Marti</code> web dashboard.  This time our syntax will be <code>java -jar /opt/tak/utils/UserManager.jar certmod -g &lt;group&gt; /opt/tak/certs/files/&lt;commonname&gt;</code>.  Below we are going to add the <code>wintak</code> client to the <code>__ANON__</code> group.</p><div class="kg-card kg-callout-card kg-callout-card-grey"><div class="kg-callout-emoji">📓</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Note</strong></b>: The <b><strong style="white-space: pre-wrap;">ANON </strong></b>group is identified by the double underscore at the beginning and end of the name. This is also the default group that clients are tied to if you do not complete this step. Additionally, they will not be available in the <code spellcheck="false" style="white-space: pre-wrap;">Marti</code> web dashboard.</div></div><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Add the client to a group</span>
<span class="token function">java</span> <span class="token parameter variable">-jar</span> /opt/tak/utils/UserManager.jar certmod <span class="token parameter variable">-g</span> __ANON__ /opt/tak/certs/files/<span class="token operator">&lt;</span>commonName<span class="token operator">&gt;</span>

<span class="token comment"># EXAMPLE</span>
<span class="token comment"># java -jar /opt/tak/utils/UserManager.jar certmod -g __ANON__ /opt/tak/certs/files/wintak.pem</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-42.png" class="kg-image" alt="" loading="lazy" width="1103" height="479" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-42.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-42.png 1000w, https://mytecknet.com/content/images/2023/12/image-42.png 1103w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Creating a client certificate using makeCert.sh client switch</span></figcaption></figure><p>This completes the basic creation of a user soft certificate; however, we need to copy it to our home directory so that we can move it to our administrative workstation.  Additionally, we are going to copy over an extra file which is our TAK Servers public certificate file.  If you are following along this should be <code>truststore-TAK-ID-CA-01</code>.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Exit the tak user account</span>
<span class="token builtin class-name">exit</span>

<span class="token comment"># Change directory back to our home directory</span>
<span class="token builtin class-name">cd</span> ~

<span class="token comment"># Copy our client certificate and public CA certificate</span>
<span class="token function">sudo</span> <span class="token function">cp</span> <span class="token parameter variable">-v</span> /opt/tak/certs/files/wintak.p12 <span class="token builtin class-name">.</span>
<span class="token function">sudo</span> <span class="token function">cp</span> <span class="token parameter variable">-v</span> /opt/tak/certs/files/truststore-TAK-ID-CA-01.p12 <span class="token builtin class-name">.</span>

<span class="token comment"># Restore ownership to our home directory</span>
<span class="token function">sudo</span> <span class="token function">chown</span> <span class="token parameter variable">-R</span> takadmin:takadmin /home/takadmin</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-44.png" class="kg-image" alt="" loading="lazy" width="1101" height="193" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-44.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-44.png 1000w, https://mytecknet.com/content/images/2023/12/image-44.png 1101w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Moving our client certificate and changing the ownership</span></figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-43.png" class="kg-image" alt="" loading="lazy" width="1101" height="138" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-43.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-43.png 1000w, https://mytecknet.com/content/images/2023/12/image-43.png 1101w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Copying the client and truststore certificate from Linux to our workstation</span></figcaption></figure><h2 id="certificate-autoenrollment">Certificate AutoEnrollment</h2><p>This process involves changing some configurations in our TAK Server to issue certificates to clients upon successful authentication.  For our authentication source, we will use the TAK Server to store our client credentials.  To begin the configuration we need to determine who our signing authority is and select an appropriate truststore file. </p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Identify our signing truststore</span>
<span class="token function">ls</span> <span class="token parameter variable">-l</span> /opt/tak/certs/files/*-signing.jks</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-48.png" class="kg-image" alt="" loading="lazy" width="1097" height="62" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-48.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-48.png 1000w, https://mytecknet.com/content/images/2023/12/image-48.png 1097w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Determining our issuing CA truststore</span></figcaption></figure><p>Next, open the <code>Marti</code> dashboard and navigate to <code>Configuration</code> &gt; <code>Security and Authentication</code>.  Under <code>Security Configuration</code>, select <code>Edit Security</code>.  Check the <code>Enable Certificate Enrollment</code> and from the options click on <code>TAK Server CA</code>.  Enter the following configuration information:</p><ul>
<li><strong>Signing Keystore File</strong> = certs/files/<code>&lt;CACommonName&gt;</code>-signing.jks</li>
<li><strong>Signing Keystore Password</strong> = default <code>atakatak</code> or the password defined within the cert-metadata.sh file</li>
<li><strong>Validity Days</strong> = Enter the days the certificate is to be valid for.  When the certificate period has passed the client will have to re-enter their credentials to request a new certificate</li>
</ul>
<figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-46.png" class="kg-image" alt="" loading="lazy" width="1626" height="929" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-46.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-46.png 1000w, https://mytecknet.com/content/images/size/w1600/2023/12/image-46.png 1600w, https://mytecknet.com/content/images/2023/12/image-46.png 1626w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Marti - Security Configuration</span></figcaption></figure><p>After reviewing the configuration changes, click on <code>Submit</code> to apply the changes immediately.  What this does is append new elements in our <code>CoreConfig.xml</code> file identified by the <code>certificateSigning</code> block.  We can see this change below.  In this block, we identify the intended <code>CA</code> as the <code>TAKServer</code>.  Under  <code>nameEntries</code> the default values for <code>Organization</code> and <code>Organizational Unit</code> are <code>TAK</code>.  This means our certificate subject would have <code>OU=TAK, O=TAK</code>.  Recall in our <code>cert-metadata.sh</code> we also assigned these values.  To maintain some consistency in our environment we may want to modify these values.  To change these values we will need to edit the <code>CoreConfig.xml</code> file directly as the <code>tak</code> user, and after we have made our changes we must restart the <code>takserver.service</code>.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-47.png" class="kg-image" alt="" loading="lazy" width="1108" height="189" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-47.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-47.png 1000w, https://mytecknet.com/content/images/2023/12/image-47.png 1108w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">CoreConfig.xml certificateSigning element</span></figcaption></figure><p>To change these settings execute the following steps:</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Enter the tak user</span>
<span class="token function">sudo</span> <span class="token function">su</span> tak

<span class="token comment"># Change directories to the tak directory</span>
<span class="token builtin class-name">cd</span> /opt/tak

<span class="token comment"># Edit the CoreConfig.xml</span>
<span class="token function">vi</span> CoreConfig.xml</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><p>In the <code>CoreConfig.xml</code>, using the arrow keys to navigate down to the start of the <code>certificateSigning</code> element.  Another method is to use the <a href="https://linuxize.com/post/vim-search/?ref=mytecknet.com">search function</a> within <code>vi/vim</code>.  When opening the file using <code>vi/vim</code>, use the <code>/</code> key and type <code>certificateSigning</code> and it will bring you to the first instance of the searched value.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-49.png" class="kg-image" alt="" loading="lazy" width="1109" height="575" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-49.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-49.png 1000w, https://mytecknet.com/content/images/2023/12/image-49.png 1109w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Using the search function within vi/vim</span></figcaption></figure><p>Replace instances of TAK within the <code>nameEntry</code> as required.  You can add additional <code>nameEntry</code> for <code>OU</code> as required to match your environment.  In the below example, certificates will be issued as <code>CN=XXX,OU=TAK,OU=Users,O=myTecknet</code>.</p><div class="kg-card kg-callout-card kg-callout-card-red"><div class="kg-callout-emoji">‼️</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Caution</strong></b>: There is a bug with iTAK/iTAK Tracker when using multiple OU <code spellcheck="false" style="white-space: pre-wrap;">nameEntry</code> values as seen below. If you have iTAK/iTAK Tracker within your environment, do not add additional OU <code spellcheck="false" style="white-space: pre-wrap;">nameEntry</code> values.</div></div><div class="code-toolbar"><pre class="language-xml" tabindex="0"><code class="language-xml">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>certificateSigning</span> <span class="token attr-name">CA</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>TAKServer<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>certificateConfig</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nameEntries</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nameEntry</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>O<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myTeckNet<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nameEntry</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>OU<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>TAK<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nameEntry</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>OU<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Users<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nameEntries</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>certificateConfig</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TAKServerCAConfig</span> <span class="token attr-name">keystore</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>JKS<span class="token punctuation">"</span></span> <span class="token attr-name">keystoreFile</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>certs/files/TAK-ID-CA-01-signing.jks<span class="token punctuation">"</span></span> <span class="token attr-name">keystorePass</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>atakatak<span class="token punctuation">"</span></span> <span class="token attr-name">validityDays</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30<span class="token punctuation">"</span></span> <span class="token attr-name">signatureAlg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>SHA256WithRSA<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>certificateSigning</span><span class="token punctuation">&gt;</span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><p>One additional <strong>important</strong> value we want to add is <code>CAkey</code> and <code>CAcertificate</code> to the <code>TAKServerCAConfig</code> element.  The <code>CAkey</code> and <code>CAcertificate</code> require the <strong>full path</strong> to the CA; otherwise, it will not update the <code>CRL</code> referenced later on.  Replace <code>CAcommonName</code> with the CA configured used in the <code>makeCert.sh ca &lt;CAcommonName&gt;</code> command.</p><p>&lt;TAKServerCAConfig keystore="JKS" keystoreFile="certs/files/TAK-ID-CA-01-signing.jks" keystorePass="atakatak" validityDays="30" signatureAlg="SHA256WithRSA" <strong>CAkey="/opt/tak/certs/files/&lt;CAcommonName&gt;" CAcertificate="/opt/tak/certs/files/&lt;CAcommonName&gt;"</strong>/&gt;</p>
<div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Add the CAkey and CAcertificate values to support certificate revocations</span>
<span class="token operator">&lt;</span>TAKServerCAConfig <span class="token assign-left variable">keystore</span><span class="token operator">=</span><span class="token string">"JKS"</span> <span class="token assign-left variable">keystoreFile</span><span class="token operator">=</span><span class="token string">"certs/files/TAK-ID-CA-01-signing.jks"</span> <span class="token assign-left variable">keystorePass</span><span class="token operator">=</span><span class="token string">"atakatak"</span> <span class="token assign-left variable">validityDays</span><span class="token operator">=</span><span class="token string">"30"</span> <span class="token assign-left variable">signatureAlg</span><span class="token operator">=</span><span class="token string">"SHA256WithRSA"</span> <span class="token assign-left variable">CAkey</span><span class="token operator">=</span><span class="token string">"/opt/tak/certs/files/&lt;CAcommonName&gt;"</span> <span class="token assign-left variable">CAcertificate</span><span class="token operator">=</span><span class="token string">"/opt/tak/certs/files/&lt;CAcommonName&gt;"</span>/<span class="token operator">&gt;</span>

<span class="token comment"># EXAMPLE</span>
<span class="token comment"># &lt;TAKServerCAConfig keystore="JKS" keystoreFile="certs/files/TAK-ID-CA-01-signing.jks" keystorePass="atakatak" validityDays="30" signatureAlg="SHA256WithRSA" CAkey="/opt/tak/certs/files/TAK-ID-CA-01" CAcertificate="/opt/tak/certs/files/TAK-ID-CA-01"/&gt;</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-45.png" class="kg-image" alt="" loading="lazy" width="1104" height="304" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-45.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-45.png 1000w, https://mytecknet.com/content/images/2024/01/image-45.png 1104w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Highlighted CAkey and CAcertificate attributes set</span></figcaption></figure><p>Finally, to apply for revoked certificate checking we need to add the following <code>x509checkRevocation="true"</code> to our <code>&lt;auth&gt;</code> element within the CoreConfig.xml.  This and the values above are not added automatically when configuring certificate autoenrollment and play a key role in revoking certificates covered later on. </p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-43(1).png" class="kg-image" alt="" loading="lazy" width="1111" height="264" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-43.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-43.png 1000w, https://mytecknet.com/content/images/2024/01/image-43.png 1111w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">x509checkRevocation="true"</span></figcaption></figure><p>After we have made our changes and saved them we should check that our <code>CoreConfig.xml</code> validates.  To do this we can issue the <code>./validateConfig.sh</code> from within the <code>/opt/tak/</code> directory.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-50.png" class="kg-image" alt="" loading="lazy" width="1101" height="134" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-50.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-50.png 1000w, https://mytecknet.com/content/images/2023/12/image-50.png 1101w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Validating our CoreConfig.xml file</span></figcaption></figure><div class="kg-card kg-callout-card kg-callout-card-grey"><div class="kg-callout-emoji">📓</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Note</strong></b>: <code spellcheck="false" style="white-space: pre-wrap;">validateConfig.sh</code> is a very underutilized tool in many TAK deployments. When making changes to the <code spellcheck="false" style="white-space: pre-wrap;">CoreConfig.xml</code> directly it is recommended to run this command before restarting the <code spellcheck="false" style="white-space: pre-wrap;">takserver.service</code> to prevent unnecessary troubleshooting.</div></div><p>If the CoreConfig validates, restart the <em>takserver.service</em> and monitor the log to ensure that the takserver has started properly.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Exit the tak user</span>
<span class="token builtin class-name">exit</span>

<span class="token comment"># Restart the takserver.service</span>
<span class="token function">sudo</span> systemctl restart takserver.service

<span class="token comment"># Monitor the log for errors</span>
<span class="token function">tail</span> <span class="token parameter variable">-f</span> /opt/tak/logs/takserver-messaging.log</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-51.png" class="kg-image" alt="" loading="lazy" width="1100" height="455" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-51.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-51.png 1000w, https://mytecknet.com/content/images/2023/12/image-51.png 1100w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Restarting our takserver.service</span></figcaption></figure><div class="kg-card kg-callout-card kg-callout-card-green"><div class="kg-callout-emoji">👀</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Attention</strong></b>: If you noticed we applied these changes directly to the <code spellcheck="false" style="white-space: pre-wrap;">CoreConfig.xml</code> and not the <code spellcheck="false" style="white-space: pre-wrap;">CoreConfig.example.xml</code>. This ensures that if we ever delete the <code spellcheck="false" style="white-space: pre-wrap;">CoreConfig.xml</code> we have a working backup. If you have a working <code spellcheck="false" style="white-space: pre-wrap;">CoreConfig.xml</code> that you want to convert to a known good, either copy the new contents to the <code spellcheck="false" style="white-space: pre-wrap;">CoreConfig.example.xml</code> or copy the <code spellcheck="false" style="white-space: pre-wrap;">CoreConfig.xml</code> to <code spellcheck="false" style="white-space: pre-wrap;">CoreConfig.example.xml</code> directly overwriting the original. #LivingontheEdge</div></div><h3 id="enrolling-clients">Enrolling clients</h3><p>With <code>Certificate Enrollment</code> configured the next step is to start managing users.  This will be done via the <code>Manage User UI</code> under the <code>Administrative</code> menu in the administrative dashboard.  To create a user/client click on <code>Add User</code> and fill in the <code>Username</code>, <code>Password</code>, and <code>Group</code> information.  Once complete click on <code>Create New User</code> to create and apply the changes.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-66.png" class="kg-image" alt="" loading="lazy" width="1626" height="593" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-66.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-66.png 1000w, https://mytecknet.com/content/images/size/w1600/2023/12/image-66.png 1600w, https://mytecknet.com/content/images/2023/12/image-66.png 1626w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Manage Users UI</span></figcaption></figure><p>More detailed information on users and groups can be found <a href="https://mytecknet.com/managing-users-and-groups/">here</a>.</p><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://mytecknet.com/managing-users-and-groups/"><div class="kg-bookmark-content"><div class="kg-bookmark-title">Managing users and groups in TAK</div><div class="kg-bookmark-description">Manage users and groups within a TAK Server using the local user and group manager or integrate your TAK Server into an AD/LDAP environment.</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="./Let&#39;s Build a TAK Server_files/LogoOnly_20230301_01.png" alt=""><span class="kg-bookmark-author">myTeckNet</span><span class="kg-bookmark-publisher">JR</span></div></div><div class="kg-bookmark-thumbnail"><img src="./Let&#39;s Build a TAK Server_files/TAKGroups.png" alt="" onerror="this.style.display = &#39;none&#39;"></div></a></figure><p>The certificate enrollment process is communicated to the TAK Server over TCP port 8446.  This port is not enabled by default and must be added manually.  In Rocky Linux/RHEL, we can do this using the <code>firewall-cmd</code>, whereas Ubuntu/Raspberry Pi OS is executed using <code>ufw</code>.</p><p><strong>Rocky Linux/RHEL 8</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Allow 8446/TCP - Certificate Enrollment Port</span>
<span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port <span class="token number">8446</span>/tcp <span class="token parameter variable">--permanent</span>

<span class="token comment"># Reload firewall to apply changes</span>
<span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--reload</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-73.png" class="kg-image" alt="" loading="lazy" width="1107" height="383" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-73.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-73.png 1000w, https://mytecknet.com/content/images/2023/12/image-73.png 1107w" sizes="(min-width: 720px) 720px"></figure><p><strong>Ubuntu/Raspberry Pi OS</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Allow 8446/TCP - Certificate Enrollment Port</span>
<span class="token function">sudo</span> ufw allow <span class="token number">8446</span>/tcp

<span class="token comment"># View ufw state and status</span>
<span class="token function">sudo</span> ufw status</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-72.png" class="kg-image" alt="" loading="lazy" width="1108" height="363" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-72.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-72.png 1000w, https://mytecknet.com/content/images/2023/12/image-72.png 1108w" sizes="(min-width: 720px) 720px"></figure><p>To enroll clients using this method we need to install the TAK Server's certificate authority certificate (<code>Install Certificate Authority</code>) and provide the user credentials.  Additionally, we need to check the two checkboxes: <code>Enroll for Client Certificate</code> and <code>Use Authentication</code>.  Enter the <code>username</code> and <code>password</code> and click <code>OK</code>.  If prompted again enter the credentials a second time.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-71.png" class="kg-image" alt="" loading="lazy" width="343" height="482"><figcaption><span style="white-space: pre-wrap;">WinTAK - Manage Server Connections</span></figcaption></figure><p>At the bottom, a status bar will cycle until a certificate is generated and issued to the client.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-22(1).png" class="kg-image" alt="" loading="lazy" width="340" height="48"><figcaption><span style="white-space: pre-wrap;">Certificate enrollment status</span></figcaption></figure><p>Upon successful enrollment, the client certificates can be inventoried under the, <code>Administrative</code> &gt; <code>Client Certificates</code> menu.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-23(1).png" class="kg-image" alt="" loading="lazy" width="1917" height="588" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-23.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-23.png 1000w, https://mytecknet.com/content/images/size/w1600/2024/01/image-23.png 1600w, https://mytecknet.com/content/images/2024/01/image-23.png 1917w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Client Certificates</span></figcaption></figure><h2 id="revoking-certificates">Revoking Certificates</h2><p>Revoking a certificate is used when we want to prevent access to a client before the certificate expiration date or when a client no longer requires access.  To revoke a certificate we need to know some information about the certificate: what is the certificate's common name, who signed the certificate, and the private key associated with the signing certificate authority.  To determine this we can view the contents of the certificate we wish to revoke using the <code>openssl</code> command.  The basic syntax for our command is: <code>openssl x509 -text -in /opt/tak/certs/files/&lt;commonName&gt;.pem | grep -Eo "Issuer:.+"</code>.</p><div class="kg-card kg-callout-card kg-callout-card-green"><div class="kg-callout-emoji">👀</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Attention</strong></b>: The following steps are for certificates that are created using the <code spellcheck="false" style="white-space: pre-wrap;">makeCert.sh client</code> command.</div></div><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Determine certificate issuing signing certificate authority</span>
openssl x509 <span class="token parameter variable">-text</span> <span class="token parameter variable">-in</span> /opt/tak/certs/files/<span class="token operator">&lt;</span>commonName<span class="token operator">&gt;</span>.pem <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-Eo</span> <span class="token string">"Issuer:.+"</span>

<span class="token comment"># EXAMPLE</span>
<span class="token comment"># openssl x509 -text -in /opt/tak/certs/files/revokedClient.pem | grep -Eo "Issuer:.+"</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-52.png" class="kg-image" alt="" loading="lazy" width="1098" height="60" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-52.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-52.png 1000w, https://mytecknet.com/content/images/2023/12/image-52.png 1098w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Viewing our certificate issuing CA information</span></figcaption></figure><p>We see that the <code>TAK-ID-CA-01</code> CA is who signed our certificate to revoke.  Now that we know this we can revoke it.  Our first step is to change into the <code>tak</code> user and navigate to the certs directory - <code>/opt/tak/certs/</code>.  Next, we will issue the <code>revokeCert.sh</code> command.   The basic syntax for this command is: <code>./revokeCert.sh &lt;pathtoCert&gt; &lt;pathtoCAKey&gt; &lt;pathtoCA&gt;</code>.</p><div class="kg-card kg-callout-card kg-callout-card-grey"><div class="kg-callout-emoji">📓</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Note</strong></b>: The previous step is not required as the TAK Server certificate scripts make it easy to use the same command to revoke certificates without having to perform the step to discover who issued the certificate. It is good to know these steps in case your environment setup differs from the basic installation.</div></div><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Change to the tak user</span>
<span class="token function">sudo</span> <span class="token function">su</span> tak

<span class="token comment"># Change directories to the certificate directory</span>
<span class="token builtin class-name">cd</span> /opt/tak/certs

<span class="token comment"># Revoke our target certificate</span>
./revokeCert.sh /opt/tak/certs/files/<span class="token operator">&lt;</span>commonName<span class="token operator">&gt;</span> /opt/tak/certs/files/ca-do-not-share /opt/tak/certs/files/ca

<span class="token comment"># EXAMPLE</span>
./revokeCert.sh /opt/tak/certs/files/revokedClient /opt/tak/certs/files/ca-do-not-share /opt/tak/certs/files/ca</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-56.png" class="kg-image" alt="" loading="lazy" width="1107" height="152" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-56.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-56.png 1000w, https://mytecknet.com/content/images/2023/12/image-56.png 1107w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Revoking a client certificate example</span></figcaption></figure><p>After we revoke our certificate we may want to view the CRL to verify our revoked certificate.</p><h3 id="client-certificate-ui">Client Certificate UI</h3><p>If you configured the TAK Server for <a href="https://mytecknet.com/lets-build-a-tak-server/#certificate-autoenrollment" rel="noreferrer">certificate autoenrollment</a> we can revoke client certificates from the <code>Client Certificate UI</code>.  When you click on a certificate to revoke you will get a warning about restarting the TAK Server service to update the CRL.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-41(1).png" class="kg-image" alt="" loading="lazy" width="1920" height="390" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-41.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-41.png 1000w, https://mytecknet.com/content/images/size/w1600/2024/01/image-41.png 1600w, https://mytecknet.com/content/images/2024/01/image-41.png 1920w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Revoke Certificate Warning</span></figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-42(1).png" class="kg-image" alt="" loading="lazy" width="1920" height="392" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-42.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-42.png 1000w, https://mytecknet.com/content/images/size/w1600/2024/01/image-42.png 1600w, https://mytecknet.com/content/images/2024/01/image-42.png 1920w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Certificate Revoked</span></figcaption></figure><p>Once the certificate is revoked the client will begin to cycle on connect and disconnect.  When we inspect the <code>takserver-messaging.log</code> we have the following notifying us that a revoked certificate attempted to connect and is denied.</p><ul>
<li>2024-01-17-20:26:27.758 [epollEventLoopGroup-4-1] ERROR c.b.m.nio.codec.impls.X509AuthCodec - X509 auth exception info: CN: myTeckNet. Message: <strong>Attempt to use revoked certificate</strong> : OU=TAK,O=TAK,CN=myTeckNet<br>
com.bbn.marti.remote.exception.RevokedException: Attempt to use revoked certificate : OU=TAK,O=TAK,CN=myTeckNet<br>
at com.bbn.marti.groups.X509Authenticator.auth(X509Authenticator.java:134)<br>
...</li>
<li>2024-01-17-20:26:27.760 [epollEventLoopGroup-4-1] ERROR c.b.m.nio.codec.impls.X509AuthCodec - TakException in doTlsAuth Attempt to use revoked certificate : OU=TAK,O=TAK,CN=myTeckNet<br>
com.bbn.marti.remote.exception.RevokedException: <strong>Attempt to use revoked certificate</strong> : OU=TAK,O=TAK,CN=myTeckNet<br>
at com.bbn.marti.groups.X509Authenticator.auth(X509Authenticator.java:134)<br>
...</li>
</ul>
<p>Additionally, you will see that the TAK Server attempts to add the client subscription, and then immediately removes it, incrementing the id=tls every time.</p>
<ul>
<li>2024-01-17-20:45:07.106 [epollEventLoopGroup-4-2] INFO c.b.m.s.DistributedSubscriptionManager - Added Subscription: id=tls:19 source=192.168.178.177</li>
<li>2024-01-17-20:45:07.108 [takserver-scheduled-1] INFO c.b.m.s.DistributedSubscriptionManager - Removed Subscription: tls:19</li>
</ul>
<h3 id="certificate-revocation-list">Certificate Revocation List</h3><p>Our CRL contains a list of revoked certificates expected by our CA.  To view the contents of this CRL we can use the <code>openssl</code> to view its contents.  To view the CRL execute the following command: <code>openssl crl -in &lt;pathtoCRL&gt; -inform PEM -text -noout</code>.</p><div class="kg-card kg-callout-card kg-callout-card-green"><div class="kg-callout-emoji">👀</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Attention</strong></b>: The following steps are for certificates that are created using the <code spellcheck="false" style="white-space: pre-wrap;">makeCert.sh client</code> command.</div></div><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># View the contents of the CRL file</span>
openssl crl <span class="token parameter variable">-in</span> /opt/tak/certs/files/ca.crl <span class="token parameter variable">-inform</span> PEM <span class="token parameter variable">-text</span> <span class="token parameter variable">-noout</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-57.png" class="kg-image" alt="" loading="lazy" width="1110" height="575" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-57.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-57.png 1000w, https://mytecknet.com/content/images/2023/12/image-57.png 1110w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Viewing the certificate revocation list (CRL) information</span></figcaption></figure><p>Cross-reference the serial of our revoked certificate with the list of revoked certificates.  If you have a large list of revoked certificates use grep to search for your revoked certificate serial number.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># View the contents of the CRL file</span>
openssl <span class="token parameter variable">-crl</span> <span class="token parameter variable">-in</span> /opt/tak/certs/files/ca.crl <span class="token parameter variable">-inform</span> PEM <span class="token parameter variable">-text</span> <span class="token parameter variable">-noout</span>

<span class="token comment"># Search list for a revoked certificate</span>
openssl <span class="token parameter variable">-crl</span> <span class="token parameter variable">-in</span> /opt/tak/certs/files/ca.crl <span class="token parameter variable">-inform</span> PEM <span class="token parameter variable">-text</span> <span class="token parameter variable">-noout</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token operator">&lt;</span>revokedSN<span class="token operator">&gt;</span>

<span class="token comment"># EXAMPLE</span>
<span class="token comment"># openssl -crl -in /opt/tak/certs/files/ca.crl -inform PEM -text -noout | grep 241D</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-58.png" class="kg-image" alt="" loading="lazy" width="1101" height="58" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-58.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-58.png 1000w, https://mytecknet.com/content/images/2023/12/image-58.png 1101w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Viewing CRL-specific information for a certificate serial number</span></figcaption></figure><p>After we have revoked our certificate and verified the revoked certificate we need to publish this revoked certificate to our TAK Server.  To do this we need to add a line to our configuration before the end of the security element in the <code>CoreConfig.xml</code> to point to the CRL file.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Switch user to the tak user</span>
<span class="token function">sudo</span> <span class="token function">su</span> tak

<span class="token comment"># Change directories to the tak directory</span>
<span class="token builtin class-name">cd</span> /opt/tak

<span class="token comment"># Edit the CoreConfig.xml</span>
<span class="token function">vi</span> CoreConfig.xml</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><p>Within the <code>CoreConfig.xml</code> we need to look for this element and modify it.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-59.png" class="kg-image" alt="" loading="lazy" width="1108" height="381" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-59.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-59.png 1000w, https://mytecknet.com/content/images/2023/12/image-59.png 1108w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Standard TLS element without the CRL element</span></figcaption></figure><p>At the end of the <code>tls</code> element we need to remove the <code>/</code> after the <code>keymanager="SunX509</code> attribute to break the <code>tls</code> element.  In a new line add <code>&lt;crl _name="TAKServer CA" crlFile="certs/files/ca.crl"/&gt;&lt;/tls&gt;</code>.  Replace <code>ca.crl</code> with the name of our issuing <code>CAcommonName</code>.  Hint this is the same <code>CAcommonName</code> used in the <code>makeCert.sh ca &lt;CAcommonName&gt;</code> command.</p><figure class="kg-card kg-code-card"><div class="code-toolbar"><pre class="language-xml" tabindex="0"><code class="language-xml"># CRL element
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>crl</span> <span class="token attr-name">_name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>TAKServer CA<span class="token punctuation">"</span></span> <span class="token attr-name">crlFile</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>certs/files/ca.crl<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>

# EXAMPLE
# <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>crl</span> <span class="token attr-name">_name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>TAKServer CA<span class="token punctuation">"</span></span> <span class="token attr-name">crlFile</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>certs/files/TAK-ID-CA-01.crl<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figcaption><p><span style="white-space: pre-wrap;">Standard CRL element syntax</span></p></figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-46(1).png" class="kg-image" alt="" loading="lazy" width="1104" height="360" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-46.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-46.png 1000w, https://mytecknet.com/content/images/2024/01/image-46.png 1104w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Modified TLS element with the CRL element</span></figcaption></figure><p>Review and save the changes to write to the <code>CoreConfig.xml</code> file.  Run the <code>validateConfig.sh</code> to ensure our <code>CoreConfig.xml</code> checks out.  If everything validates, exit out of <code>tak</code> restart the <code>takserver.service</code> and monitor the logs for any errors.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-51.png" class="kg-image" alt="upload in progress, 0" loading="lazy" width="1100" height="455" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-51.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-51.png 1000w, https://mytecknet.com/content/images/2023/12/image-51.png 1100w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Restarting our takserver.service</span></figcaption></figure><p>Now that we have a general understanding of how to manage our client certificates.</p><div class="kg-card kg-callout-card kg-callout-card-grey"><div class="kg-callout-emoji">📓</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Note</strong></b>: If a client no longer requires access the procedure is to revoke the certificate, then delete the user account to prevent future authentication attempts.</div></div><h1 id="updating-the-tak-server">Updating the TAK Server</h1><p>To update the TAK Server when a new release is published start by transferring the update to the TAK Server and then executing the installation command: </p><p><strong>Rocky Linux/RHEL 8</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Update TAK Server 5.0R29 to R*</span>
<span class="token function">sudo</span> dnf <span class="token function">install</span> takserver-5.0-RELEASE*.noarch.rpm <span class="token parameter variable">--setopt</span><span class="token operator">=</span>clean_requirements_on_remove<span class="token operator">=</span>false <span class="token parameter variable">-y</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-27(1).png" class="kg-image" alt="" loading="lazy" width="1097" height="378" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-27.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-27.png 1000w, https://mytecknet.com/content/images/2024/01/image-27.png 1097w" sizes="(min-width: 720px) 720px"></figure><p><strong>Ubuntu/Raspberry Pi OS</strong></p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Update the TAK Server on Ubuntu/Raspberry Pi OS</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> ./takserver-5.0-RELEASEx_all.deb</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-31(1).png" class="kg-image" alt="" loading="lazy" width="1098" height="252" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-31.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-31.png 1000w, https://mytecknet.com/content/images/2024/01/image-31.png 1098w" sizes="(min-width: 720px) 720px"></figure><p>After the update is completed we need to reload the service manager followed by restarting the <code>takserver.service</code>.</p><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Reload the system manager</span>
<span class="token function">sudo</span> systemctl daemon-reload

<span class="token comment"># Restart the TAK Server</span>
<span class="token function">sudo</span> systemctl restart takserver</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-29(1).png" class="kg-image" alt="" loading="lazy" width="1099" height="216" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-29.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-29.png 1000w, https://mytecknet.com/content/images/2024/01/image-29.png 1099w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Rocky Linux/RHEL 8 Example</span></figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-32(1).png" class="kg-image" alt="" loading="lazy" width="1097" height="61" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-32.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-32.png 1000w, https://mytecknet.com/content/images/2024/01/image-32.png 1097w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">Ubuntu/Raspberry Pi OS Example</span></figcaption></figure><div class="code-toolbar"><pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># Stream the log to find errors</span>
<span class="token function">sudo</span> <span class="token function">tail</span> <span class="token parameter variable">-f</span> /opt/tak/logs/takserver-messaging.log</code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" data-copy-state="copy"><span>Copy</span></button></div></div></div><figure class="kg-card kg-image-card"><img src="./Let&#39;s Build a TAK Server_files/image-30(1).png" class="kg-image" alt="" loading="lazy" width="1101" height="574" srcset="https://mytecknet.com/content/images/size/w600/2024/01/image-30.png 600w, https://mytecknet.com/content/images/size/w1000/2024/01/image-30.png 1000w, https://mytecknet.com/content/images/2024/01/image-30.png 1101w" sizes="(min-width: 720px) 720px"></figure><p>This completes the update of the TAK Server.</p><h1 id="connecting-tak-clients">Connecting TAK Clients</h1><p>A standard client connection requires the TAK Server public CA certificate and an issued client certificate for secure connections using the SSL protocol under TCP port 8089.  The additional port 8443 is the secure API port for client-to-server communication for configuration updates.  When using certificate autoenrollment the client certificate request is sent to TCP port 8446 and 8443 before establishing the connection over 8089.</p><div class="kg-card kg-callout-card kg-callout-card-grey"><div class="kg-callout-emoji">📓</div><div class="kg-callout-text"><b><strong style="white-space: pre-wrap;">Note</strong></b>: The ports listed are the default ports and the connections. Using non-standard ports requires additional configuration and is not covered within this guide.</div></div><h2 id="windows-tak-wintak">Windows TAK (WinTAK)</h2><p>Launch the WinTAK application and progress through the first run procedures.</p>
<ul>
<li>Once completed select the hamburger menu (≡) from the top left and select <code>Settings</code> &gt; <code>Network Preferences</code> &gt; <code>Manage Server Connections</code></li>
<li>Click <code>Add Item</code> to add a new server connection.  Alternatively, we can click the red cloud (☁️) at the bottom right, our TAK Network Status icon</li>
<li>Add a description under <code>Description</code>, such as department or unit</li>
<li>Keep <code>SSL</code> under <code>Protocol</code> and enter the TAK Server information under <code>Host Address</code>.  The <code>Host Address</code> can accept an IP Address or a fully qualified domain name or hostname
<ul>
<li>Keep the Port information of 8089, this is our default client-to-server connection port</li>
</ul>
</li>
<li>Under <code>Certificates</code>, click on <code>Install Certificate Authority</code> to install the TAK Server public certificate truststore
<ul>
<li>For example, this is the <em>truststore-TAK-ID-CA-01.p12</em> we downloaded earlier</li>
</ul>
</li>
<li>Click on <code>Install Client Certificate</code> and select our client certificate to install
<ul>
<li>For example, this is the <em>wintak.p12</em> we downloaded earlier</li>
</ul>
</li>
</ul>
<p>Once we have entered all the required information we can click <code>Ok</code> and we should see that we are connected to our TAK Server.</p>
<figure class="kg-card kg-video-card kg-width-regular kg-card-hascaption" data-kg-thumbnail="https://mytecknet.com/content/media/2024/01/WinTAK-Onboarding-SoftCert_thumb.jpg" data-kg-custom-thumbnail="">
            <div class="kg-video-container" style="padding-bottom: 56.25%;">
                <video src="https://mytecknet.com/content/media/2024/01/WinTAK-Onboarding-SoftCert.mp4" poster="https://img.spacergif.org/v1/1920x1080/0a/spacer.png" width="1920" height="1080" playsinline="" preload="metadata" style="background: transparent url(&#39;https://mytecknet.com/content/media/2024/01/WinTAK-Onboarding-SoftCert_thumb.jpg&#39;) 50% 50% / cover no-repeat;"></video>
                <div class="kg-video-overlay">
                    <button class="kg-video-large-play-icon" aria-label="Play video">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M23.14 10.608 2.253.164A1.559 1.559 0 0 0 0 1.557v20.887a1.558 1.558 0 0 0 2.253 1.392L23.14 13.393a1.557 1.557 0 0 0 0-2.785Z"></path>
                        </svg>
                    </button>
                </div>
                <div class="kg-video-player-container">
                    <div class="kg-video-player" style="--buffered-width: 0%;">
                        <button class="kg-video-play-icon" aria-label="Play video">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path d="M23.14 10.608 2.253.164A1.559 1.559 0 0 0 0 1.557v20.887a1.558 1.558 0 0 0 2.253 1.392L23.14 13.393a1.557 1.557 0 0 0 0-2.785Z"></path>
                            </svg>
                        </button>
                        <button class="kg-video-pause-icon kg-video-hide" aria-label="Pause video">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <rect x="3" y="1" width="7" height="22" rx="1.5" ry="1.5"></rect>
                                <rect x="14" y="1" width="7" height="22" rx="1.5" ry="1.5"></rect>
                            </svg>
                        </button>
                        <span class="kg-video-current-time">0:00</span>
                        <div class="kg-video-time">
                            /<span class="kg-video-duration">0:32</span>
                        </div>
                        <input type="range" class="kg-video-seek-slider" max="32" value="0">
                        <button class="kg-video-playback-rate" aria-label="Adjust playback speed">1×</button>
                        <button class="kg-video-unmute-icon" aria-label="Unmute">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path d="M15.189 2.021a9.728 9.728 0 0 0-7.924 4.85.249.249 0 0 1-.221.133H5.25a3 3 0 0 0-3 3v2a3 3 0 0 0 3 3h1.794a.249.249 0 0 1 .221.133 9.73 9.73 0 0 0 7.924 4.85h.06a1 1 0 0 0 1-1V3.02a1 1 0 0 0-1.06-.998Z"></path>
                            </svg>
                        </button>
                        <button class="kg-video-mute-icon kg-video-hide" aria-label="Mute">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path d="M16.177 4.3a.248.248 0 0 0 .073-.176v-1.1a1 1 0 0 0-1.061-1 9.728 9.728 0 0 0-7.924 4.85.249.249 0 0 1-.221.133H5.25a3 3 0 0 0-3 3v2a3 3 0 0 0 3 3h.114a.251.251 0 0 0 .177-.073ZM23.707 1.706A1 1 0 0 0 22.293.292l-22 22a1 1 0 0 0 0 1.414l.009.009a1 1 0 0 0 1.405-.009l6.63-6.631A.251.251 0 0 1 8.515 17a.245.245 0 0 1 .177.075 10.081 10.081 0 0 0 6.5 2.92 1 1 0 0 0 1.061-1V9.266a.247.247 0 0 1 .073-.176Z"></path>
                            </svg>
                        </button>
                        <input type="range" class="kg-video-volume-slider" max="100" value="100">
                    </div>
                </div>
            </div>
            <figcaption><p><span style="white-space: pre-wrap;">WinTAK - Soft Certificate Connection</span></p></figcaption>
        </figure><h2 id="android-tak-atak">Android TAK (ATAK)</h2><p>Launch ATAK, if this is the first time running the application proceed through the initial configuration prompts.</p>
<ul>
<li>Once completed select the hamburger menu (≡) from the top left and select <code>Settings</code> &gt; <code>Network Preferences</code> &gt; <code>Network Connection Preferences</code> &gt; <code>Manage Server Connections</code></li>
<li>Click (⋮) and select <code>Add</code> to create a new TAK Server connection</li>
<li>Add a description under <code>Name</code>, such as department or unit</li>
<li>Enter the TAK Server information under <code>Host Address</code>.  The <code>Host Address</code> can accept an IP Address or a fully qualified domain name or hostname</li>
<li>Click the checkbox for <code>Advanced Options</code></li>
<li>Keep <code>SSL</code> under <code>Streaming Protocol</code>
<ul>
<li>Keep the Port information of 8089, this is our default client-to-server connection port</li>
</ul>
</li>
<li>Uncheck the <code>Use default TLS/SSL Certificates</code></li>
<li>Click on <code>Import Trust Store</code> to install the TAK Server public certificate truststore
<ul>
<li>For example, this is the <em>truststore-TAK-ID-CA-01.p12</em> we downloaded earlier</li>
</ul>
</li>
<li>Click on <code>Import Client Certificate</code> and select our client certificate to install
<ul>
<li>For example, this is the <em>wintak.p12</em> we downloaded earlier</li>
</ul>
</li>
</ul>
<p>Once we have entered all the required information we can click <code>Ok</code> and we should see that we are connected to our TAK Server.</p>
<figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/Screenshot_20231225_221639_ATAK.jpg" class="kg-image" alt="" loading="lazy" width="708" height="339" srcset="https://mytecknet.com/content/images/size/w600/2023/12/Screenshot_20231225_221639_ATAK.jpg 600w, https://mytecknet.com/content/images/2023/12/Screenshot_20231225_221639_ATAK.jpg 708w"><figcaption><span style="white-space: pre-wrap;">Example contents required for onboarding</span></figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/Screenshot_20231225_221727_ATAK.jpg" class="kg-image" alt="" loading="lazy" width="701" height="421" srcset="https://mytecknet.com/content/images/size/w600/2023/12/Screenshot_20231225_221727_ATAK.jpg 600w, https://mytecknet.com/content/images/2023/12/Screenshot_20231225_221727_ATAK.jpg 701w"><figcaption><span style="white-space: pre-wrap;">Example ATAK TAK Server Configuration</span></figcaption></figure><figure class="kg-card kg-video-card kg-width-regular kg-card-hascaption" data-kg-thumbnail="https://mytecknet.com/content/media/2024/01/ATAK-Onboarding-SoftCert_thumb.jpg" data-kg-custom-thumbnail="">
            <div class="kg-video-container" style="padding-bottom: 42.857%;">
                <video src="https://mytecknet.com/content/media/2024/01/ATAK-Onboarding-SoftCert.mp4" poster="https://img.spacergif.org/v1/2520x1080/0a/spacer.png" width="2520" height="1080" playsinline="" preload="metadata" style="background: transparent url(&#39;https://mytecknet.com/content/media/2024/01/ATAK-Onboarding-SoftCert_thumb.jpg&#39;) 50% 50% / cover no-repeat;"></video>
                <div class="kg-video-overlay">
                    <button class="kg-video-large-play-icon" aria-label="Play video">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M23.14 10.608 2.253.164A1.559 1.559 0 0 0 0 1.557v20.887a1.558 1.558 0 0 0 2.253 1.392L23.14 13.393a1.557 1.557 0 0 0 0-2.785Z"></path>
                        </svg>
                    </button>
                </div>
                <div class="kg-video-player-container">
                    <div class="kg-video-player" style="--buffered-width: 0%;">
                        <button class="kg-video-play-icon" aria-label="Play video">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path d="M23.14 10.608 2.253.164A1.559 1.559 0 0 0 0 1.557v20.887a1.558 1.558 0 0 0 2.253 1.392L23.14 13.393a1.557 1.557 0 0 0 0-2.785Z"></path>
                            </svg>
                        </button>
                        <button class="kg-video-pause-icon kg-video-hide" aria-label="Pause video">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <rect x="3" y="1" width="7" height="22" rx="1.5" ry="1.5"></rect>
                                <rect x="14" y="1" width="7" height="22" rx="1.5" ry="1.5"></rect>
                            </svg>
                        </button>
                        <span class="kg-video-current-time">0:00</span>
                        <div class="kg-video-time">
                            /<span class="kg-video-duration">0:42</span>
                        </div>
                        <input type="range" class="kg-video-seek-slider" max="42" value="0">
                        <button class="kg-video-playback-rate" aria-label="Adjust playback speed">1×</button>
                        <button class="kg-video-unmute-icon" aria-label="Unmute">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path d="M15.189 2.021a9.728 9.728 0 0 0-7.924 4.85.249.249 0 0 1-.221.133H5.25a3 3 0 0 0-3 3v2a3 3 0 0 0 3 3h1.794a.249.249 0 0 1 .221.133 9.73 9.73 0 0 0 7.924 4.85h.06a1 1 0 0 0 1-1V3.02a1 1 0 0 0-1.06-.998Z"></path>
                            </svg>
                        </button>
                        <button class="kg-video-mute-icon kg-video-hide" aria-label="Mute">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path d="M16.177 4.3a.248.248 0 0 0 .073-.176v-1.1a1 1 0 0 0-1.061-1 9.728 9.728 0 0 0-7.924 4.85.249.249 0 0 1-.221.133H5.25a3 3 0 0 0-3 3v2a3 3 0 0 0 3 3h.114a.251.251 0 0 0 .177-.073ZM23.707 1.706A1 1 0 0 0 22.293.292l-22 22a1 1 0 0 0 0 1.414l.009.009a1 1 0 0 0 1.405-.009l6.63-6.631A.251.251 0 0 1 8.515 17a.245.245 0 0 1 .177.075 10.081 10.081 0 0 0 6.5 2.92 1 1 0 0 0 1.061-1V9.266a.247.247 0 0 1 .073-.176Z"></path>
                            </svg>
                        </button>
                        <input type="range" class="kg-video-volume-slider" max="100" value="100">
                    </div>
                </div>
            </div>
            <figcaption><p><span style="white-space: pre-wrap;">ATAK - Soft Certificate Connection</span></p></figcaption>
        </figure><figure class="kg-card kg-bookmark-card kg-card-hascaption"><a class="kg-bookmark-container" href="https://play.google.com/store/apps/details?id=com.atakmap.app.civ&amp;pcampaignid=web_share&amp;ref=mytecknet.com"><div class="kg-bookmark-content"><div class="kg-bookmark-title">ATAK-CIV (Civil Use) - Apps on Google Play</div><div class="kg-bookmark-description">The Android Team Awareness Kit is a geospatial &amp; situational awareness platform.</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="./Let&#39;s Build a TAK Server_files/favicon_v3.ico" alt=""><span class="kg-bookmark-author">Apps on Google Play</span><span class="kg-bookmark-publisher">TAK Product Center</span></div></div><div class="kg-bookmark-thumbnail"><img src="./Let&#39;s Build a TAK Server_files/unnamed.png" alt="" onerror="this.style.display = &#39;none&#39;"></div></a><figcaption><p><span style="white-space: pre-wrap;">ATAK via the Google Play Store</span></p></figcaption></figure><h2 id="ios-tak-itak">iOS TAK (iTAK)</h2><p>Onboarding iTAK to a TAK Server works in one of three methods: </p><ul>
<li><strong>Connect with Credentials</strong>
<ul>
<li>This is similar to ATAK Quick Connect which requires the TAK Server to use a publicly signed certificate that the iPhone trusts.  A third-party private certificate can work as long as it's stored within the iPhone's certificate store.</li>
</ul>
</li>
<li><strong>Upload Server Package</strong>
<ul>
<li>This is the most common in environments that do not have a public-facing TAK Server.  It requires the iTAK device access to a TAK Server Data Package specifically for iTAK.  iTAK Data Package creation and format can be found here.</li>
</ul>
</li>
<li><strong>Scan QR Code</strong>
<ul>
<li>This is similar to Connect with Credentials and requires the QR Code to have the TAK Server address embedded within the QR Code</li>
</ul>
</li>
</ul>
<p>In this guide we will use a iTAK Data Package created using the guide found <a href="https://mytecknet.com/creating-tak-data-packages-for-enrollment/#itak-deployment-packages">here</a>.  With iTAK open, select <code><em>Settings</em> (⚙️)</code> &gt; <em><code>Network</code></em> &gt; <em><code>Servers</code></em>.  At the bottom of the <em><code>Servers</code></em> dialog, there is a plus-sign (➕) to <em><code>Add TAK Server</code></em>. </p><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://mytecknet.com/creating-tak-data-packages-for-enrollment/"><div class="kg-bookmark-content"><div class="kg-bookmark-title">Creating Data Packages for TAK Configuration/Enrollment</div><div class="kg-bookmark-description">Creating a data package for TAK configuration/enrollment provides a turnkey solution for new clients. To summarize as a TAK administrator after provisioning the TAK credentials or certificate issuance process all that is required by the end user is a compressed file.</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="./Let&#39;s Build a TAK Server_files/LogoOnly_20230301_01.png" alt=""><span class="kg-bookmark-author">myTeckNet</span><span class="kg-bookmark-publisher">JR</span></div></div><div class="kg-bookmark-thumbnail"><img src="./Let&#39;s Build a TAK Server_files/TAK-DataPackage.png" alt="" onerror="this.style.display = &#39;none&#39;"></div></a></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/IMG_0666.jpg" class="kg-image" alt="" loading="lazy" width="338" height="267"><figcaption><span style="white-space: pre-wrap;">iTAK Connection Options</span></figcaption></figure><p>Select <em><code>Upload Server Package</code></em>, and browse the iTAK device folders for the TAK Server Data Package.  Once you select the target TAK Server Data Package the server connection will be automatically imported.  If configured correctly; both TAK Server and the path to the TAK Server, the client will say <em>Connected</em>.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/IMG_0669.jpg" class="kg-image" alt="" loading="lazy" width="563" height="252"><figcaption><span style="white-space: pre-wrap;">iTAK connected to a TAK Server</span></figcaption></figure><p>From <code>Marti</code> administrative dashboard, click on the hamburger menu (≡), select <em><code>Monitoring</code></em> &gt; <em><code>Client Dashboard</code></em>, and verify the connected client.  Under the TAK Client column, we can see that iTAK is connected with associated information.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-62.png" class="kg-image" alt="" loading="lazy" width="1626" height="447" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-62.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-62.png 1000w, https://mytecknet.com/content/images/size/w1600/2023/12/image-62.png 1600w, https://mytecknet.com/content/images/2023/12/image-62.png 1626w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">iTAK within the Client Dashboard Monitor</span></figcaption></figure><figure class="kg-card kg-bookmark-card kg-card-hascaption"><a class="kg-bookmark-container" href="https://apps.apple.com/us/app/itak/id1561656396?ref=mytecknet.com"><div class="kg-bookmark-content"><div class="kg-bookmark-title">‎iTAK</div><div class="kg-bookmark-description">‎The Team Awareness Kit (TAK) (known as the Tactical Assault Kit in the Department of Defense) application: iTAK is a collaborative geospatial application to see your teams’ locations, sensor information, videos, chat, and more in real-time. iTAK supports Department of Defense (DoD) and commercial…</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="./Let&#39;s Build a TAK Server_files/faviconV2" alt=""><span class="kg-bookmark-author">App Store</span><span class="kg-bookmark-publisher">United States Department of the Army, TAK Product Center</span></div></div><div class="kg-bookmark-thumbnail"><img src="./Let&#39;s Build a TAK Server_files/1200x630wa.png" alt="" onerror="this.style.display = &#39;none&#39;"></div></a><figcaption><p><span style="white-space: pre-wrap;">iTAK via the Apple Store</span></p></figcaption></figure><h2 id="tak-tracker">TAK Tracker</h2><p>TAK Tracker is a lightweight TAK client that provides one-way situational awareness reporting to the TAK Server with bidirectional chat.  This is a good solution for situations that only require reporting and not SA.</p><h3 id="atak-tracker">ATAK-Tracker</h3><p>Launch ATAK-Tracker, if this is the first time running the application proceed through the initial configuration prompts.</p>
<ul>
<li>Enter a <code>Callsign</code>, select the <code>Team</code> and <code>Role</code></li>
<li>Enter the TAK Server information under <code>Host</code>.  The <code>Host</code> can accept an IP Address or a fully qualified domain name or hostname</li>
<li>Enter 8089 under <code>Port</code></li>
<li>Check the box <code>Use SSL</code></li>
<li>Enter the certificate password in the <code>Cert PW</code> prompt</li>
<li>Click (⋯) under <code>Cert</code> and select our client certificate to install
<ul>
<li>For example, this is the <em>wintak.p12</em> we downloaded earlier</li>
</ul>
</li>
<li>Click (⋯) under <code>trust</code> to install the TAK Server public certificate truststore
<ul>
<li>For example, this is the <em>truststore-TAK-ID-CA-01.p12</em> we downloaded earlier</li>
</ul>
</li>
</ul>
<p>Once we have entered all the required information we can click <code>Done</code> and we should see that we are connected to our TAK Server.</p>
<figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-26.png" class="kg-image" alt="" loading="lazy" width="347" height="830"><figcaption><span style="white-space: pre-wrap;">ATAK-Tracker example configuration</span></figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/Screenshot_20231225_223351_TAK-Tracker-1.jpg" class="kg-image" alt="" loading="lazy" width="270" height="531"><figcaption><span style="white-space: pre-wrap;">ATAK-Tracker successfully connected</span></figcaption></figure><figure class="kg-card kg-bookmark-card kg-card-hascaption"><a class="kg-bookmark-container" href="https://play.google.com/store/apps/details?id=gov.tak.taktracker&amp;pcampaignid=web_share&amp;ref=mytecknet.com"><div class="kg-bookmark-content"><div class="kg-bookmark-title">TAK Tracker - Apps on Google Play</div><div class="kg-bookmark-description">TAK Tracker is a lightweight tool that can share location on TAK infrastructure.</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="./Let&#39;s Build a TAK Server_files/favicon_v3.ico" alt=""><span class="kg-bookmark-author">Apps on Google Play</span><span class="kg-bookmark-publisher">TAK Product Center</span></div></div><div class="kg-bookmark-thumbnail"><img src="./Let&#39;s Build a TAK Server_files/unnamed(1).png" alt="" onerror="this.style.display = &#39;none&#39;"></div></a><figcaption><p><span style="white-space: pre-wrap;">TAK Tracker via the Google Play Store</span></p></figcaption></figure><h3 id="itak-tracker">iTAK-Tracker</h3><p>In this guide we will use a iTAK Data Package created using the guide found <a href="https://mytecknet.com/creating-tak-data-packages-for-enrollment/">here</a>.  Launch iTAK-Tracker, if this is the first time running the application proceed through the initial configuration prompts.</p>
<ul>
<li>Select <code>Data Package</code> and navigate to the data package to upload.</li>
<li>When the data package is selected the contents will automatically configure and establish the connection to the TAK Server.</li>
<li>Click <code>Next</code> to finish the setup process.</li>
</ul>
<figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://mytecknet.com/creating-tak-data-packages-for-enrollment/"><div class="kg-bookmark-content"><div class="kg-bookmark-title">Creating Data Packages for TAK Configuration/Enrollment</div><div class="kg-bookmark-description">Creating a data package for TAK configuration/enrollment provides a turnkey solution for new clients. To summarize as a TAK administrator after provisioning the TAK credentials or certificate issuance process all that is required by the end user is a compressed file.</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="./Let&#39;s Build a TAK Server_files/LogoOnly_20230301_01.png" alt=""><span class="kg-bookmark-author">myTeckNet</span><span class="kg-bookmark-publisher">JR</span></div></div><div class="kg-bookmark-thumbnail"><img src="./Let&#39;s Build a TAK Server_files/TAK-DataPackage.png" alt="" onerror="this.style.display = &#39;none&#39;"></div></a></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/IMG_0676-1.jpg" class="kg-image" alt="" loading="lazy" width="225" height="212"><figcaption><span style="white-space: pre-wrap;">Select Data Package to upload the onboarding package</span></figcaption></figure><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/IMG_0677-1.jpg" class="kg-image" alt="" loading="lazy" width="422" height="331"><figcaption><span style="white-space: pre-wrap;">In this example the data package is iPhone.zip</span></figcaption></figure><p>If the contents of the .zip are accurate iTAK-Tracker will display the configured TAK Server information.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/IMG_0678.jpg" class="kg-image" alt="" loading="lazy" width="282" height="301"><figcaption><span style="white-space: pre-wrap;">Successful enrollment</span></figcaption></figure><p>From <code>Marti</code> administrative dashboard, click on the hamburger menu (≡), select <em><code>Monitoring</code></em> &gt; <em><code>Client Dashboard</code></em>, and verify the connected client.  Under the TAK Client column, we can see that iTAK-Tracker is connected with associated information.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Let&#39;s Build a TAK Server_files/image-64.png" class="kg-image" alt="" loading="lazy" width="1626" height="448" srcset="https://mytecknet.com/content/images/size/w600/2023/12/image-64.png 600w, https://mytecknet.com/content/images/size/w1000/2023/12/image-64.png 1000w, https://mytecknet.com/content/images/size/w1600/2023/12/image-64.png 1600w, https://mytecknet.com/content/images/2023/12/image-64.png 1626w" sizes="(min-width: 720px) 720px"><figcaption><span style="white-space: pre-wrap;">iTAK-Tracker within the Client Dashboard Monitor</span></figcaption></figure><figure class="kg-card kg-bookmark-card kg-card-hascaption"><a class="kg-bookmark-container" href="https://apps.apple.com/us/app/tak-tracker/id6455684671?ref=mytecknet.com"><div class="kg-bookmark-content"><div class="kg-bookmark-title">‎TAK Tracker</div><div class="kg-bookmark-description">‎The Team Awareness Kit (TAK) Tracker (also known as the Tactical Assault Kit in the Department of Defense) is a lightweight, send-only application designed to enable easy integrations into existing training and operational workflows. The application is designed from the ground-up in iOS and connects…</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="./Let&#39;s Build a TAK Server_files/faviconV2(1)" alt=""><span class="kg-bookmark-author">App Store</span><span class="kg-bookmark-publisher">Cory Foy</span></div></div><div class="kg-bookmark-thumbnail"><img src="./Let&#39;s Build a TAK Server_files/1200x630wa(1).png" alt="" onerror="this.style.display = &#39;none&#39;"></div></a><figcaption><p><span style="white-space: pre-wrap;">TAK Tracker via the Apple Store</span></p></figcaption></figure>
<!--kg-card-begin: html-->
<center>
  <a href="https://www.buymeacoffee.com/JayRmyTecknNet?ref=mytecknet.com"><img src="./Let&#39;s Build a TAK Server_files/saved_resource(1)"></a>
</center>
<!--kg-card-end: html-->

        </div>

        <div class="pagination-container gh-canvas">
        <nav class="pagination">

            <div class="pagination-left">
                    <a class="newer-posts" href="https://mytecknet.com/tak-references/">
                        <span class="pagination-label">Previous</span>
                        TAK References
                    </a>
            </div>

            <div class="pagination-right">
                    <a class="older-posts" href="https://mytecknet.com/implementing-channels-in-tak/">
                        <span class="pagination-label">Next</span>
                        Implementing Channels in TAK
                    </a>
            </div>

        </nav>
        </div>

            <div class="gh-comments gh-canvas">
                
        <div id="ghost-comments-root"><iframe innerref="[object Object]" frameborder="0" title="comments-frame" style="width: 100%; height: 152px;" src="./Let&#39;s Build a TAK Server_files/saved_resource.html"></iframe></div><script defer="" src="./Let&#39;s Build a TAK Server_files/comments-ui.min.js" data-locale="en" data-ghost-comments="https://mytecknet.com/" data-api="https://mytecknet.com/ghost/api/content/" data-admin="https://mytecknet.com/ghost/" data-key="7e8a47577f95c21b5a24a783bb" data-title="null" data-count="true" data-post-id="657ea57845f92f04c62d5e2a" data-color-scheme="auto" data-avatar-saturation="60" data-accent-color="#5900ff" data-comments-enabled="all" data-publication="myTeckNet" crossorigin="anonymous" type="text/javascript"></script>
    
            </div>

    </article>


</main>
    </div>

    <footer class="gh-foot gh-outer">
        <div class="gh-foot-inner gh-inner">
            <div class="gh-copyright">
                myTeckNet © 2025
            </div>
                <nav class="gh-foot-menu">
                    <ul class="nav">
    <li class="nav-home"><a href="https://mytecknet.com/">Home</a></li>
    <li class="nav-contact"><a href="mailto:webmaster@mytecknet.com">Contact</a></li>
    <li class="nav-legal-information"><a href="https://mytecknet.com/legal/">Legal Information</a></li>
    <li class="nav-rss"><a href="https://mytecknet.com/rss/">RSS</a></li>
</ul>

                </nav>
            <div class="gh-powered-by">
                <a href="https://ghost.org/" target="_blank" rel="noopener">Powered by Ghost</a>
            </div>
        </div>
    </footer>

</div><iframe name="googlefcPresent" style="width: 0px; height: 0px; border: none; z-index: -1000; left: -1000px; top: -1000px; display: none;" src="./Let&#39;s Build a TAK Server_files/saved_resource(2).html"></iframe>

    <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="pswp__bg"></div>

    <div class="pswp__scroll-wrap">
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>
<script src="./Let&#39;s Build a TAK Server_files/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous" type="text/javascript">
</script>
<script src="./Let&#39;s Build a TAK Server_files/main.min.js" type="text/javascript"></script>

<!-- Table of Contents -->
<script src="./Let&#39;s Build a TAK Server_files/tocbot.min.js" type="text/javascript"></script>
<script type="text/javascript">
    tocbot.init({
        // Where to render the table of contents.
        tocSelector: '.gh-toc',
        // Where to grab the headings to build the table of contents.
        contentSelector: '.gh-content',
        // Which headings to grab inside of the contentSelector element.
        headingSelector: 'h1, h2, h3',
        // Ensure correct positioning
        hasInnerContainers: true,
    });
</script>
<!-- End Table of Contents -->

<!-- Progress Bar -->
  <script type="text/javascript">
    const progressBar = document.querySelector('.reading-progress');

    function updateProgress() {
      const totalHeight = document.body.clientHeight;
      const windowHeight = document.documentElement.clientHeight;
      const position = window.scrollY;
      const progress = position / (totalHeight - windowHeight) * 100;
      progressBar.setAttribute('value', progress);
      requestAnimationFrame(updateProgress);
    }

    requestAnimationFrame(updateProgress);
  </script>
<!-- End Progress Bar -->

<!-- Code Styles -->
<script src="./Let&#39;s Build a TAK Server_files/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerpolicy="no-referrer" type="text/javascript"></script>
<script src="./Let&#39;s Build a TAK Server_files/prism-python.min.js" integrity="sha512-AKaNmg8COK0zEbjTdMHJAPJ0z6VeNqvRvH4/d5M4sHJbQQUToMBtodq4HaV4fa+WV2UTfoperElm66c9/8cKmQ==" crossorigin="anonymous" referrerpolicy="no-referrer" type="text/javascript"></script>
<script src="./Let&#39;s Build a TAK Server_files/prism-toolbar.min.js" integrity="sha512-st608h+ZqzliahyzEpETxzU0f7z7a9acN6AFvYmHvpFhmcFuKT8a22TT5TpKpjDa3pt3Wv7Z3SdQBCBdDPhyWA==" crossorigin="anonymous" referrerpolicy="no-referrer" type="text/javascript"></script>
<script src="./Let&#39;s Build a TAK Server_files/prism-copy-to-clipboard.min.js" integrity="sha512-/kVH1uXuObC0iYgxxCKY41JdWOkKOxorFVmip+YVifKsJ4Au/87EisD1wty7vxN2kAhnWh6Yc8o/dSAXj6Oz7A==" crossorigin="anonymous" referrerpolicy="no-referrer" type="text/javascript"></script>
<script src="./Let&#39;s Build a TAK Server_files/prism-core.min.js" integrity="sha512-9khQRAUBYEJDCDVP2yw3LRUQvjJ0Pjx0EShmaQjcHa6AXiOv6qHQu9lCAIR8O+/D8FtaCoJ2c0Tf9Xo7hYH01Q==" crossorigin="anonymous" referrerpolicy="no-referrer" type="text/javascript"></script>
<script src="./Let&#39;s Build a TAK Server_files/prism-autoloader.min.js" integrity="sha512-SkmBfuA2hqjzEVpmnMt/LINrjop3GKWqsuLSSB3e7iBmYK7JuWw4ldmmxwD9mdm2IRTTi0OxSAfEGvgEi0i2Kw==" crossorigin="anonymous" referrerpolicy="no-referrer" type="text/javascript"></script>

<!-- Open hyperlinks in new tab -->
<script type="text/javascript">
  const domain = location.host.replace('www.', '');
  const links = document.querySelectorAll('a');
  
  links.forEach((link) => {
    if(!link.href.includes(domain)) {
      link.setAttribute('target', '_blank');
      link.setAttribute('rel', 'noreferrer noopener');
    }
  })
</script>


<iframe name="__tcfapiLocator" src="./Let&#39;s Build a TAK Server_files/saved_resource(3).html" style="display: none; width: 0px; height: 0px; border: none; z-index: -1000; left: -1000px; top: -1000px;"></iframe><iframe name="__uspapiLocator" src="./Let&#39;s Build a TAK Server_files/saved_resource(4).html" style="display: none; width: 0px; height: 0px; border: none; z-index: -1000; left: -1000px; top: -1000px;"></iframe><iframe name="__gppLocator" src="./Let&#39;s Build a TAK Server_files/saved_resource(5).html" style="display: none; width: 0px; height: 0px; border: none; z-index: -1000; left: -1000px; top: -1000px;"></iframe><iframe name="googlefcInactive" src="./Let&#39;s Build a TAK Server_files/saved_resource(6).html" style="display: none; width: 0px; height: 0px; border: none; z-index: -1000; left: -1000px; top: -1000px;"></iframe><iframe name="googlefcLoaded" src="./Let&#39;s Build a TAK Server_files/saved_resource(7).html" style="display: none; width: 0px; height: 0px; border: none; z-index: -1000; left: -1000px; top: -1000px;"></iframe><iframe name="__privateStripeMetricsController8770" frameborder="0" allowtransparency="true" scrolling="no" role="presentation" allow="payment *" src="./Let&#39;s Build a TAK Server_files/m-outer-3437aaddcdf6922d623e172c2d6f9278.html" aria-hidden="true" tabindex="-1" style="border: none !important; margin: 0px !important; padding: 0px !important; width: 1px !important; min-width: 100% !important; overflow: hidden !important; display: block !important; visibility: hidden !important; position: fixed !important; height: 1px !important; pointer-events: none !important; user-select: none !important;"></iframe><div id="ghost-portal-root"><iframe data-testid="portal-trigger-frame" title="portal-trigger" frameborder="0" dir="ltr" class="gh-portal-triggerbtn-iframe" style="z-index: 3999998; position: fixed; bottom: 0px; right: 0px; width: 239px; max-width: 500px; height: 98px; animation: 250ms ease 0s 1 normal none running animation-bhegco; transition: opacity 0.3s; overflow: hidden;" src="./Let&#39;s Build a TAK Server_files/saved_resource(8).html"></iframe></div><div id="sodo-search-root"></div></body></html>